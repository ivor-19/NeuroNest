import{r as u,j as e,t as S,S as se,a as Ve,K as Je,m as Ze,L as Ie}from"./app-D0TONvTb.js";import{B as j}from"./button-C2EKBrKk.js";import{C,a as ne,b as ie,c as _,B as L,d as de}from"./badge-DJ1vkY0b.js";import{I as Y}from"./input-BsaovUtE.js";import{S as ae,a as te,b as le,c as re,d as O}from"./select-oRYuHD4I.js";import{S as pe}from"./switch-CJQ4QvWt.js";import{S as ce}from"./separator-BZacDO_6.js";import{C as W,D as ve,d as ge,e as Ne,g as H,S as Be,A as oe,c as xe,b as es}from"./user-menu-content-cBhSGpRx.js";import{T as $e,a as ss,b as ue,c as K}from"./tabs-ddTdE8X1.js";import{H as as}from"./header-layout-yjG-qLsX.js";import{P as Me}from"./progress-E10oTE06.js";import{D as ye,b as ke,c as Ce,d as Ae,e as Ue,f as Ye}from"./dialog-Cl7sGTu3.js";import{L as F}from"./label-C5VoQLjS.js";import{T as ze}from"./textarea-D7ow3YsO.js";import{R as Oe,a as je}from"./radio-group-C-vtMkkz.js";import{c as ts}from"./graduation-cap-DmgGERJV.js";import{P as ls}from"./plus-D7y4u_Ns.js";import{X as He}from"./x-kGDq6ELP.js";import{T as me}from"./trash-2-pLVciid3.js";import{C as rs}from"./check-DBDsCk-k.js";import{D as Ge}from"./delete-modal-zix-H-h1.js";import{S as ee}from"./search-BtLLL962.js";import{F as P}from"./file-text-6HOQdrY1.js";import{U as ns}from"./user-check-C0SbG8HQ.js";import{E as be}from"./ellipsis-oqgbaJXc.js";import{U as z}from"./users-CzUjKjVk.js";import{C as Se,A as Le}from"./circle-alert-CTrWUQF5.js";import{C as fe}from"./circle-check-big-DRhho3i_.js";import{T as is}from"./target-BdNJZ_Us.js";import{C as we}from"./clock-Dp6kPE36.js";import{M as Qe}from"./menu-CP9G3mP2.js";import{B as Fe}from"./book-open-Da9jwzCy.js";import"./index-9WxEhLg1.js";import"./index-CMOk_DQe.js";import"./index-1wELLU7w.js";import"./app-logo-icon-3SGekzS3.js";import"./award-DeY4LgZa.js";import"./alert-dialog-DgKL9oZU.js";import"./unlink-BEaN-hfy.js";import"./triangle-alert-BFHc85RQ.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cs=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Ee=ts("CircleHelp",cs);function qe({open:t,onOpenChange:D,selectedAssessment:o,questions:x,setQuestions:f,onComplete:T}){var V,G;const[N,E]=u.useState(null),[a,n]=u.useState({id:"",type:"multiple-choice",question:"",options:["","","",""],correctAnswer:"0",points:1}),g=()=>{n({id:"",type:"multiple-choice",question:"",options:["","","",""],correctAnswer:"0",points:1}),E(null)},y=r=>{const c={...a,type:r};r==="true-false"?(c.options=["True","False"],c.correctAnswer="0"):r==="multiple-choice"?(c.options=["","","",""],c.correctAnswer="0"):(c.options=void 0,c.correctAnswer=void 0),n(c)},b=()=>{a.options&&a.options.length<6&&n({...a,options:[...a.options,""]})},v=r=>{if(a.options&&a.options.length>2){const c=a.options.filter((J,m)=>m!==r);let i=a.correctAnswer;const A=String(a.correctAnswer||"0");A===r.toString()?i="0":parseInt(A)>r&&(i=(parseInt(A)-1).toString()),n({...a,options:c,correctAnswer:i})}},$=(r,c)=>{if(a.options){const i=[...a.options];i[r]=c,n({...a,options:i})}},h=()=>{var c;if(!a.question.trim()){S.warning("A question is required to continue!");return}if(a.type==="multiple-choice"||a.type==="true-false"){if(!a.correctAnswer&&a.correctAnswer!=="0"){S.warning("A correct answer is required to continue!");return}if((c=a.options)!=null&&c.some(J=>!J.trim())){S.warning("Options are require to be filled up to continue!");return}const i=String(a.correctAnswer),A=parseInt(i);if(isNaN(A)){S.warning("Invalid correct answer selection");return}}const r={...a,id:a.id||Date.now().toString()};if(N!==null){const i=[...x];i[N]=r,f(i),S.success("Question updated successfully")}else f([...x,r]),S.success("Question added successfully");g()},Q=r=>{f(x.filter((c,i)=>i!==r)),S.info("Question is removed")},X=async()=>{if(x.length===0){S.warning("Please add at least one question");return}try{const r=x.filter((i,A)=>(i.type==="multiple-choice"||i.type==="true-false")&&!i.correctAnswer&&i.correctAnswer!=="0"?(console.error(`Question ${A+1} has no correct answer:`,i),!0):!1);if(r.length>0){S.warning(`${r.length} question(s) are missing correct answers. Please review and fix them.`);return}const c=x.map((i,A)=>({type:i.type,question:i.question,points:i.points,options:i.options||null,correctAnswer:i.correctAnswer||null,order:A}));await se.post(route("instructor.saveQuestions",{assessment:o==null?void 0:o.id}),{questions:c},{onSuccess:()=>{console.log("Success! Formatted questions were:",c),S.success("Assessment created successfully!",{description:`${x.length} questions have been added to your assessment.`}),T()},onError:i=>{console.error("Error saving assessment:",i),S.error("Error saving assessment. Please try again.")}})}catch(r){console.error("Error saving assessment:",r),S.error("Error saving assessment. Please try again.")}},R=()=>x.reduce((r,c)=>r+c.points,0);return e.jsx(ye,{open:t,onOpenChange:D,children:e.jsxs(ke,{className:"min-w-[70%] overflow-y-auto max-h-[90%]",children:[e.jsxs(Ce,{children:[e.jsxs(Ae,{className:"flex items-center gap-2",children:[e.jsx(Ee,{className:"h-5 w-5"}),' Add Questions to "',o==null?void 0:o.title,'" ID: ',o==null?void 0:o.id]}),e.jsx(Ue,{children:"Create questions for your assessment. You can add multiple choice, true/false, short answer, and essay questions."})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx("div",{className:"space-y-6",children:e.jsxs(C,{children:[e.jsx(ne,{children:e.jsx(ie,{className:"text-lg",children:N!==null?"Edit Question":"Add New Question"})}),e.jsxs(_,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(F,{htmlFor:"question-type",children:"Question Type"}),e.jsxs(ae,{value:a.type,onValueChange:y,children:[e.jsx(te,{children:e.jsx(le,{})}),e.jsxs(re,{children:[e.jsx(O,{value:"multiple-choice",children:"Multiple Choice"}),e.jsx(O,{value:"true-false",children:"True/False"}),e.jsx(O,{value:"short-answer",children:"Short Answer"}),e.jsx(O,{value:"essay",children:"Essay"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(F,{htmlFor:"question-text",children:"Question"}),e.jsx(ze,{id:"question-text",placeholder:"Enter your question here...",value:a.question,onChange:r=>n({...a,question:r.target.value}),rows:3})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(F,{htmlFor:"points",children:"Points"}),e.jsx(Y,{id:"points",type:"number",min:"1",max:"100",value:a.points,onChange:r=>n({...a,points:Number.parseInt(r.target.value)||1})})]}),a.type==="multiple-choice"&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(F,{children:"Answer Options"}),e.jsxs(j,{type:"button",variant:"outline",size:"sm",onClick:b,disabled:(((V=a.options)==null?void 0:V.length)||0)>=6,children:[e.jsx(ls,{className:"h-4 w-4 mr-1"})," Add Option"]})]}),e.jsx(Oe,{value:a.correctAnswer,onValueChange:r=>n({...a,correctAnswer:r}),children:(G=a.options)==null?void 0:G.map((r,c)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(je,{value:c.toString(),id:`option-${c}`}),e.jsx(Y,{placeholder:`Option ${c+1}`,value:r,onChange:i=>$(c,i.target.value),className:"flex-1"}),a.options&&a.options.length>2&&e.jsx(j,{type:"button",variant:"ghost",size:"sm",onClick:()=>v(c),children:e.jsx(He,{className:"h-4 w-4"})})]},c))})]}),a.type==="true-false"&&e.jsxs("div",{className:"space-y-3",children:[e.jsx(F,{children:"Correct Answer"}),e.jsxs(Oe,{value:a.correctAnswer,onValueChange:r=>n({...a,correctAnswer:r}),children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(je,{value:"0",id:"true"}),e.jsx(F,{htmlFor:"true",children:"True"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(je,{value:"1",id:"false"}),e.jsx(F,{htmlFor:"false",children:"False"})]})]})]}),(a.type==="short-answer"||a.type==="essay")&&e.jsx("div",{className:"bg-slate-50 dark:bg-slate-800 p-4 rounded-lg",children:e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:a.type==="short-answer"?"Students will provide a brief text answer to this question.":"Students will provide a detailed essay response to this question."})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(j,{onClick:h,className:"flex-1",children:N!==null?"Update Question":"Add Question"}),N!==null&&e.jsx(j,{variant:"outline",onClick:g,children:"Cancel"})]})]})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"text-lg font-semibold",children:["Questions (",x.length,")"]}),e.jsxs(L,{variant:"secondary",children:["Total Points: ",R()]})]}),e.jsxs("div",{className:"space-y-3 max-h-[550px] overflow-y-auto",children:[x.map((r,c)=>{var i;return e.jsx(C,{className:"p-4",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(L,{variant:"outline",className:"text-xs",children:r.type.replace("-"," ").replace(/\b\w/g,A=>A.toUpperCase())}),e.jsxs(L,{variant:"secondary",className:"text-xs",children:[r.points," pt",r.points!==1?"s":""]})]}),e.jsx("p",{className:"text-sm font-medium mb-2 line-clamp-2",children:r.question}),r.type==="multiple-choice"&&e.jsxs("div",{className:"text-xs text-slate-500",children:["Correct: ",typeof r.correctAnswer=="string"?(i=r.options)==null?void 0:i[Number(r.correctAnswer)]:"Multiple answers"]}),r.type==="true-false"&&e.jsxs("div",{className:"text-xs text-slate-500",children:["Correct: ",r.correctAnswer==="0"?"True":"False"]})]}),e.jsx("div",{className:"flex gap-1",children:e.jsx(j,{variant:"ghost",size:"sm",onClick:()=>Q(c),children:e.jsx(me,{className:"h-4 w-4"})})})]})},r.id)}),x.length===0&&e.jsxs("div",{className:"text-center py-8 text-slate-500",children:[e.jsx(Ee,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"No questions added yet"}),e.jsx("p",{className:"text-sm",children:"Start by creating your first question"})]})]})]})]}),e.jsxs(Ye,{className:"flex gap-2",children:[e.jsx(j,{variant:"outline",onClick:()=>D(!1),children:"Save for Later"}),e.jsxs(j,{onClick:X,disabled:x.length===0,children:[e.jsx(rs,{className:"h-4 w-4 mr-2"})," Complete Assessment (",x.length," questions)"]})]})]})})}function Pe({classInstructor:t,assessments:D,assignments:o,assessmentAssignments:x,setAssessmentAssignments:f}){const[T,N]=u.useState(""),[E,a]=u.useState("all"),[n,g]=u.useState(!1),[y,b]=u.useState(!1),[v,$]=u.useState(null),[h,Q]=u.useState({is_available:!1,opened_at:"",closed_at:""}),X=l=>x.find(w=>w.assessment_id===l&&w.course_id===t.course.id&&w.year_level===t.year_level&&w.section===t.section),R=l=>x.filter(w=>w.assessment_id===l),V=l=>{$(l),b(!0),Q({is_available:!1,opened_at:"",closed_at:""})},[G,r]=u.useState(0),c=l=>{r(l.id),$(l),g(!0)},i=async()=>{if(!v)return;const l={id:Date.now(),assessment_id:v.id,course_id:t.course.id,course:t.course,year_level:t.year_level,section:t.section,is_available:h.is_available,opened_at:h.opened_at||void 0,closed_at:h.closed_at||void 0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};f([...x,l]),se.post(route("instructor.assignAssessment"),l,{onSuccess:()=>{b(!1),$(null),Q({is_available:!1,opened_at:"",closed_at:""}),S.success("Assessment has been assigned",{description:`New assessment for ${l.course.code} ${l.year_level} ${l.section}`,action:{label:"Close",onClick:()=>console.log("Close")}}),window.location.reload()},onError:w=>{console.error("Assignment failed:",w),S.error("There has been some problem",{description:"There is already an assessment dedicated for this section.",action:{label:"Close",onClick:()=>console.log("Close")}})}})},A=D.filter(l=>l.title.toLowerCase().includes(T.toLowerCase())||l.description.toLowerCase().includes(T.toLowerCase())),[J,m]=u.useState(!1),[q,Z]=u.useState([]),he=async l=>{try{const w=await Ve.get(`/instructor/sections/${l}/questions`);Z(w.data.questions)}catch(w){console.error("Error fetching questiosns:",w),S.error("Failed to load questions")}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(C,{children:[e.jsxs(ne,{children:[e.jsx(ie,{children:"Assessment Management"}),e.jsx(de,{children:"Edit assessment details, assign to specific sections, configure questions, or remove assessments as needed"})]}),e.jsxs(_,{children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(ee,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 h-4 w-4"}),e.jsx(Y,{placeholder:"Search assessments...",value:T,onChange:l=>N(l.target.value),className:"pl-10"})]}),e.jsxs(ae,{value:E,onValueChange:a,children:[e.jsx(te,{className:"w-[140px]",children:e.jsx(le,{})}),e.jsxs(re,{children:[e.jsx(O,{value:"all",children:"All Status"}),e.jsx(O,{value:"assigned",children:"Assigned"}),e.jsx(O,{value:"unassigned",children:"Unassigned"})]})]})]}),e.jsxs("div",{className:"space-y-3 overflow-auto h-[26rem]",children:[A.map(l=>{const w=X(l.id),I=R(l.id);return e.jsx(C,{className:"hover:shadow-md transition-shadow",children:e.jsx(_,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-slate-100 to-slate-200 dark:from-slate-700 dark:to-slate-600 rounded-lg flex items-center justify-center",children:e.jsx(P,{className:"h-4 w-4"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1 flex-wrap",children:[e.jsx("h3",{className:"font-semibold truncate",children:l.title}),e.jsxs(L,{variant:"secondary",children:[l.subject.code," - ",l.subject.title]}),w?e.jsx(L,{className:`text-xs ${w.is_available?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200"}`,children:w.is_available?"Available":"Scheduled"}):e.jsx(L,{variant:"outline",className:"text-xs",children:"Not Assigned"})]}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 line-clamp-2 mb-2",children:l.description}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-slate-500 flex-wrap",children:[I.length>0&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ns,{className:"h-3 w-3"})," Assigned to ",I.length," section",I.length!==1?"s":""]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(W,{className:"h-3 w-3"})," Created at:"," ",l!=null&&l.created_at?new Date(l.created_at).toLocaleDateString():"Not available"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(W,{className:"h-3 w-3"})," Updated at:"," ",l!=null&&l.updated_at?new Date(l.updated_at).toLocaleDateString():"Not available"]})]})]})]}),e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs(ve,{children:[e.jsx(ge,{asChild:!0,children:e.jsx(j,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:e.jsx(be,{className:"h-4 w-4"})})}),e.jsxs(Ne,{align:"end",children:[e.jsxs(H,{onClick:()=>{$(l),he(l.id),m(!0)},children:[e.jsx(Be,{className:"h-4 w-4 mr-2"})," Manage Questions"]}),e.jsxs(H,{onClick:()=>V(l),children:[e.jsx(z,{className:"h-4 w-4 mr-2"})," Assign to Section"]}),e.jsx(ce,{}),e.jsxs(H,{className:"text-destructive",onClick:()=>c(l),children:[e.jsx(me,{className:"h-4 w-4 mr-2 text-destructive"})," Delete Assessment"]})]})]})})]})})},l.id)}),A.length===0&&e.jsx(C,{children:e.jsx(_,{className:"py-12",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"mx-auto w-16 h-16 bg-slate-100 dark:bg-slate-700 rounded-full flex items-center justify-center",children:e.jsx(P,{className:"w-8 h-8 text-slate-400"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-lg font-medium",children:"No assessments found"}),e.jsx("p",{className:"text-slate-500 max-w-sm mx-auto",children:T?"Try adjusting your search terms.":"Get started by creating your first assessment."})]})]})})})]})]})]}),e.jsx(ye,{open:y,onOpenChange:b,children:e.jsxs(ke,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[e.jsxs(Ce,{children:[e.jsx(Ae,{children:"Assign Assessment to Section"}),e.jsxs(Ue,{children:['Configure assignment settings for "',v==null?void 0:v.title,'"']})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx(oe,{className:"h-10 w-10",children:e.jsx(xe,{className:"bg-gradient-to-br from-slate-600 to-slate-800 text-white font-bold",children:t.subject.code.substring(0,2)})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:"Assessment Target"}),e.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:[t.subject.code," - ",t.year_level," ",t.section]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-500",children:"Course:"}),e.jsx("div",{className:"font-medium",children:t.course.name})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-500",children:"Year Level:"}),e.jsx("div",{className:"font-medium",children:t.year_level})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-500",children:"Section:"}),e.jsx("div",{className:"font-medium",children:t.section})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium",children:"Availability Settings"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(pe,{id:"is_available",checked:h.is_available,onCheckedChange:l=>Q({...h,is_available:l})}),e.jsx(F,{htmlFor:"is_available",children:"Make available immediately"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(F,{htmlFor:"opened_at",children:"Available From (Optional)"}),e.jsx(Y,{id:"opened_at",type:"datetime-local",value:h.opened_at,onChange:l=>Q({...h,opened_at:l.target.value})}),e.jsx("p",{className:"text-xs text-slate-500",children:"When students can start accessing the assessment"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(F,{htmlFor:"closed_at",children:"Available Until (Optional)"}),e.jsx(Y,{id:"closed_at",type:"datetime-local",value:h.closed_at,onChange:l=>Q({...h,closed_at:l.target.value})}),e.jsx("p",{className:"text-xs text-slate-500",children:"Deadline for assessment submission"})]})]})]}),e.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Se,{className:"h-5 w-5 text-blue-600 dark:text-blue-400 mt-0.5"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{className:"font-medium text-blue-900 dark:text-blue-100 mb-1",children:"Assignment Details"}),e.jsx("div",{className:"text-blue-700 dark:text-blue-300",children:e.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[e.jsx("li",{children:"This assessment will be assigned to the entire section"}),e.jsxs("li",{children:["All students in ",t.year_level," ",t.section," will have access"]}),e.jsx("li",{children:"You can control availability using the settings above"}),e.jsx("li",{children:"Students will see this assessment in their dashboard when available"})]})})]})]})})]}),e.jsxs(Ye,{children:[e.jsx(j,{variant:"outline",onClick:()=>b(!1),children:"Cancel"}),e.jsx(j,{onClick:i,children:"Assign to Section"})]})]})}),e.jsx(qe,{open:J,onOpenChange:m,selectedAssessment:v,questions:q,setQuestions:Z,onComplete:()=>{m(!1)}}),e.jsx(Ge,{open:n,onOpenChange:g,id:G,title:"Delete assessment",routeLink:"instructor.deleteAssessment",description:"This will permanently delete the assessment",toastMessage:"Delete successfully",buttonTitle:"Delete Assessment",type:"delete",additionalInfo:["Assessment will get deleted","You can create a new assessment later if needed"]})]})}function Re({classInstructor:t,setActiveTab:D,setQuestionBuilderOpen:o,setSelectedAssessment:x,setQuestions:f}){const{auth:T}=Je().props,{data:N,setData:E,post:a,processing:n,reset:g}=Ze({instructor_id:T.user.id,subject_id:t.subject.id,title:"",description:""}),y=async b=>{b.preventDefault(),a(route("instructor.createAssessment"),{...N,onSuccess:v=>{g(),o(!0);const $=v.props.assessments,h=$[$.length-1];console.log(h),x(h||{id:Date.now(),...N,instructor:T.user,subject:t.subject,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}),f([]),S.success("Assessment created successfully!",{description:"You can now add questions to your assessment."})},onError:v=>console.error("Error occurred",v)})};return e.jsxs(C,{children:[e.jsxs(ne,{children:[e.jsx(ie,{children:"Create New Assessment"}),e.jsx(de,{children:"Create a new assessment. You can add questions and assign it to students after creation."})]}),e.jsxs(_,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(F,{htmlFor:"title",children:"Assessment Title"}),e.jsx(Y,{id:"title",placeholder:"e.g., Midterm Exam, Weekly Quiz #1",value:N.title,onChange:b=>E("title",b.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(F,{htmlFor:"description",children:"Description"}),e.jsx(ze,{id:"description",placeholder:"Brief description of the assessment...",value:N.description,onChange:b=>E("description",b.target.value),rows:3})]}),e.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Se,{className:"h-5 w-5 text-blue-600 dark:text-blue-400 mt-0.5"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{className:"font-medium text-blue-900 dark:text-blue-100 mb-1",children:"Next Steps"}),e.jsxs("div",{className:"text-blue-700 dark:text-blue-300",children:["After creating this assessment, you'll be able to:",e.jsxs("ul",{className:"list-disc list-inside mt-1 space-y-1",children:[e.jsx("li",{children:"Add questions and answers immediately"}),e.jsx("li",{children:"Configure assessment settings"}),e.jsx("li",{children:"Assign to specific sections"})]})]})]})]})}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx(j,{variant:"outline",onClick:()=>D("section-assessments"),children:"Cancel"}),e.jsx(j,{onClick:y,disabled:n||!N.title||!N.description,className:"transition-all",children:n?"Creating...":"Create Assessment"})]})]})]})}function ds({open:t,onOpenChange:D,quizData:o}){const x=n=>{switch(n.toLowerCase()){case"completed":return{color:"bg-emerald-50 border border-emerald-300 dark:bg-emerald-900/20 dark:border-emerald-700/80",icon:fe,iconColor:"text-emerald-600"};case"in progress":return{color:"bg-amber-50 border border-amber-300 dark:bg-amber-900/20 dark:border-amber-700/80",icon:we,iconColor:"text-amber-600"};default:return{color:"bg-slate-50 text-slate-700 border-slate-200",icon:Se,iconColor:"text-slate-600"}}},f=n=>n.split(" ").map(g=>g[0]).join("").toUpperCase(),T=n=>{const g=Number.parseFloat(n),y=Number.parseFloat(o.total_points);return Math.round(g/y*100)},N=n=>n>=90?"text-emerald-600":n>=80?"text-blue-600":n>=70?"text-amber-600":"text-red-600",E=o.students.filter(n=>n.status.toLowerCase()==="completed").length,a=o.students.length>0?Math.round(o.students.reduce((n,g)=>n+T(g.total_points),0)/o.students.length):0;return e.jsx(ye,{open:t,onOpenChange:D,children:e.jsxs(ke,{className:"min-w-[70%] overflow-y-auto max-h-[90%]",children:[e.jsx(Ce,{className:"pb-6 border-b",children:e.jsx(Ae,{className:"text-2xl font-semibold ",children:"Assessment Results Overview"})}),e.jsxs("div",{className:"flex-1 overflow-hidden flex flex-col space-y-6 pt-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(C,{className:"border",children:e.jsx(_,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2  rounded-lg bg-blue-50 border border-blue-300 dark:bg-blue-900/20 dark:border-blue-700/80",children:e.jsx(z,{className:"h-5 w-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-foreground",children:"Total Students"}),e.jsx("p",{className:"text-2xl font-bold ",children:o.students.length})]})]})})}),e.jsx(C,{className:"border",children:e.jsx(_,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-emerald-50 border border-emerald-300 dark:bg-emerald-900/20 dark:border-emerald-700/80",children:e.jsx(fe,{className:"h-5 w-5 text-emerald-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-foreground",children:"Completed"}),e.jsx("p",{className:"text-2xl font-bold ",children:E})]})]})})}),e.jsx(C,{className:"border",children:e.jsx(_,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2  rounded-lg bg-purple-50 border border-purple-300 dark:bg-purple-900/20 dark:border-purple-700/80",children:e.jsx(P,{className:"h-5 w-5 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-foreground",children:"Questions"}),e.jsx("p",{className:"text-2xl font-bold ",children:o.total_items})]})]})})}),e.jsx(C,{className:"border",children:e.jsx(_,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-amber-50 border border-amber-300 dark:bg-amber-900/20 dark:border-amber-700/80",children:e.jsx(is,{className:"h-5 w-5 text-amber-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-foreground",children:"Average Score"}),e.jsxs("p",{className:"text-2xl font-bold ",children:[a,"%"]})]})]})})})]}),e.jsxs("div",{className:"flex-1 overflow-hidden",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Student Performance"}),e.jsx("p",{className:"text-sm text-slate-600",children:"Individual results and completion status"})]}),e.jsx("div",{className:"overflow-y-auto max-h-96 space-y-3 pr-2",children:o.students.map(n=>{const g=x(n.status),y=T(n.total_points),b=g.icon;return e.jsx(C,{className:"border hover:shadow-md transition-shadow",children:e.jsx(_,{className:"p-5",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4 flex-1",children:[e.jsxs(oe,{className:"h-12 w-12 border",children:[e.jsx(es,{src:"/placeholder.svg?height=48&width=48"}),e.jsx(xe,{className:"text-sm font-semibold ",children:f(n.name)})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx("h4",{className:"text-base font-semibold  truncate",children:n.name}),e.jsxs(L,{variant:"outline",className:`${g.color} text-xs font-medium`,children:[e.jsx(b,{className:`w-3 h-3 mr-1 ${g.iconColor}`}),n.status]})]}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-accent-foreground",children:[e.jsx("span",{className:"truncate",children:n.email}),e.jsxs("span",{className:"whitespace-nowrap",children:[n.course_code,"-",n.section]}),e.jsxs("span",{className:"whitespace-nowrap",children:["Year ",n.year_level]})]})]})]}),e.jsxs("div",{className:"text-right ml-4",children:[e.jsxs("div",{className:"flex items-baseline space-x-1 mb-1",children:[e.jsx("span",{className:"text-xl font-bold ",children:n.total_points}),e.jsxs("span",{className:"text-sm text-slate-500",children:["/ ",o.total_points]})]}),e.jsxs("div",{className:`text-sm font-semibold ${N(y)}`,children:[y,"%"]})]})]})})},n.student_id)})})]})]})]})})}function Xs({classInstructor:t,assessments:D,assignments:o}){const[x,f]=u.useState("section-assessments"),[T,N]=u.useState(!1),[E,a]=u.useState(!1),[n,g]=u.useState(null),[y,b]=u.useState(""),[v,$]=u.useState(`${t.course.code}-${t.year_level}-${t.section}`),[h,Q]=u.useState(o||[]),[X,R]=u.useState([]),[V,G]=u.useState(!0),[r,c]=u.useState(!1),i=o.filter(s=>s.is_available).length,A=o.length,m={current:i,total:A,label:"Assessment Progress",description:"assessments available"},q=h.filter(s=>{var B,U,Te;const d=D.find(Xe=>Xe.id===s.assessment_id);if(!d)return!1;const p=((U=(B=s.course)==null?void 0:B.name)==null?void 0:U.toLowerCase().includes(y.toLowerCase()))||s.section.toLowerCase().includes(y.toLowerCase())||d.title.toLowerCase().includes(y.toLowerCase())||d.subject.code.toLowerCase().includes(y.toLowerCase()),k=`${((Te=s.course)==null?void 0:Te.code)||"Unknown"}-${s.year_level}-${s.section}`;return p&&(v==="all"||k===v)}),Z=(s,d)=>{const p=!d;se.post(route("instructor.assessmentAvailability",s),{},{onSuccess:()=>console.log(`Toggled assignment ${s}. New status: ${p}`),onError:k=>console.error("Error occurred",k)}),Q(k=>k.map(M=>M.id===s?{...M,is_available:p}:M))},[he,l]=u.useState(!1),[w,I]=u.useState({students:[],total_items:0,total_points:"0"}),_e=async s=>{try{const d=await Ve.get("/instructor/assessments/respondents",{params:{assessment_id:s.assessment.id,course_id:s.course_id,year_level:s.year_level,section:s.section}});return l(!0),I(d.data),console.log(d.data),d.data}catch(d){console.error("Error fetching respondents:",d)}},[Ke,We]=u.useState(0),De=s=>{We(s.id),Q(o),N(!0)};return e.jsxs(as,{children:[e.jsx(Ie,{title:"Assessments"}),e.jsxs("div",{className:"min-h-[calc(100vh-4rem)] mt-16",children:[e.jsx("div",{className:"lg:hidden bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 shadow-sm",children:e.jsxs("div",{className:"px-4 sm:px-6",children:[e.jsxs("div",{className:"flex items-center justify-between py-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(oe,{className:"h-10 w-10 border-2 border-slate-200 dark:border-slate-600",children:e.jsx(xe,{className:"bg-gradient-to-br from-slate-600 to-slate-800 dark:from-slate-300 dark:to-slate-100 text-white dark:text-slate-900 font-bold text-sm",children:t.subject.code.substring(0,2)})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-bold text-slate-900 dark:text-slate-100",children:t.subject.code}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Assessments"})]})]}),e.jsx(j,{variant:"ghost",size:"sm",onClick:()=>c(!r),className:"h-10 w-10 p-0",children:r?e.jsx(He,{className:"h-5 w-5"}):e.jsx(Qe,{className:"h-5 w-5"})})]}),r&&e.jsx("div",{className:"pb-4 border-t border-slate-200 dark:border-slate-700 pt-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Course Info"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-3 py-2 rounded-lg text-center",children:[e.jsx("div",{className:"text-slate-500 dark:text-slate-400 text-xs",children:"Year"}),e.jsx("div",{className:"font-semibold text-slate-900 dark:text-slate-100 text-sm",children:t.year_level})]}),e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-3 py-2 rounded-lg text-center",children:[e.jsx("div",{className:"text-slate-500 dark:text-slate-400 text-xs",children:"Section"}),e.jsx("div",{className:"font-semibold text-slate-900 dark:text-slate-100 text-sm",children:t.section})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Progress"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Assessments"}),e.jsxs("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:[m.current,"/",m.total]})]}),e.jsx(Me,{value:m.current/m.total*100,className:"h-2"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{className:`${m.current!=0?"bg-emerald-50 dark:bg-emerald-900/20":"bg-slate-50 dark:bg-slate-700/50"} px-3 py-2 rounded-lg text-center`,children:[e.jsx("div",{className:`text-xs ${m.current!=0?"text-emerald-600 dark:text-emerald-400":"text-slate-600 dark:text-slate-400"}`,children:"Active"}),e.jsx("div",{className:`font-bold text-sm ${m.current!=0?"text-emerald-600 dark:text-emerald-400":"text-slate-600 dark:text-slate-400"}`,children:m.current})]}),e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-3 py-2 rounded-lg text-center",children:[e.jsx("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:"Total"}),e.jsx("div",{className:"font-bold text-slate-700 dark:text-slate-300 text-sm",children:m.total})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Navigation"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(j,{variant:"ghost",size:"sm",className:"w-full justify-start",onClick:()=>{c(!1),se.visit(route("instructor.modules",{course_id:t.course.id,year_level:t.year_level,section:t.section,subject_id:t.subject.id}))},children:[e.jsx(Fe,{className:"h-4 w-4 mr-2"}),"Modules"]}),e.jsxs(j,{variant:"default",size:"sm",className:"w-full justify-start",children:[e.jsx(P,{className:"h-4 w-4 mr-2"}),"Assessments"]})]})]}),e.jsx("div",{className:"pt-2 border-t border-slate-200 dark:border-slate-700",children:e.jsxs(L,{variant:"outline",className:"text-xs border-slate-300 dark:border-slate-600",children:[e.jsx(W,{className:"h-3 w-3 mr-1"}),t.subject.semester]})})]})})]})}),e.jsxs("div",{className:"hidden lg:flex bg-slate-50 dark:bg-slate-900 h-screen",children:[e.jsxs("div",{className:`${V?"w-80":"w-16"} transition-all duration-300 bg-white dark:bg-slate-800 border-r border-slate-200 dark:border-slate-700 flex flex-col shadow-sm`,children:[e.jsx("div",{className:"p-4 border-b border-slate-200 dark:border-slate-700",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsx(j,{variant:"ghost",size:"sm",onClick:()=>G(!V),className:"h-8 w-8 p-0 hover:bg-slate-100 dark:hover:bg-slate-700",children:e.jsx(Qe,{className:"h-4 w-4"})})})}),V&&e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(oe,{className:"h-12 w-12 border-2 border-slate-200 dark:border-slate-600",children:e.jsx(xe,{className:"bg-gradient-to-br from-slate-600 to-slate-800 dark:from-slate-300 dark:to-slate-100 text-white dark:text-slate-900 font-bold",children:t.subject.code.substring(0,2)})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h2",{className:"font-semibold text-slate-900 dark:text-slate-100 truncate",children:t.subject.code}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 truncate",children:t.subject.title})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-3 rounded-lg",children:[e.jsx("div",{className:"text-slate-500 dark:text-slate-400 text-xs",children:"Year Level"}),e.jsx("div",{className:"font-semibold text-slate-900 dark:text-slate-100",children:t.year_level})]}),e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-3 rounded-lg",children:[e.jsx("div",{className:"text-slate-500 dark:text-slate-400 text-xs",children:"Section"}),e.jsx("div",{className:"font-semibold text-slate-900 dark:text-slate-100",children:t.section})]})]}),e.jsx(ce,{className:"bg-slate-200 dark:bg-slate-700"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:m.label}),e.jsxs("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:[m.current,"/",m.total]})]}),e.jsx(Me,{value:m.current/m.total*100,className:"h-2"}),e.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:[Math.round(m.current/m.total*100),"% ",m.description]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("div",{className:`${m.current!=0?"bg-emerald-50 dark:bg-emerald-900/20":"bg-slate-50 dark:bg-slate-700/50"} p-3 rounded-lg`,children:e.jsxs("div",{className:`flex items-center gap-2 ${m.current!=0?"text-emerald-600 dark:text-emerald-400":"text-slate-600 dark:text-slate-400"}`,children:[e.jsx(fe,{className:"h-4 w-4"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs",children:"Active"}),e.jsx("div",{className:"font-bold",children:m.current})]})]})}),e.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-3 rounded-lg",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(P,{className:"h-4 w-4 text-slate-600 dark:text-slate-400"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:"Total"}),e.jsx("div",{className:"font-bold text-slate-700 dark:text-slate-300",children:m.total})]})]})})]}),e.jsx(ce,{className:"bg-slate-200 dark:bg-slate-700"}),e.jsxs("nav",{className:"space-y-1",children:[e.jsxs(j,{variant:"ghost",className:"w-full justify-start",size:"sm",onClick:()=>se.visit(route("instructor.modules",{course_id:t.course.id,year_level:t.year_level,section:t.section,subject_id:t.subject.id})),children:[e.jsx(Fe,{className:"h-4 w-4 mr-2"}),"Modules"]}),e.jsxs(j,{variant:"default",className:"w-full justify-start",size:"sm",children:[e.jsx(P,{className:"h-4 w-4 mr-2"}),"Assessments"]})]})]})]}),e.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[e.jsx("div",{className:"bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 p-6 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-slate-100",children:"Assessments"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-1",children:"Create and manage assessments for your course"})]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs(L,{variant:"outline",className:"text-xs border-slate-300 dark:border-slate-600",children:[e.jsx(W,{className:"h-3 w-3 mr-1"}),t.subject.semester]})})]})}),e.jsx("div",{className:"flex-1 overflow-hidden",children:e.jsx("div",{className:"mx-auto px-4 py-4 max-w-7xl",children:e.jsx(C,{className:"shadow-lg",children:e.jsx(_,{className:"p-6",children:e.jsxs($e,{value:x,onValueChange:f,className:"w-full",children:[e.jsxs(ss,{className:"grid w-full grid-cols-3 mb-6",children:[e.jsx(ue,{value:"section-assessments",children:"Sections Assessments"}),e.jsx(ue,{value:"create-assessment",children:"Create Assessment"}),e.jsx(ue,{value:"assessment-management",children:"Assessment Management"})]}),e.jsxs("div",{children:[e.jsx(K,{value:"section-assessments",className:"space-y-6",children:e.jsxs(C,{className:"shadow-sm",children:[e.jsxs(ne,{children:[e.jsx(ie,{children:"Manage Section Assessments"}),e.jsx(de,{children:"Manage assessments assigned to different sections and control their availability"})]}),e.jsxs(_,{className:"pt-0 space-y-3 overflow-auto max-h-[28rem]",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-4 mb-6 bg-slate-50 dark:bg-slate-800 rounded-lg p-4",children:[e.jsxs("div",{className:"relative flex-1 min-w-0",children:[e.jsx(ee,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 h-4 w-4"}),e.jsx(Y,{placeholder:"Search assignments by course, section, or assessment...",value:y,onChange:s=>b(s.target.value),className:"pl-10"})]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs(ae,{value:v,onValueChange:$,children:[e.jsx(te,{className:"w-[200px]",children:e.jsx(le,{placeholder:"Class Section"})}),e.jsxs(re,{children:[e.jsx(O,{value:"all",children:"All Sections"}),Array.from(new Map(h.map(s=>{var d,p,k,M,B,U;return[`${((d=s.course)==null?void 0:d.code)||((p=s.course)==null?void 0:p.name)}-${s.year_level}-${s.section}`,{key:`${((k=s.course)==null?void 0:k.code)||((M=s.course)==null?void 0:M.name)}-${s.year_level}-${s.section}`,label:`${((B=s.course)==null?void 0:B.code)||((U=s.course)==null?void 0:U.name)} ${s.year_level} - ${s.section}`}]})).values()).map(s=>e.jsx(O,{value:s.key,children:s.label},s.key))]})]})})]}),e.jsxs("div",{className:"space-y-4",children:[q.filter(s=>{var d,p;return v==="all"||`${((d=s.course)==null?void 0:d.code)||((p=s.course)==null?void 0:p.name)}-${s.year_level}-${s.section}`===v}).map(s=>{var p,k;const d=D.find(M=>M.id===s.assessment_id);return d?e.jsx(C,{className:"group hover:shadow-md transition-all duration-200 border border-slate-200 dark:border-slate-700",children:e.jsx(_,{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex items-start gap-4 flex-1",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/50 dark:to-blue-800/50 rounded-xl flex items-center justify-center border border-blue-200 dark:border-blue-700",children:e.jsx(P,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h3",{className:"font-semibold text-sm text-slate-900 dark:text-slate-100 truncate",children:d.title}),e.jsx(L,{variant:"secondary",className:"shrink-0 text-xs",children:d.subject.code})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("span",{className:"text-xs text-slate-600 dark:text-slate-400",children:"Class:"}),e.jsxs(L,{variant:"outline",className:"text-xs font-medium",children:[((p=s.course)==null?void 0:p.code)||((k=s.course)==null?void 0:k.name)," ",s.year_level," - ",s.section]})]}),e.jsxs("div",{className:"flex items-center gap-6 text-xs text-slate-600 dark:text-slate-400",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(W,{className:"h-3.5 w-3.5"}),e.jsxs("span",{children:["Opens:"," ",s.opened_at?new Date(s.opened_at).toLocaleDateString():"Not assigned"]})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(we,{className:"h-3.5 w-3.5"}),e.jsxs("span",{children:["Closes:"," ",s.closed_at?new Date(s.closed_at).toLocaleDateString():"Not assigned"]})]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-4 shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:s.is_available?"Active":"Inactive"}),e.jsx("div",{className:"text-xs text-slate-500",children:s.is_available?"Students can access":"Hidden from students"})]}),e.jsx(pe,{checked:s.is_available,onCheckedChange:()=>{Z(s.id,s.is_available)},className:"data-[state=checked]:bg-emerald-600 dark:data-[state=checked]:bg-emerald-500"})]}),e.jsxs(ve,{children:[e.jsx(ge,{asChild:!0,children:e.jsx(j,{variant:"ghost",size:"sm",className:"h-9 w-9 p-0",children:e.jsx(be,{className:"h-4 w-4"})})}),e.jsxs(Ne,{align:"end",className:"w-48",children:[e.jsxs(H,{onClick:()=>_e(s),children:[e.jsx(z,{className:"h-4 w-4 mr-2"})," View Respondents"]}),e.jsx(ce,{}),e.jsxs(H,{className:"text-amber-600 focus:text-amber-600",onClick:()=>De(s),children:[e.jsx(me,{className:"h-4 w-4 mr-2 text-amber-600"}),"Remove Assignment"]})]})]})]})]})})},s.id):null}),q.length===0&&h.length>0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"mx-auto w-16 h-16 bg-slate-100 dark:bg-slate-700 rounded-full flex items-center justify-center mb-4",children:e.jsx(ee,{className:"w-8 h-8 text-slate-400"})}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No assignments found"}),e.jsx("p",{className:"text-slate-500 mb-4",children:"Try adjusting your search terms or filters."}),e.jsx(j,{variant:"outline",onClick:()=>{b(""),$("all")},children:"Clear Filters"})]}),h.length===0&&e.jsxs("div",{className:"text-center py-16",children:[e.jsx("div",{className:"mx-auto w-20 h-20 bg-gradient-to-br from-slate-50 to-slate-100 dark:from-slate-800 dark:to-slate-700 rounded-2xl flex items-center justify-center mb-6 border border-slate-200 dark:border-slate-600",children:e.jsx(z,{className:"w-10 h-10 text-slate-400"})}),e.jsx("h3",{className:"text-xl font-semibold mb-3 text-slate-900 dark:text-slate-100",children:"No assignments yet"}),e.jsx("p",{className:"text-slate-500 mb-6 max-w-md mx-auto leading-relaxed",children:"Start by assigning assessments to sections from the Assessment List. You can control when students can access each assignment."}),e.jsxs(j,{onClick:()=>f("assessment-management"),className:"gap-2",children:[e.jsx(Le,{className:"w-4 h-4"}),"Go to Assessment List"]})]})]})]})]})}),e.jsx(K,{value:"create-assessment",className:"space-y-6",children:e.jsx(Re,{classInstructor:t,setActiveTab:f,setQuestionBuilderOpen:a,setSelectedAssessment:g,setQuestions:R})}),e.jsx(K,{value:"assessment-management",children:e.jsx(Pe,{classInstructor:t,assessments:D,assignments:o,assessmentAssignments:h,setAssessmentAssignments:Q})})]})]})})})})})]})]}),e.jsx("div",{className:"lg:hidden bg-slate-50 dark:bg-slate-900 min-h-[calc(100vh-12rem)]",children:e.jsx("div",{className:"mx-auto px-4 py-4 max-w-7xl",children:e.jsx(C,{className:"shadow-lg",children:e.jsx(_,{className:"p-4",children:e.jsxs($e,{value:x,onValueChange:f,className:"w-full",children:[e.jsx("div",{className:"mb-6",children:e.jsxs(ae,{value:x,onValueChange:f,children:[e.jsx(te,{className:"w-full",children:e.jsxs(le,{children:[x==="section-assessments"&&"Sections Assessments",x==="create-assessment"&&"Create Assessment",x==="assessment-management"&&"Assessment Management"]})}),e.jsxs(re,{children:[e.jsx(O,{value:"section-assessments",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(z,{className:"h-4 w-4"}),"Sections Assessments"]})}),e.jsx(O,{value:"create-assessment",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(P,{className:"h-4 w-4"}),"Create Assessment"]})}),e.jsx(O,{value:"assessment-management",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Be,{className:"h-4 w-4"}),"Assessment Management"]})})]})]})}),e.jsxs("div",{className:"mt-4",children:[e.jsx(K,{value:"section-assessments",className:"space-y-4 mt-0",children:e.jsxs(C,{className:"shadow-sm",children:[e.jsxs(ne,{className:"pb-4",children:[e.jsx(ie,{className:"text-lg",children:"Manage Section Assessments"}),e.jsx(de,{className:"text-sm",children:"Manage assessments assigned to different sections and control their availability"})]}),e.jsxs(_,{className:"pt-0 space-y-4",children:[e.jsxs("div",{className:"space-y-3 bg-slate-50 dark:bg-slate-800 rounded-lg p-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(ee,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 h-4 w-4"}),e.jsx(Y,{placeholder:"Search assignments...",value:y,onChange:s=>b(s.target.value),className:"pl-10"})]}),e.jsxs(ae,{value:v,onValueChange:$,children:[e.jsx(te,{className:"w-full",children:e.jsx(le,{placeholder:"Class Section"})}),e.jsxs(re,{children:[e.jsx(O,{value:"all",children:"All Sections"}),Array.from(new Map(h.map(s=>{var d,p,k,M,B,U;return[`${((d=s.course)==null?void 0:d.code)||((p=s.course)==null?void 0:p.name)}-${s.year_level}-${s.section}`,{key:`${((k=s.course)==null?void 0:k.code)||((M=s.course)==null?void 0:M.name)}-${s.year_level}-${s.section}`,label:`${((B=s.course)==null?void 0:B.code)||((U=s.course)==null?void 0:U.name)} ${s.year_level} - ${s.section}`}]})).values()).map(s=>e.jsx(O,{value:s.key,children:s.label},s.key))]})]})]}),e.jsxs("div",{className:"space-y-3 max-h-[60vh] overflow-auto",children:[q.filter(s=>{var d,p;return v==="all"||`${((d=s.course)==null?void 0:d.code)||((p=s.course)==null?void 0:p.name)}-${s.year_level}-${s.section}`===v}).map(s=>{var p,k;const d=D.find(M=>M.id===s.assessment_id);return d?e.jsx(C,{className:"border border-slate-200 dark:border-slate-700",children:e.jsx(_,{className:"p-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/50 dark:to-blue-800/50 rounded-xl flex items-center justify-center border border-blue-200 dark:border-blue-700 shrink-0",children:e.jsx(P,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex flex-col gap-2 mb-2",children:[e.jsx("h3",{className:"font-semibold text-sm text-slate-900 dark:text-slate-100",children:d.title}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(L,{variant:"secondary",className:"text-xs",children:d.subject.code}),e.jsxs(L,{variant:"outline",className:"text-xs",children:[((p=s.course)==null?void 0:p.code)||((k=s.course)==null?void 0:k.name)," ",s.year_level," - ",s.section]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-1 text-xs text-slate-600 dark:text-slate-400",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(W,{className:"h-3.5 w-3.5 shrink-0"}),e.jsxs("span",{children:["Opens:"," ",s.opened_at?new Date(s.opened_at).toLocaleDateString():"Not assigned"]})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(we,{className:"h-3.5 w-3.5 shrink-0"}),e.jsxs("span",{children:["Closes:"," ",s.closed_at?new Date(s.closed_at).toLocaleDateString():"Not assigned"]})]})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-slate-200 dark:border-slate-700",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(pe,{checked:s.is_available,onCheckedChange:()=>{Z(s.id,s.is_available)},className:"data-[state=checked]:bg-emerald-600 dark:data-[state=checked]:bg-emerald-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:s.is_available?"Active":"Inactive"}),e.jsx("div",{className:"text-xs text-slate-500",children:s.is_available?"Students can access":"Hidden from students"})]})]}),e.jsxs(ve,{children:[e.jsx(ge,{asChild:!0,children:e.jsx(j,{variant:"ghost",size:"sm",className:"h-9 w-9 p-0",children:e.jsx(be,{className:"h-4 w-4"})})}),e.jsxs(Ne,{align:"end",className:"w-48",children:[e.jsxs(H,{onClick:()=>_e(s),children:[e.jsx(z,{className:"h-4 w-4 mr-2"})," View Respondents"]}),e.jsxs(H,{className:"text-amber-600 focus:text-amber-600",onClick:()=>De(s),children:[e.jsx(me,{className:"h-4 w-4 mr-2"}),"Remove Assignment"]})]})]})]})]})})},s.id):null}),q.length===0&&h.length>0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"mx-auto w-12 h-12 bg-slate-100 dark:bg-slate-700 rounded-full flex items-center justify-center mb-4",children:e.jsx(ee,{className:"w-6 h-6 text-slate-400"})}),e.jsx("h3",{className:"text-base font-medium mb-2",children:"No assignments found"}),e.jsx("p",{className:"text-sm text-slate-500 mb-4 px-4",children:"Try adjusting your search terms or filters."}),e.jsx(j,{variant:"outline",size:"sm",onClick:()=>{b(""),$("all")},children:"Clear Filters"})]}),h.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"mx-auto w-16 h-16 bg-gradient-to-br from-slate-50 to-slate-100 dark:from-slate-800 dark:to-slate-700 rounded-2xl flex items-center justify-center mb-4 border border-slate-200 dark:border-slate-600",children:e.jsx(z,{className:"w-8 h-8 text-slate-400"})}),e.jsx("h3",{className:"text-lg font-semibold mb-3 text-slate-900 dark:text-slate-100",children:"No assignments yet"}),e.jsx("p",{className:"text-sm text-slate-500 mb-6 max-w-md mx-auto leading-relaxed px-4",children:"Start by assigning assessments to sections from the Assessment List."}),e.jsxs(j,{onClick:()=>f("assessment-management"),className:"gap-2",size:"sm",children:[e.jsx(Le,{className:"w-4 h-4"}),"Go to Assessment List"]})]})]})]})]})}),e.jsx(K,{value:"create-assessment",className:"space-y-6 mt-0",children:e.jsx(Re,{classInstructor:t,setActiveTab:f,setQuestionBuilderOpen:a,setSelectedAssessment:g,setQuestions:R})}),e.jsx(K,{value:"assessment-management",className:"mt-0",children:e.jsx(Pe,{classInstructor:t,assessments:D,assignments:o,assessmentAssignments:h,setAssessmentAssignments:Q})})]})]})})})})})]}),e.jsx(ds,{open:he,onOpenChange:l,quizData:w}),e.jsx(qe,{open:E,onOpenChange:a,selectedAssessment:n,questions:X,setQuestions:R,onComplete:()=>{a(!1),R([]),f("assessment-management")}}),e.jsx(Ge,{open:T,onOpenChange:N,id:Ke,title:"Remove assessment",routeLink:"instructor.removeAssignedAssessment",description:"This will permanently remove the assessment assigned to the section",toastMessage:"Remove successfully",buttonTitle:"Remove Assessment",type:"remove",additionalInfo:["Assessment will get unassigned to the section","You can re-assign the assessment to this section later if needed"]})]})}export{Xs as default};
