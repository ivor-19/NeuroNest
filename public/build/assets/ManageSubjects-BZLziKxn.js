import{K as Ns,r as i,m as Ce,j as e,L as bs,S as p,t as S}from"./app-BL0KWvuE.js";import{C as M,c as D,a as ke,b as Fe,B as L}from"./badge-DX-hSzwJ.js";import{B as n}from"./button-CjHP5RnJ.js";import{I as g}from"./input-DaAHyLeW.js";import{L as c}from"./label-Dr1cfO0H.js";import{T as Q}from"./textarea-BWnTbQcQ.js";import{S as o,a as m,b as x,c as h,d as r}from"./select-Y-lX9e8p.js";import{T as ys,a as Ss,b as Ae,c as Me}from"./tabs-DSVoaUKn.js";import{S as De}from"./separator-C9lVXzDR.js";import{A as K,a as X,b as J,c as W,d as Ee,e as _e,f as Le,g as Pe}from"./alert-dialog-ohILZYad.js";import{A as ws,L as Z}from"./app-layout-C9W-Z8tt.js";import{P as Cs}from"./placeholder-pattern-DDg-imHs.js";import{S as ks}from"./switch-BJyMs4Fx.js";import{B as P}from"./book-open-DgnQBgSR.js";import{F as Fs}from"./file-text-CKEREnia.js";import{S as As}from"./search-BVSg3_k5.js";import{F as Ms}from"./filter-Ckhz16-l.js";import{P as I}from"./plus-CigWFzLG.js";import{c as Be,G as Ds}from"./graduation-cap-D_NDlXqB.js";import{C as Es}from"./user-menu-content-mFISpfd6.js";import{S as Ie}from"./square-pen-CwhG7wQ1.js";import{T as ne}from"./trash-2-D2gvyVBC.js";import{X as Ve}from"./x-J_75UvRD.js";import{B as Oe}from"./book-CIUT5YPZ.js";import{T as _s}from"./triangle-alert-BWkoumGQ.js";import{U as Re}from"./unlink-jbbLCgI1.js";import"./index-hOn5HVUv.js";import"./index-CJPvCRj7.js";import"./index-G8YvO4IO.js";import"./check-D8S4E2On.js";import"./users-DlRXdw9-.js";import"./mail-C4_eHR4b.js";import"./app-logo-icon-erXsJOKm.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ls=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],$e=Be("Loader",Ls);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ps=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],Ye=Be("Upload",Ps),Is=[{title:"Manage Students",href:"admin/manage-subjects"}];function ja({subjects:N}){const{auth:A}=Ns().props,[Ue,oe]=i.useState("subjects"),[me,xe]=i.useState("all"),[w,he]=i.useState(""),[Y,v]=i.useState(!1),ue=i.useRef(null),je=i.useRef(null),{data:C,setData:k,post:ze,processing:pe,errors:b,reset:Te}=Ce({code:"",title:"",description:"",year_level:"",semester:"",isActive:"1",image:null}),{data:j,setData:V,processing:ge,errors:O,reset:He}=Ce({title:"",subject_id:"",creator_id:A.user.id,status:"published",description:"",order:"",pdf:""}),ee=N.flatMap(s=>s.modules||[]),[ve,se]=i.useState(null),[ae,B]=i.useState(null),[fe,le]=i.useState(null),qe=s=>{var d;const a=(d=s.target.files)==null?void 0:d[0];if(a){k("image",a);const f=new FileReader;f.onload=$=>se($.target.result),f.readAsDataURL(a)}},Ge=s=>{var d;const a=(d=s.target.files)==null?void 0:d[0];if(a){le(a);const f=new FileReader;f.onload=$=>{var G;return B((G=$.target)==null?void 0:G.result)},f.readAsDataURL(a)}},Qe=()=>{le(null),B(null),F({...l,image:""})},Ke=()=>{k("image",null),se(null)},Xe=async s=>{s.preventDefault(),ze(route("admin.addSubject"),{forceFormData:!0,onSuccess:()=>{S.success(`Subject added: ${C.code}`),Te(),v(!1),se(null),console.log("Success: ",C)},onError:a=>{console.error("Error occurred",a)}})},[te,Ne]=i.useState(null),[Je,be]=i.useState(!1),We=async s=>{s.preventDefault();const a=new FormData;a.append("subject_id",j.subject_id),a.append("creator_id",A.user.id.toString()),a.append("title",j.title),a.append("description",j.description),a.append("status",j.status),a.append("order",j.order),te&&a.append("pdf",te),p.post(route("admin.addModule"),a,{onSuccess:()=>{He(),v(!1),Ne(null),be(!1),S.success("Module added successfully"),console.log("Module added successfully!"),p.post(route("admin.addActivity"),{type:"create",user:A.user.name,action:"Created a new module",details:`${j.title}`},{})},onError:d=>{console.error("Error occurred:",d),be(!0)}})},Ze=s=>{if(s==="all")return ee;const a=N.find(d=>d.code===s);return a?a.modules||[]:[]},[re,es]=i.useState("all"),[ce,ss]=i.useState("all"),ye=Ze(me).filter(s=>{const a=s.title.toLowerCase().includes(w.toLowerCase()),d=re==="all"||s.status===re,f=N.find(G=>G.id===s.subject_id),$=ce==="all"||f&&f.semester===ce;return a&&d&&$}),[U,as]=i.useState("all"),[ie,ls]=i.useState("all"),Se=N.filter(s=>(s.title.toLowerCase().includes(w.toLowerCase())||s.code.toLowerCase().includes(w.toLowerCase()))&&(U==="all"||U==="active"&&s.isActive||U==="inactive"&&!s.isActive)&&(ie==="all"||s.semester===ie)),ts=ee.length,rs=ee.filter(s=>s.status==="published").length,cs=N.filter(s=>s.isActive).length,[is,z]=i.useState(!1),[ds,T]=i.useState(!1),[y,ns]=i.useState(null),os=async()=>{p.delete(route("admin.deleteSubject",y==null?void 0:y.id),{onSuccess:()=>{T(!1),S.info(`Subject: ${y==null?void 0:y.code} is deleted.`),p.post(route("admin.addActivity"),{type:"delete",user:A.user.name,action:"Delete a subject",details:`${y==null?void 0:y.title}`},{})},onError:s=>{console.error("Error occured",s),T(!1)}})},[u,ms]=i.useState(null),xs=async()=>{p.delete(route("admin.deleteModule",u==null?void 0:u.id),{onSuccess:()=>{z(!1),S.info(`Removed ${u==null?void 0:u.title}`),p.post(route("admin.addActivity"),{type:"delete",user:A.user.name,action:"Delete a module",details:`${u==null?void 0:u.title}`},{})},onError:s=>{console.error("Error occured",s),z(!1)}})},[hs,R]=i.useState(!1),[l,F]=i.useState(null),[H,E]=i.useState(!1),us=async s=>{R(!0),F(s),B(s.image?`/storage/${s.image}`:null)},js=async s=>{var d;E(!0);const a=new FormData;a.append("code",(l==null?void 0:l.code)||""),a.append("title",(l==null?void 0:l.title)||""),a.append("description",(l==null?void 0:l.description)||""),a.append("year_level",((d=l==null?void 0:l.year_level)==null?void 0:d.toString())||""),a.append("semester",(l==null?void 0:l.semester)||""),fe?a.append("image",fe):(l==null?void 0:l.image)===""&&a.append("image",""),p.post(route("admin.updateSubject",s),a,{headers:{"Content-Type":"multipart/form-data"},onSuccess:()=>{S.success("Subject updated successfully"),F(null),R(!1),E(!1),B(null),le(null),p.post(route("admin.addActivity"),{type:"edit",user:A.user.name,action:"Updated subject",details:`${l==null?void 0:l.title} modified`},{})},onError:f=>{console.error(f),E(!1),S.success("There is a problem updating the subject. Try again."),R(!1)}})},ps=s=>{oe("modules"),xe(s),he("")},[gs,q]=i.useState(!1),[t,_]=i.useState(),[de,we]=i.useState(null),vs=s=>{q(!0),_(s)},fs=async s=>{E(!0);const a=new FormData;a.append("title",(t==null?void 0:t.title)||""),a.append("subject_id",(t==null?void 0:t.subject_id.toString())||""),a.append("description",(t==null?void 0:t.description)||""),a.append("status",(t==null?void 0:t.status)||""),a.append("order",(t==null?void 0:t.order.toString())||""),de&&a.append("pdf",de),console.log(t),p.post(route("admin.updateModule",s),a,{onSuccess:()=>{S.success("Module updated successfully"),q(!1),E(!1),we(null),p.post(route("admin.addActivity"),{type:"edit",user:A.user.name,action:"Updated module",details:`${t==null?void 0:t.title}`},{})},onError:d=>{console.error(d),E(!1),S.error("There was a problem updating the module")}})};return e.jsxs(ws,{breadcrumbs:Is,children:[e.jsx(bs,{title:"Subject Management"}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-6 rounded-xl overflow-x-auto p-8 bg-[var(--bg-main)]",children:[e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Subject Management"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your academic subjects and learning modules efficiently."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(M,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(P,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium leading-none",children:"Active Subjects"}),e.jsx("p",{className:"text-2xl font-bold",children:cs})]})]})})}),e.jsx(M,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium leading-none",children:"Total Modules"}),e.jsx("p",{className:"text-2xl font-bold",children:ts})]})]})})}),e.jsx(M,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fs,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium leading-none",children:"Published"}),e.jsx("p",{className:"text-2xl font-bold",children:rs})]})]})})})]}),e.jsx(M,{children:e.jsxs(D,{className:"space-y-2",children:[e.jsxs("div",{className:"relative",children:[e.jsx(As,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(g,{placeholder:"Search subjects...",className:"pl-10",value:w,onChange:s=>he(s.target.value)})]}),e.jsxs(ys,{value:Ue,onValueChange:oe,className:"space-y-2",children:[e.jsxs(Ss,{className:"grid w-full grid-cols-2 ",children:[e.jsxs(Ae,{value:"subjects",className:"flex items-center gap-2 cursor-pointer",onClick:()=>v(!1),children:[e.jsx(P,{className:"h-4 w-4"})," Subjects"]}),e.jsxs(Ae,{value:"modules",className:"flex items-center gap-2 cursor-pointer",onClick:()=>v(!1),children:[e.jsx(Z,{className:"h-4 w-4"}),"Modules"]})]}),e.jsx(Me,{value:"modules",className:"space-y-6",children:e.jsxs(M,{children:[e.jsx(ke,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(Fe,{className:"flex items-center gap-2",children:[e.jsx(Z,{className:"h-5 w-5"})," Learning Modules"]}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Manage and organize your course modules"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(c,{htmlFor:"module-status-filter",className:"whitespace-nowrap",children:"Status:"}),e.jsxs(o,{value:re,onValueChange:s=>es(s),children:[e.jsx(m,{className:"w-[120px]",children:e.jsx(x,{placeholder:"Filter by status"})}),e.jsxs(h,{children:[e.jsx(r,{value:"all",children:"All"}),e.jsx(r,{value:"published",children:"Published"}),e.jsx(r,{value:"draft",children:"Draft"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(c,{htmlFor:"module-semester-filter",className:"whitespace-nowrap",children:"Semester:"}),e.jsxs(o,{value:ce,onValueChange:s=>ss(s),children:[e.jsx(m,{className:"w-[140px]",children:e.jsx(x,{placeholder:"Filter by semester"})}),e.jsxs(h,{children:[e.jsx(r,{value:"all",children:"All"}),e.jsx(r,{value:"1st",children:"1st Semester"}),e.jsx(r,{value:"2nd",children:"2nd Semester"}),e.jsx(r,{value:"Summer",children:"Summer"})]})]})]}),e.jsx(c,{htmlFor:"subject",className:"whitespace-nowrap",children:"Subject:"}),e.jsxs(o,{value:me,onValueChange:xe,children:[e.jsxs(m,{className:"min-w-48 cursor-pointer",children:[e.jsx(Ms,{className:"h-4 w-4 mr-2"}),e.jsx(x,{placeholder:"Filter by subject"})]}),e.jsxs(h,{children:[e.jsx(r,{value:"all",children:"All"}),N.map(s=>e.jsxs(r,{value:s.code,children:[s.code," - ",s.title]},s.code))]})]}),e.jsxs(n,{onClick:()=>v(!Y),className:"cursor-pointer",children:[e.jsx(I,{className:"h-4 w-4 mr-2"}),"Add Module"]})]})]})}),e.jsxs(D,{className:"space-y-6",children:[Y&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-4 p-6 border rounded-lg bg-muted/50",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(I,{className:"h-4 w-4"}),e.jsx("h3",{className:"font-semibold",children:"Add New Module"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"module-title",children:"Module Title"}),e.jsx(g,{id:"module-title",value:j.title,onChange:s=>V("title",s.target.value),placeholder:"Enter module title"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"module-subject",children:"Subject"}),e.jsxs(o,{value:j.subject_id,onValueChange:s=>V("subject_id",s),children:[e.jsx(m,{children:e.jsx(x,{placeholder:"Select subject"})}),e.jsx(h,{children:N.map(s=>e.jsxs(r,{value:String(s.id),children:[s.code," - ",s.title]},s.id))})]})]}),e.jsxs("div",{className:"space-y-2 md:col-span-2",children:[e.jsx(c,{htmlFor:"module-description",children:"Description"}),e.jsx(Q,{id:"module-description",value:j.description,onChange:s=>V("description",s.target.value),placeholder:"Describe the module content and objectives",rows:3})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"module-order",children:"Module Order"}),e.jsx(g,{id:"module-order",type:"number",value:j.order,onChange:s=>V("order",s.target.value),placeholder:"1, 2, 3..."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"module-status",children:"Status"}),e.jsxs(o,{value:j.status,onValueChange:s=>V("status",s),children:[e.jsx(m,{children:e.jsx(x,{placeholder:"Select status"})}),e.jsxs(h,{children:[e.jsx(r,{value:"published",children:"Published"}),e.jsx(r,{value:"draft",children:"Draft"})]})]})]}),e.jsxs("div",{className:"space-y-2 md:col-span-2",children:[e.jsx(c,{htmlFor:"module-file",children:"PDF File"}),e.jsx(g,{type:"file",accept:".pdf",onChange:s=>{var a;return Ne(((a=s.target.files)==null?void 0:a[0])||null)}})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(n,{onClick:We,disabled:ge,className:"cursor-pointer",children:ge?"Creating...":"Create Module"}),e.jsx(n,{variant:"outline",onClick:()=>v(!1),className:"cursor-pointer",children:" Cancel"}),O.title||O.subject_id||O.description||O.order||O.status||te&&e.jsx("p",{className:"text-sm font-medium text-destructive",children:"Complete all fields"}),Je&&e.jsx("p",{className:"text-sm font-medium text-destructive",children:"Order module already exists"})]})]}),e.jsx(De,{})]}),e.jsx("div",{className:"space-y-4",children:ye.length>0?ye.map(s=>{const a=N.find(d=>d.id===s.subject_id);return e.jsx("div",{className:"border rounded-lg p-4 hover:bg-muted/50 transition-colors",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"space-y-2 flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"font-semibold",children:s.title}),a&&e.jsx(L,{variant:"outline",children:a.code}),e.jsxs(L,{variant:"secondary",children:["Module ",s.order]}),e.jsx(L,{variant:s.status==="published"?"default":"secondary",children:s.status})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.description}),a&&e.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Ds,{className:"h-3 w-3"})," Year ",a.year_level]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Es,{className:"h-3 w-3"})," Semester ",a.semester]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(P,{className:"h-3 w-3"})," ",a.title]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(n,{variant:"ghost",size:"sm",className:"cursor-pointer",onClick:()=>vs(s),children:e.jsx(Ie,{className:"h-4 w-4"})}),e.jsx(n,{variant:"ghost",size:"sm",className:"cursor-pointer",onClick:()=>{z(!0),ms(s)},children:e.jsx(ne,{className:"h-4 w-4"})})]})]})},s.id)}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Z,{className:"h-12 w-12 mx-auto text-muted-foreground/50 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No modules found"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:w?"Try adjusting your search terms":"Create your first learning module to get started"}),!w&&e.jsxs(n,{onClick:()=>v(!0),className:"cursor-pointer",children:[e.jsx(I,{className:"h-4 w-4 mr-2"}),"  Add Module"]})]})})]})]})}),e.jsx(Me,{value:"subjects",className:"space-y-6",children:e.jsxs(M,{children:[e.jsx(ke,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(Fe,{className:"flex items-center gap-2",children:[e.jsx(P,{className:"h-5 w-5"})," Academic Subjects"]}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Organize your curriculum and course structure"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(c,{htmlFor:"active-filter",className:"whitespace-nowrap",children:"Status:"}),e.jsxs(o,{value:U,onValueChange:s=>as(s),children:[e.jsx(m,{className:"w-[120px]",children:e.jsx(x,{placeholder:"Filter by status"})}),e.jsxs(h,{children:[e.jsx(r,{value:"all",children:"All"}),e.jsx(r,{value:"active",children:"Active"}),e.jsx(r,{value:"inactive",children:"Inactive"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(c,{htmlFor:"semester-filter",className:"whitespace-nowrap",children:"Semester:"}),e.jsxs(o,{value:ie,onValueChange:s=>ls(s),children:[e.jsx(m,{className:"w-[140px]",children:e.jsx(x,{placeholder:"Filter by semester"})}),e.jsxs(h,{children:[e.jsx(r,{value:"all",children:"All"}),e.jsx(r,{value:"1st",children:"1st Semester"}),e.jsx(r,{value:"2nd",children:"2nd Semester"}),e.jsx(r,{value:"Summer",children:"Summer"})]})]})]}),e.jsxs(n,{onClick:()=>v(!Y),className:"cursor-pointer",children:[e.jsx(I,{className:"h-4 w-4 mr-2"})," Add Subject"]})]})]})}),e.jsxs(D,{className:"space-y-6",children:[Y&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-4 p-6 border rounded-lg bg-muted/50",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(I,{className:"h-4 w-4"}),e.jsx("h3",{className:"font-semibold",children:"Add New Subject"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"subject-code",children:"Subject Code"}),e.jsx(g,{id:"subject-code",value:C.code,onChange:s=>k("code",s.target.value),placeholder:"e.g. CS101, MATH201"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"subject-title",children:"Subject Title"}),e.jsx(g,{id:"subject-title",value:C.title,onChange:s=>k("title",s.target.value),placeholder:"Enter subject title"})]}),e.jsxs("div",{className:"space-y-2 md:col-span-2",children:[e.jsx(c,{htmlFor:"subject-description",children:"Description"}),e.jsx(Q,{id:"subject-description",value:C.description,onChange:s=>k("description",s.target.value),placeholder:"Describe the subject objectives and content",rows:3})]}),e.jsxs("div",{className:"space-y-2 md:col-span-2",children:[e.jsx(c,{htmlFor:"subject-image",children:"Subject Image"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("input",{ref:ue,type:"file",id:"subject-image",accept:"image/*",onChange:qe,className:"hidden"}),e.jsxs(n,{type:"button",variant:"outline",onClick:()=>{var s;return(s=ue.current)==null?void 0:s.click()},className:"flex items-center gap-2 cursor-pointer",children:[e.jsx(Ye,{className:"h-4 w-4"}),"Choose Image"]}),ve&&e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:ve||"/placeholder.svg",alt:"Preview",className:"h-16 w-16 object-cover rounded-md border"}),e.jsx("button",{type:"button",onClick:Ke,className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1 hover:bg-red-600",children:e.jsx(Ve,{className:"h-3 w-3"})})]})]}),b.image&&e.jsx("p",{className:"text-sm font-medium text-destructive",children:b.image})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"subject-year",children:"Year Level"}),e.jsxs(o,{value:C.year_level,onValueChange:s=>k("year_level",s),children:[e.jsx(m,{children:e.jsx(x,{placeholder:"Select year"})}),e.jsxs(h,{children:[e.jsx(r,{value:"1",children:"1st Year"}),e.jsx(r,{value:"2",children:"2nd Year"}),e.jsx(r,{value:"3",children:"3rd Year"}),e.jsx(r,{value:"4",children:"4th Year"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"subject-semester",children:"Semester"}),e.jsxs(o,{value:C.semester,onValueChange:s=>k("semester",s),children:[e.jsx(m,{children:e.jsx(x,{placeholder:"Select semester"})}),e.jsxs(h,{children:[e.jsx(r,{value:"1st",children:"1st Semester"}),e.jsx(r,{value:"2nd",children:"2nd Semester"}),e.jsx(r,{value:"Summer",children:"Summer"})]})]})]}),e.jsxs("div",{className:"space-y-2 md:col-span-2",children:[e.jsx(c,{htmlFor:"subject-status",children:"Status"}),e.jsxs(o,{value:C.isActive,onValueChange:s=>k("isActive",s),children:[e.jsx(m,{children:e.jsx(x,{placeholder:"Select status"})}),e.jsxs(h,{children:[e.jsx(r,{value:"1",children:"Active"}),e.jsx(r,{value:"0",children:"Inactive"})]})]})]})]}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx(n,{onClick:Xe,disabled:pe,className:"cursor-pointer",children:pe?"Creating...":"Create Subject"}),e.jsx(n,{variant:"outline",onClick:()=>v(!1),className:"cursor-pointer",children:"Cancel"}),b.code&&e.jsx("p",{className:"text-sm font-medium text-destructive",children:b.code}),(b.code||b.title||b.year_level||b.semester||b.isActive)&&e.jsx("p",{className:"text-sm font-medium text-destructive",children:"Complete all fields"})]})]}),e.jsx(De,{})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Se.map(s=>e.jsx(M,{className:"hover:bg-muted/50 transition-colors",children:e.jsxs(D,{className:"p-2 flex flex-col gap-4",children:[e.jsxs("div",{className:"w-full h-48 relative",children:[s.image?e.jsx("img",{src:`/public/storage/${s.image}`,alt:`${s.title} subject title`,className:"w-full h-full object-cover"}):e.jsxs("div",{className:"relative h-full rounded-xl border border-sidebar-border/70 dark:border-sidebar-border",children:[e.jsx(Cs,{className:"w-full h-full stroke-neutral-900/20 dark:stroke-neutral-100/20"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-muted-foreground",children:"No image available"})]}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/20 to-transparent"})]}),e.jsxs("div",{className:"px-2",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("h3",{className:"font-semibold",children:s.title}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.code})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ks,{checked:s.isActive,onCheckedChange:a=>{p.post(route("admin.subjectAvailability",s.id),{isActive:a},{onSuccess:()=>{S.success("Subject status updated")},onError:d=>{console.error("Error updating status",d)}})},className:"data-[state=checked]:bg-emerald-600 dark:data-[state=checked]:bg-emerald-500 cursor-pointer"}),e.jsx(n,{variant:"ghost",size:"sm",className:"cursor-pointer",onClick:()=>us(s),children:e.jsx(Ie,{className:"h-4 w-4"})}),e.jsx(n,{variant:"ghost",size:"sm",className:"cursor-pointer",onClick:()=>{T(!0),ns(s)},children:e.jsx(ne,{className:"h-4 w-4"})})]})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:s.description}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(L,{variant:"outline",children:["Year ",s.year_level]}),e.jsxs(L,{variant:"outline",children:["Sem ",s.semester]}),e.jsx(L,{variant:s.isActive?"default":"secondary",children:s.isActive?"Active":"Inactive"}),e.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[e.jsx(P,{className:"h-4 w-4"}),(s.modules||[]).length," modules"]})]}),e.jsx("div",{className:"flex items-center gap-1 text-xs text-muted-foreground cursor-pointer hover:text-primary transition-colors",onClick:()=>ps(s.code),children:"View all"})]})]})]})},s.id))}),Se.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(P,{className:"h-12 w-12 mx-auto text-muted-foreground/50 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No subjects found"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:w?"Try adjusting your search terms":"Create your first subject to start building your curriculum"}),!w&&e.jsxs(n,{onClick:()=>v(!0),className:"cursor-pointer",children:[e.jsx(I,{className:"h-4 w-4 mr-2"})," Add Subject"]})]})]})]})})]})]})}),e.jsx(K,{open:hs,onOpenChange:R,children:e.jsxs(X,{className:"sm:max-w-[500px]",children:[e.jsx(J,{children:e.jsxs(W,{className:"flex items-center gap-2",children:[e.jsx(Oe,{className:"h-5 w-5"}),"Edit Subject"]})}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"edit-code",children:"Code"}),e.jsx(g,{id:"subjectCode",value:(l==null?void 0:l.code)||"",onChange:s=>F({...l,code:s.target.value}),placeholder:"Enter course code"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"edit-name",children:"Title"}),e.jsx(g,{id:"subjectTitle",value:(l==null?void 0:l.title)||"",onChange:s=>F({...l,title:s.target.value}),placeholder:"Enter course name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"edit-description",children:"Description"}),e.jsx(Q,{id:"subjectDescription",value:(l==null?void 0:l.description)||"",onChange:s=>F({...l,description:s.target.value}),placeholder:"Enter course description"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:"Subject Image"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("input",{ref:je,type:"file",accept:"image/*",onChange:Ge,className:"hidden"}),e.jsxs(n,{type:"button",variant:"outline",onClick:()=>{var s;return(s=je.current)==null?void 0:s.click()},className:"flex items-center gap-2 cursor-pointer",children:[e.jsx(Ye,{className:"h-4 w-4"}),"Change Image"]}),ae&&e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:ae||"/placeholder.svg",alt:"Preview",className:"h-16 w-16 object-cover rounded-md border"}),e.jsx("button",{type:"button",onClick:Qe,className:"cursor-pointer absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1 hover:bg-red-600",children:e.jsx(Ve,{className:"h-3 w-3"})})]})]}),!ae&&(l==null?void 0:l.image)&&e.jsx("div",{className:"relative mt-2",children:e.jsx("img",{src:`/public/storage/${l.image}`,alt:"Current subject image",className:"h-16 w-16 object-cover rounded-md border"})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"edit-status",children:"Year Level"}),e.jsxs(o,{value:l==null?void 0:l.year_level.toString(),onValueChange:s=>{F({...l,year_level:s})},children:[e.jsx(m,{children:e.jsx(x,{placeholder:"Select Year Level"})}),e.jsxs(h,{children:[e.jsx(r,{value:"1",children:"1"}),e.jsx(r,{value:"2",children:"2"}),e.jsx(r,{value:"3",children:"3"}),e.jsx(r,{value:"4",children:"4"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"edit-status",children:"Semester"}),e.jsxs(o,{value:l==null?void 0:l.semester,onValueChange:s=>{F({...l,semester:s})},children:[e.jsx(m,{children:e.jsx(x,{placeholder:"Select Semester"})}),e.jsxs(h,{children:[e.jsx(r,{value:"1st",children:"1st"}),e.jsx(r,{value:"2nd",children:"2nd"}),e.jsx(r,{value:"Summer",children:"Summmer"})]})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(n,{variant:"outline",onClick:()=>R(!1),className:"cursor-pointer",children:"Cancel"}),e.jsx(n,{onClick:()=>js(l.id),disabled:H,className:"cursor-pointer",children:H?e.jsxs("div",{className:"flex items-center gap-2",children:["Saving ",e.jsx($e,{className:"animate-spin h-4 w-4"})]}):"Save Changes"})]})]})}),e.jsx(K,{open:gs,onOpenChange:q,children:e.jsxs(X,{className:"sm:max-w-[500px]",children:[e.jsx(J,{children:e.jsxs(W,{className:"flex items-center gap-2",children:[e.jsx(Oe,{className:"h-5 w-5"}),"Edit Module"]})}),e.jsx("div",{className:"space-y-4 p-6 border rounded-lg bg-muted/50",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"module-title",children:"Module Title"}),e.jsx(g,{id:"moduleTitle",value:(t==null?void 0:t.title)||"",onChange:s=>_({...t,title:s.target.value}),placeholder:"Enter module title"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"edit-status",children:"Subject"}),e.jsxs(o,{value:t==null?void 0:t.subject_id.toString(),onValueChange:s=>{_({...t,subject_id:Number(s)})},children:[e.jsx(m,{children:e.jsx(x,{placeholder:"Select Subject"})}),e.jsx(h,{children:N.map(s=>e.jsxs(r,{value:String(s.id),children:[s.code," - ",s.title]},s.id))})]})]}),e.jsxs("div",{className:"space-y-2 md:col-span-2",children:[e.jsx(c,{htmlFor:"module-description",children:"Description"}),e.jsx(Q,{id:"moduleTitle",value:(t==null?void 0:t.description)||"",onChange:s=>_({...t,description:s.target.value}),placeholder:"Describe the module content and objectives",rows:3})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"module-order",children:"Module Order"}),e.jsx(g,{id:"moduleTitle",value:(t==null?void 0:t.order)||"",onChange:s=>_({...t,order:Number(s.target.value)}),placeholder:"1, 2, 3...",type:"number"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"module-status",children:"Status"}),e.jsxs(o,{value:t==null?void 0:t.status,onValueChange:s=>{_({...t,status:s})},children:[e.jsx(m,{children:e.jsx(x,{placeholder:"Select status"})}),e.jsxs(h,{children:[e.jsx(r,{value:"published",children:"Published"}),e.jsx(r,{value:"draft",children:"Draft"})]})]})]}),e.jsxs("div",{className:"space-y-2 md:col-span-2",children:[e.jsx(c,{htmlFor:"module-file",children:"PDF File"}),e.jsx(g,{type:"file",accept:".pdf",onChange:s=>{var a;return we(((a=s.target.files)==null?void 0:a[0])||null)}}),(t==null?void 0:t.pdf)&&!de&&e.jsxs("div",{className:"mt-2 text-sm text-muted-foreground",children:["Current file: ",t.pdf.split("/").pop()]})]})]})}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(n,{variant:"outline",onClick:()=>q(!1),className:"cursor-pointer",children:"Cancel"}),e.jsx(n,{onClick:()=>fs(t.id),disabled:H,className:"cursor-pointer",children:H?e.jsxs("div",{className:"flex items-center gap-2",children:["Saving ",e.jsx($e,{className:"animate-spin h-4 w-4"})]}):"Save Changes"})]})]})}),e.jsx(K,{open:ds,onOpenChange:T,children:e.jsxs(X,{className:"max-w-md",children:[e.jsx(J,{className:"space-y-4",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-red-100 rounded-full dark:bg-red-900/20 flex-shrink-0",children:e.jsx(_s,{className:"w-6 h-6 text-red-600 dark:text-red-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx(W,{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Delete Subject"}),e.jsx(Ee,{className:"text-sm text-gray-600 dark:text-gray-400",children:"Are you absolutely sure you want to delete this subject?"})]})]})}),e.jsx("div",{className:"my-4",children:e.jsx("div",{className:"rounded-lg border border-red-200 bg-red-50 p-4 dark:border-red-800/30 dark:bg-red-900/10",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full mt-2"})}),e.jsx("p",{className:"text-sm font-medium text-red-800 dark:text-red-200",children:"This action cannot be undone"})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full mt-2"})}),e.jsx("p",{className:"text-sm text-red-700 dark:text-red-300",children:"This will permanently remove all associated data and relationships"})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full mt-2"})}),e.jsx("p",{className:"text-sm text-red-700 dark:text-red-300",children:"All modules associated with this subject will also get deleted"})]})]})})}),e.jsxs(_e,{className:"gap-2 sm:gap-2",children:[e.jsx(Le,{className:"flex-1 sm:flex-none",children:"Cancel"}),e.jsxs(Pe,{onClick:os,className:"flex-1 sm:flex-none bg-red-600 text-white hover:bg-red-700 focus:ring-2 focus:ring-red-500 focus:ring-offset-2 dark:bg-red-600 dark:hover:bg-red-700 gap-2 font-medium",children:[e.jsx(ne,{className:"h-4 w-4"}),"Delete Subject"]})]})]})}),e.jsx(K,{open:is,onOpenChange:z,children:e.jsxs(X,{className:"max-w-md",children:[e.jsx(J,{className:"space-y-4",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-amber-100 rounded-full dark:bg-amber-900/20 flex-shrink-0",children:e.jsx(Re,{className:"w-6 h-6 text-amber-600 dark:text-amber-400"})}),e.jsxs("div",{className:" flex-1",children:[e.jsx(W,{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Remove module from a subject?"}),e.jsx(Ee,{className:"text-sm text-gray-600 dark:text-gray-400",children:"This will remove the module from the subject. The module itself will not be deleted."})]})]})}),e.jsx("div",{className:"my-4",children:e.jsx("div",{className:"rounded-lg border border-amber-200 bg-amber-50 p-4 dark:border-amber-800/30 dark:bg-amber-900/10",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-2 h-2 bg-amber-500 rounded-full mt-2"})}),e.jsx("p",{className:"text-sm font-medium text-amber-800 dark:text-amber-200",children:`${u==null?void 0:u.title} will be unlinked from this subject`})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-2 h-2 bg-amber-500 rounded-full mt-2"})}),e.jsx("p",{className:"text-sm text-amber-700 dark:text-amber-300",children:"You can re-add the module to this subject later if needed"})]})]})})}),e.jsxs(_e,{className:"gap-2 sm:gap-2",children:[e.jsx(Le,{className:"flex-1 sm:flex-none",children:"Cancel"}),e.jsxs(Pe,{onClick:xs,className:"flex-1 sm:flex-none bg-amber-600 text-white hover:bg-amber-700 focus:ring-2 focus:ring-amber-500 focus:ring-offset-2 dark:bg-amber-600 dark:hover:bg-amber-700 gap-2 font-medium",children:[e.jsx(Re,{className:"h-4 w-4"}),"Remove Module"]})]})]})})]})]})}export{ja as default};
