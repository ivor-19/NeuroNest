import{K as ms,r as i,m as be,j as e,L as xs,S as x,t as b}from"./app-BO0vCXdd.js";import{C as A,c as D,a as ye,b as we,B as L}from"./badge-BQWc2iXb.js";import{B as n}from"./button-BNzxi-u_.js";import{I as u}from"./input-gypNOQko.js";import{L as r}from"./label-vXfKdjjF.js";import{T as H}from"./textarea-DQl0T3gh.js";import{S as j,a as p,b as g,c as f,d as c}from"./select-REPGTHeS.js";import{T as us,a as hs,b as Ce,c as Se}from"./tabs-C3YC6730.js";import{S as ke}from"./separator-o0hiDpMa.js";import{A as q,a as G,b as Q,c as K,d as Me,e as Fe,f as Ae,g as De}from"./alert-dialog-CQ26RMRd.js";import{A as js,L as X}from"./app-layout-DjLfhdzf.js";import{P as ps}from"./placeholder-pattern-DnlZUXw_.js";import{S as gs}from"./switch-C7B68NpR.js";import{B as P}from"./book-open-Aiq0VYGO.js";import{F as fs}from"./file-text-Dgem8q6c.js";import{S as vs}from"./search-vbg9sFiu.js";import{F as Ns}from"./filter-BkbjYMNt.js";import{P as I}from"./plus-yMd_cbcV.js";import{c as Re,G as bs}from"./graduation-cap-BoIJkwZ1.js";import{C as ys}from"./user-menu-content-qervpgH4.js";import{S as Ee}from"./square-pen-ByCF3aba.js";import{T as te}from"./trash-2-D1vdo3H8.js";import{X as _e}from"./x-CWcDRnX-.js";import{B as Le}from"./book-Bcmtc75y.js";import{T as ws}from"./triangle-alert-BJn1d3bX.js";import{U as Pe}from"./unlink-DxV1qs9H.js";import"./index-BwtLRDEp.js";import"./index-1KhAycrp.js";import"./index-Bu15VQIu.js";import"./check-DzCLIzRK.js";import"./users-B5Av-R46.js";import"./mail-CAgzUEeK.js";import"./app-logo-icon-CepKvpxW.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cs=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],Ie=Re("Loader",Cs);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ss=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],Oe=Re("Upload",Ss),ks=[{title:"Manage Students",href:"admin/manage-subjects"}];function ia({subjects:y}){const{auth:M}=ms().props,[Ve,re]=i.useState("subjects"),[ce,ie]=i.useState("all"),[w,de]=i.useState(""),[$,h]=i.useState(!1),ne=i.useRef(null),oe=i.useRef(null),{data:C,setData:S,post:$e,processing:me,errors:v,reset:Be}=be({code:"",title:"",description:"",year_level:"",semester:"",isActive:"1",image:null}),{data:m,setData:O,processing:xe,errors:R,reset:Ye}=be({title:"",subject_id:"",creator_id:M.user.id,status:"published",description:"",order:"",pdf:""}),J=y.flatMap(s=>s.modules||[]),[ue,W]=i.useState(null),[Z,B]=i.useState(null),[he,ee]=i.useState(null),Ue=s=>{var d;const a=(d=s.target.files)==null?void 0:d[0];if(a){S("image",a);const F=new FileReader;F.onload=le=>W(le.target.result),F.readAsDataURL(a)}},ze=s=>{var d;const a=(d=s.target.files)==null?void 0:d[0];if(a){ee(a);const F=new FileReader;F.onload=le=>{var Ne;return B((Ne=le.target)==null?void 0:Ne.result)},F.readAsDataURL(a)}},Te=()=>{ee(null),B(null),k({...l,image:""})},He=()=>{S("image",null),W(null)},qe=async s=>{s.preventDefault(),$e(route("admin.addSubject"),{forceFormData:!0,onSuccess:()=>{b.success(`Subject added: ${C.code}`),Be(),h(!1),W(null),console.log("Success: ",C)},onError:a=>{console.error("Error occurred",a)}})},[se,je]=i.useState(null),[Ge,pe]=i.useState(!1),Qe=async s=>{s.preventDefault();const a=new FormData;a.append("subject_id",m.subject_id),a.append("creator_id",M.user.id.toString()),a.append("title",m.title),a.append("description",m.description),a.append("status",m.status),a.append("order",m.order),se&&a.append("pdf",se),x.post(route("admin.addModule"),a,{onSuccess:()=>{Ye(),h(!1),je(null),pe(!1),b.success("Module added successfully"),console.log("Module added successfully!"),x.post(route("admin.addActivity"),{type:"create",user:M.user.name,action:"Created a new module",details:`${m.title}`},{})},onError:d=>{console.error("Error occurred:",d),pe(!0)}})},ge=(s=>{if(s==="all")return J;const a=y.find(d=>d.code===s);return a?a.modules||[]:[]})(ce).filter(s=>s.title.toLowerCase().includes(w.toLowerCase())),fe=y.filter(s=>s.title.toLowerCase().includes(w.toLowerCase())||s.code.toLowerCase().includes(w.toLowerCase())),Ke=J.length,Xe=J.filter(s=>s.status==="published").length,Je=y.filter(s=>s.isActive).length,[We,Y]=i.useState(!1),[Ze,U]=i.useState(!1),[N,es]=i.useState(null),ss=async()=>{x.delete(route("admin.deleteSubject",N==null?void 0:N.id),{onSuccess:()=>{U(!1),b.info(`Subject: ${N==null?void 0:N.code} is deleted.`),x.post(route("admin.addActivity"),{type:"delete",user:M.user.name,action:"Delete a subject",details:`${N==null?void 0:N.title}`},{})},onError:s=>{console.error("Error occured",s),U(!1)}})},[o,as]=i.useState(null),ls=async()=>{x.delete(route("admin.deleteModule",o==null?void 0:o.id),{onSuccess:()=>{Y(!1),b.info(`Removed ${o==null?void 0:o.title}`),x.post(route("admin.addActivity"),{type:"delete",user:M.user.name,action:"Delete a module",details:`${o==null?void 0:o.title}`},{})},onError:s=>{console.error("Error occured",s),Y(!1)}})},[ts,V]=i.useState(!1),[l,k]=i.useState(null),[z,E]=i.useState(!1),rs=async s=>{V(!0),k(s),B(s.image?`/storage/${s.image}`:null)},cs=async s=>{var d;E(!0);const a=new FormData;a.append("code",(l==null?void 0:l.code)||""),a.append("title",(l==null?void 0:l.title)||""),a.append("description",(l==null?void 0:l.description)||""),a.append("year_level",((d=l==null?void 0:l.year_level)==null?void 0:d.toString())||""),a.append("semester",(l==null?void 0:l.semester)||""),he?a.append("image",he):(l==null?void 0:l.image)===""&&a.append("image",""),x.post(route("admin.updateSubject",s),a,{headers:{"Content-Type":"multipart/form-data"},onSuccess:()=>{b.success("Subject updated successfully"),k(null),V(!1),E(!1),B(null),ee(null),x.post(route("admin.addActivity"),{type:"edit",user:M.user.name,action:"Updated subject",details:`${l==null?void 0:l.title} modified`},{})},onError:F=>{console.error(F),E(!1),b.success("There is a problem updating the subject. Try again."),V(!1)}})},is=s=>{re("modules"),ie(s),de("")},[ds,T]=i.useState(!1),[t,_]=i.useState(),[ae,ve]=i.useState(null),ns=s=>{T(!0),_(s)},os=async s=>{E(!0);const a=new FormData;a.append("title",(t==null?void 0:t.title)||""),a.append("subject_id",(t==null?void 0:t.subject_id.toString())||""),a.append("description",(t==null?void 0:t.description)||""),a.append("status",(t==null?void 0:t.status)||""),a.append("order",(t==null?void 0:t.order.toString())||""),ae&&a.append("pdf",ae),console.log(t),x.post(route("admin.updateModule",s),a,{onSuccess:()=>{b.success("Module updated successfully"),T(!1),E(!1),ve(null),x.post(route("admin.addActivity"),{type:"edit",user:M.user.name,action:"Updated module",details:`${t==null?void 0:t.title}`},{})},onError:d=>{console.error(d),E(!1),b.error("There was a problem updating the module")}})};return e.jsxs(js,{breadcrumbs:ks,children:[e.jsx(xs,{title:"Subject Management"}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-6 rounded-xl overflow-x-auto p-8 bg-[var(--bg-main)]",children:[e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Subject Management"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your academic subjects and learning modules efficiently."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(A,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(P,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium leading-none",children:"Active Subjects"}),e.jsx("p",{className:"text-2xl font-bold",children:Je})]})]})})}),e.jsx(A,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(X,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium leading-none",children:"Total Modules"}),e.jsx("p",{className:"text-2xl font-bold",children:Ke})]})]})})}),e.jsx(A,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(fs,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium leading-none",children:"Published"}),e.jsx("p",{className:"text-2xl font-bold",children:Xe})]})]})})})]}),e.jsx(A,{children:e.jsxs(D,{className:"space-y-2",children:[e.jsxs("div",{className:"relative",children:[e.jsx(vs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(u,{placeholder:"Search subjects and modules...",className:"pl-10",value:w,onChange:s=>de(s.target.value)})]}),e.jsxs(us,{value:Ve,onValueChange:re,className:"space-y-2",children:[e.jsxs(hs,{className:"grid w-full grid-cols-2 ",children:[e.jsxs(Ce,{value:"subjects",className:"flex items-center gap-2 cursor-pointer",onClick:()=>h(!1),children:[e.jsx(P,{className:"h-4 w-4"})," Subjects"]}),e.jsxs(Ce,{value:"modules",className:"flex items-center gap-2 cursor-pointer",onClick:()=>h(!1),children:[e.jsx(X,{className:"h-4 w-4"}),"Modules"]})]}),e.jsx(Se,{value:"modules",className:"space-y-6",children:e.jsxs(A,{children:[e.jsx(ye,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(we,{className:"flex items-center gap-2",children:[e.jsx(X,{className:"h-5 w-5"})," Learning Modules"]}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Manage and organize your course modules"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(j,{value:ce,onValueChange:ie,children:[e.jsxs(p,{className:"min-w-48 cursor-pointer",children:[e.jsx(Ns,{className:"h-4 w-4 mr-2"}),e.jsx(g,{placeholder:"Filter by subject"})]}),e.jsxs(f,{children:[e.jsx(c,{value:"all",children:"All"}),y.map(s=>e.jsxs(c,{value:s.code,children:[s.code," - ",s.title]},s.code))]})]}),e.jsxs(n,{onClick:()=>h(!$),className:"cursor-pointer",children:[e.jsx(I,{className:"h-4 w-4 mr-2"}),"Add Module"]})]})]})}),e.jsxs(D,{className:"space-y-6",children:[$&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-4 p-6 border rounded-lg bg-muted/50",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(I,{className:"h-4 w-4"}),e.jsx("h3",{className:"font-semibold",children:"Add New Module"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"module-title",children:"Module Title"}),e.jsx(u,{id:"module-title",value:m.title,onChange:s=>O("title",s.target.value),placeholder:"Enter module title"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"module-subject",children:"Subject"}),e.jsxs(j,{value:m.subject_id,onValueChange:s=>O("subject_id",s),children:[e.jsx(p,{children:e.jsx(g,{placeholder:"Select subject"})}),e.jsx(f,{children:y.map(s=>e.jsxs(c,{value:String(s.id),children:[s.code," - ",s.title]},s.id))})]})]}),e.jsxs("div",{className:"space-y-2 md:col-span-2",children:[e.jsx(r,{htmlFor:"module-description",children:"Description"}),e.jsx(H,{id:"module-description",value:m.description,onChange:s=>O("description",s.target.value),placeholder:"Describe the module content and objectives",rows:3})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"module-order",children:"Module Order"}),e.jsx(u,{id:"module-order",type:"number",value:m.order,onChange:s=>O("order",s.target.value),placeholder:"1, 2, 3..."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"module-status",children:"Status"}),e.jsxs(j,{value:m.status,onValueChange:s=>O("status",s),children:[e.jsx(p,{children:e.jsx(g,{placeholder:"Select status"})}),e.jsxs(f,{children:[e.jsx(c,{value:"published",children:"Published"}),e.jsx(c,{value:"draft",children:"Draft"})]})]})]}),e.jsxs("div",{className:"space-y-2 md:col-span-2",children:[e.jsx(r,{htmlFor:"module-file",children:"PDF File"}),e.jsx(u,{type:"file",accept:".pdf",onChange:s=>{var a;return je(((a=s.target.files)==null?void 0:a[0])||null)}})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(n,{onClick:Qe,disabled:xe,className:"cursor-pointer",children:xe?"Creating...":"Create Module"}),e.jsx(n,{variant:"outline",onClick:()=>h(!1),className:"cursor-pointer",children:" Cancel"}),R.title||R.subject_id||R.description||R.order||R.status||se&&e.jsx("p",{className:"text-sm font-medium text-destructive",children:"Complete all fields"}),Ge&&e.jsx("p",{className:"text-sm font-medium text-destructive",children:"Order module already exists"})]})]}),e.jsx(ke,{})]}),e.jsx("div",{className:"space-y-4",children:ge.length>0?ge.map(s=>{const a=y.find(d=>d.id===s.subject_id);return e.jsx("div",{className:"border rounded-lg p-4 hover:bg-muted/50 transition-colors",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"space-y-2 flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"font-semibold",children:s.title}),a&&e.jsx(L,{variant:"outline",children:a.code}),e.jsxs(L,{variant:"secondary",children:["Module ",s.order]}),e.jsx(L,{variant:s.status==="published"?"default":"secondary",children:s.status})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.description}),a&&e.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(bs,{className:"h-3 w-3"})," Year ",a.year_level]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ys,{className:"h-3 w-3"})," Semester ",a.semester]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(P,{className:"h-3 w-3"})," ",a.title]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(n,{variant:"ghost",size:"sm",className:"cursor-pointer",onClick:()=>ns(s),children:e.jsx(Ee,{className:"h-4 w-4"})}),e.jsx(n,{variant:"ghost",size:"sm",className:"cursor-pointer",onClick:()=>{Y(!0),as(s)},children:e.jsx(te,{className:"h-4 w-4"})})]})]})},s.id)}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(X,{className:"h-12 w-12 mx-auto text-muted-foreground/50 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No modules found"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:w?"Try adjusting your search terms":"Create your first learning module to get started"}),!w&&e.jsxs(n,{onClick:()=>h(!0),className:"cursor-pointer",children:[e.jsx(I,{className:"h-4 w-4 mr-2"}),"  Add Module"]})]})})]})]})}),e.jsx(Se,{value:"subjects",className:"space-y-6",children:e.jsxs(A,{children:[e.jsx(ye,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(we,{className:"flex items-center gap-2",children:[e.jsx(P,{className:"h-5 w-5"})," Academic Subjects"]}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Organize your curriculum and course structure"})]}),e.jsxs(n,{onClick:()=>h(!$),className:"cursor-pointer",children:[e.jsx(I,{className:"h-4 w-4 mr-2"})," Add Subject"]})]})}),e.jsxs(D,{className:"space-y-6",children:[$&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-4 p-6 border rounded-lg bg-muted/50",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(I,{className:"h-4 w-4"}),e.jsx("h3",{className:"font-semibold",children:"Add New Subject"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"subject-code",children:"Subject Code"}),e.jsx(u,{id:"subject-code",value:C.code,onChange:s=>S("code",s.target.value),placeholder:"e.g. CS101, MATH201"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"subject-title",children:"Subject Title"}),e.jsx(u,{id:"subject-title",value:C.title,onChange:s=>S("title",s.target.value),placeholder:"Enter subject title"})]}),e.jsxs("div",{className:"space-y-2 md:col-span-2",children:[e.jsx(r,{htmlFor:"subject-description",children:"Description"}),e.jsx(H,{id:"subject-description",value:C.description,onChange:s=>S("description",s.target.value),placeholder:"Describe the subject objectives and content",rows:3})]}),e.jsxs("div",{className:"space-y-2 md:col-span-2",children:[e.jsx(r,{htmlFor:"subject-image",children:"Subject Image"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("input",{ref:ne,type:"file",id:"subject-image",accept:"image/*",onChange:Ue,className:"hidden"}),e.jsxs(n,{type:"button",variant:"outline",onClick:()=>{var s;return(s=ne.current)==null?void 0:s.click()},className:"flex items-center gap-2 cursor-pointer",children:[e.jsx(Oe,{className:"h-4 w-4"}),"Choose Image"]}),ue&&e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:ue||"/placeholder.svg",alt:"Preview",className:"h-16 w-16 object-cover rounded-md border"}),e.jsx("button",{type:"button",onClick:He,className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1 hover:bg-red-600",children:e.jsx(_e,{className:"h-3 w-3"})})]})]}),v.image&&e.jsx("p",{className:"text-sm font-medium text-destructive",children:v.image})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"subject-year",children:"Year Level"}),e.jsxs(j,{value:C.year_level,onValueChange:s=>S("year_level",s),children:[e.jsx(p,{children:e.jsx(g,{placeholder:"Select year"})}),e.jsxs(f,{children:[e.jsx(c,{value:"1",children:"1st Year"}),e.jsx(c,{value:"2",children:"2nd Year"}),e.jsx(c,{value:"3",children:"3rd Year"}),e.jsx(c,{value:"4",children:"4th Year"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"subject-semester",children:"Semester"}),e.jsxs(j,{value:C.semester,onValueChange:s=>S("semester",s),children:[e.jsx(p,{children:e.jsx(g,{placeholder:"Select semester"})}),e.jsxs(f,{children:[e.jsx(c,{value:"1st",children:"1st Semester"}),e.jsx(c,{value:"2nd",children:"2nd Semester"}),e.jsx(c,{value:"Summer",children:"Summer"})]})]})]}),e.jsxs("div",{className:"space-y-2 md:col-span-2",children:[e.jsx(r,{htmlFor:"subject-status",children:"Status"}),e.jsxs(j,{value:C.isActive,onValueChange:s=>S("isActive",s),children:[e.jsx(p,{children:e.jsx(g,{placeholder:"Select status"})}),e.jsxs(f,{children:[e.jsx(c,{value:"1",children:"Active"}),e.jsx(c,{value:"0",children:"Inactive"})]})]})]})]}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx(n,{onClick:qe,disabled:me,className:"cursor-pointer",children:me?"Creating...":"Create Subject"}),e.jsx(n,{variant:"outline",onClick:()=>h(!1),className:"cursor-pointer",children:"Cancel"}),v.code&&e.jsx("p",{className:"text-sm font-medium text-destructive",children:v.code}),(v.code||v.title||v.year_level||v.semester||v.isActive)&&e.jsx("p",{className:"text-sm font-medium text-destructive",children:"Complete all fields"})]})]}),e.jsx(ke,{})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:fe.map(s=>e.jsx(A,{className:"hover:bg-muted/50 transition-colors",children:e.jsxs(D,{className:"p-2 flex flex-col gap-4",children:[e.jsxs("div",{className:"w-full h-48 relative",children:[s.image?e.jsx("img",{src:`/public/storage/${s.image}`,alt:`${s.title} subject title`,className:"w-full h-full object-cover"}):e.jsxs("div",{className:"relative h-full rounded-xl border border-sidebar-border/70 dark:border-sidebar-border",children:[e.jsx(ps,{className:"w-full h-full stroke-neutral-900/20 dark:stroke-neutral-100/20"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-muted-foreground",children:"No image available"})]}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/20 to-transparent"})]}),e.jsxs("div",{className:"px-2",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("h3",{className:"font-semibold",children:s.title}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.code})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(gs,{checked:s.isActive,onCheckedChange:a=>{x.post(route("admin.subjectAvailability",s.id),{isActive:a},{onSuccess:()=>{b.success("Subject status updated")},onError:d=>{console.error("Error updating status",d)}})},className:"data-[state=checked]:bg-emerald-600 dark:data-[state=checked]:bg-emerald-500 cursor-pointer"}),e.jsx(n,{variant:"ghost",size:"sm",className:"cursor-pointer",onClick:()=>rs(s),children:e.jsx(Ee,{className:"h-4 w-4"})}),e.jsx(n,{variant:"ghost",size:"sm",className:"cursor-pointer",onClick:()=>{U(!0),es(s)},children:e.jsx(te,{className:"h-4 w-4"})})]})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:s.description}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(L,{variant:"outline",children:["Year ",s.year_level]}),e.jsxs(L,{variant:"outline",children:["Sem ",s.semester]}),e.jsx(L,{variant:s.isActive?"default":"secondary",children:s.isActive?"Active":"Inactive"}),e.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[e.jsx(P,{className:"h-4 w-4"}),(s.modules||[]).length," modules"]})]}),e.jsx("div",{className:"flex items-center gap-1 text-xs text-muted-foreground cursor-pointer hover:text-primary transition-colors",onClick:()=>is(s.code),children:"View all"})]})]})]})},s.id))}),fe.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(P,{className:"h-12 w-12 mx-auto text-muted-foreground/50 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No subjects found"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:w?"Try adjusting your search terms":"Create your first subject to start building your curriculum"}),!w&&e.jsxs(n,{onClick:()=>h(!0),className:"cursor-pointer",children:[e.jsx(I,{className:"h-4 w-4 mr-2"})," Add Subject"]})]})]})]})})]})]})}),e.jsx(q,{open:ts,onOpenChange:V,children:e.jsxs(G,{className:"sm:max-w-[500px]",children:[e.jsx(Q,{children:e.jsxs(K,{className:"flex items-center gap-2",children:[e.jsx(Le,{className:"h-5 w-5"}),"Edit Subject"]})}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"edit-code",children:"Code"}),e.jsx(u,{id:"subjectCode",value:(l==null?void 0:l.code)||"",onChange:s=>k({...l,code:s.target.value}),placeholder:"Enter course code"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"edit-name",children:"Title"}),e.jsx(u,{id:"subjectTitle",value:(l==null?void 0:l.title)||"",onChange:s=>k({...l,title:s.target.value}),placeholder:"Enter course name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"edit-description",children:"Description"}),e.jsx(H,{id:"subjectDescription",value:(l==null?void 0:l.description)||"",onChange:s=>k({...l,description:s.target.value}),placeholder:"Enter course description"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Subject Image"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("input",{ref:oe,type:"file",accept:"image/*",onChange:ze,className:"hidden"}),e.jsxs(n,{type:"button",variant:"outline",onClick:()=>{var s;return(s=oe.current)==null?void 0:s.click()},className:"flex items-center gap-2 cursor-pointer",children:[e.jsx(Oe,{className:"h-4 w-4"}),"Change Image"]}),Z&&e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:Z||"/placeholder.svg",alt:"Preview",className:"h-16 w-16 object-cover rounded-md border"}),e.jsx("button",{type:"button",onClick:Te,className:"cursor-pointer absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1 hover:bg-red-600",children:e.jsx(_e,{className:"h-3 w-3"})})]})]}),!Z&&(l==null?void 0:l.image)&&e.jsx("div",{className:"relative mt-2",children:e.jsx("img",{src:`/public/storage/${l.image}`,alt:"Current subject image",className:"h-16 w-16 object-cover rounded-md border"})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"edit-status",children:"Year Level"}),e.jsxs(j,{value:l==null?void 0:l.year_level.toString(),onValueChange:s=>{k({...l,year_level:s})},children:[e.jsx(p,{children:e.jsx(g,{placeholder:"Select Year Level"})}),e.jsxs(f,{children:[e.jsx(c,{value:"1",children:"1"}),e.jsx(c,{value:"2",children:"2"}),e.jsx(c,{value:"3",children:"3"}),e.jsx(c,{value:"4",children:"4"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"edit-status",children:"Semester"}),e.jsxs(j,{value:l==null?void 0:l.semester,onValueChange:s=>{k({...l,semester:s})},children:[e.jsx(p,{children:e.jsx(g,{placeholder:"Select Semester"})}),e.jsxs(f,{children:[e.jsx(c,{value:"1st",children:"1st"}),e.jsx(c,{value:"2nd",children:"2nd"}),e.jsx(c,{value:"Summer",children:"Summmer"})]})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(n,{variant:"outline",onClick:()=>V(!1),className:"cursor-pointer",children:"Cancel"}),e.jsx(n,{onClick:()=>cs(l.id),disabled:z,className:"cursor-pointer",children:z?e.jsxs("div",{className:"flex items-center gap-2",children:["Saving ",e.jsx(Ie,{className:"animate-spin h-4 w-4"})]}):"Save Changes"})]})]})}),e.jsx(q,{open:ds,onOpenChange:T,children:e.jsxs(G,{className:"sm:max-w-[500px]",children:[e.jsx(Q,{children:e.jsxs(K,{className:"flex items-center gap-2",children:[e.jsx(Le,{className:"h-5 w-5"}),"Edit Module"]})}),e.jsx("div",{className:"space-y-4 p-6 border rounded-lg bg-muted/50",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"module-title",children:"Module Title"}),e.jsx(u,{id:"moduleTitle",value:(t==null?void 0:t.title)||"",onChange:s=>_({...t,title:s.target.value}),placeholder:"Enter module title"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"edit-status",children:"Subject"}),e.jsxs(j,{value:t==null?void 0:t.subject_id.toString(),onValueChange:s=>{_({...t,subject_id:Number(s)})},children:[e.jsx(p,{children:e.jsx(g,{placeholder:"Select Subject"})}),e.jsx(f,{children:y.map(s=>e.jsxs(c,{value:String(s.id),children:[s.code," - ",s.title]},s.id))})]})]}),e.jsxs("div",{className:"space-y-2 md:col-span-2",children:[e.jsx(r,{htmlFor:"module-description",children:"Description"}),e.jsx(H,{id:"moduleTitle",value:(t==null?void 0:t.description)||"",onChange:s=>_({...t,description:s.target.value}),placeholder:"Describe the module content and objectives",rows:3})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"module-order",children:"Module Order"}),e.jsx(u,{id:"moduleTitle",value:(t==null?void 0:t.order)||"",onChange:s=>_({...t,order:Number(s.target.value)}),placeholder:"1, 2, 3...",type:"number"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"module-status",children:"Status"}),e.jsxs(j,{value:t==null?void 0:t.status,onValueChange:s=>{_({...t,status:s})},children:[e.jsx(p,{children:e.jsx(g,{placeholder:"Select status"})}),e.jsxs(f,{children:[e.jsx(c,{value:"published",children:"Published"}),e.jsx(c,{value:"draft",children:"Draft"})]})]})]}),e.jsxs("div",{className:"space-y-2 md:col-span-2",children:[e.jsx(r,{htmlFor:"module-file",children:"PDF File"}),e.jsx(u,{type:"file",accept:".pdf",onChange:s=>{var a;return ve(((a=s.target.files)==null?void 0:a[0])||null)}}),(t==null?void 0:t.pdf)&&!ae&&e.jsxs("div",{className:"mt-2 text-sm text-muted-foreground",children:["Current file: ",t.pdf.split("/").pop()]})]})]})}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(n,{variant:"outline",onClick:()=>T(!1),className:"cursor-pointer",children:"Cancel"}),e.jsx(n,{onClick:()=>os(t.id),disabled:z,className:"cursor-pointer",children:z?e.jsxs("div",{className:"flex items-center gap-2",children:["Saving ",e.jsx(Ie,{className:"animate-spin h-4 w-4"})]}):"Save Changes"})]})]})}),e.jsx(q,{open:Ze,onOpenChange:U,children:e.jsxs(G,{className:"max-w-md",children:[e.jsx(Q,{className:"space-y-4",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-red-100 rounded-full dark:bg-red-900/20 flex-shrink-0",children:e.jsx(ws,{className:"w-6 h-6 text-red-600 dark:text-red-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx(K,{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Delete Subject"}),e.jsx(Me,{className:"text-sm text-gray-600 dark:text-gray-400",children:"Are you absolutely sure you want to delete this subject?"})]})]})}),e.jsx("div",{className:"my-4",children:e.jsx("div",{className:"rounded-lg border border-red-200 bg-red-50 p-4 dark:border-red-800/30 dark:bg-red-900/10",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full mt-2"})}),e.jsx("p",{className:"text-sm font-medium text-red-800 dark:text-red-200",children:"This action cannot be undone"})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full mt-2"})}),e.jsx("p",{className:"text-sm text-red-700 dark:text-red-300",children:"This will permanently remove all associated data and relationships"})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full mt-2"})}),e.jsx("p",{className:"text-sm text-red-700 dark:text-red-300",children:"All modules associated with this subject will also get deleted"})]})]})})}),e.jsxs(Fe,{className:"gap-2 sm:gap-2",children:[e.jsx(Ae,{className:"flex-1 sm:flex-none",children:"Cancel"}),e.jsxs(De,{onClick:ss,className:"flex-1 sm:flex-none bg-red-600 text-white hover:bg-red-700 focus:ring-2 focus:ring-red-500 focus:ring-offset-2 dark:bg-red-600 dark:hover:bg-red-700 gap-2 font-medium",children:[e.jsx(te,{className:"h-4 w-4"}),"Delete Subject"]})]})]})}),e.jsx(q,{open:We,onOpenChange:Y,children:e.jsxs(G,{className:"max-w-md",children:[e.jsx(Q,{className:"space-y-4",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-amber-100 rounded-full dark:bg-amber-900/20 flex-shrink-0",children:e.jsx(Pe,{className:"w-6 h-6 text-amber-600 dark:text-amber-400"})}),e.jsxs("div",{className:" flex-1",children:[e.jsx(K,{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Remove module from a subject?"}),e.jsx(Me,{className:"text-sm text-gray-600 dark:text-gray-400",children:"This will remove the module from the subject. The module itself will not be deleted."})]})]})}),e.jsx("div",{className:"my-4",children:e.jsx("div",{className:"rounded-lg border border-amber-200 bg-amber-50 p-4 dark:border-amber-800/30 dark:bg-amber-900/10",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-2 h-2 bg-amber-500 rounded-full mt-2"})}),e.jsx("p",{className:"text-sm font-medium text-amber-800 dark:text-amber-200",children:`${o==null?void 0:o.title} will be unlinked from this subject`})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-2 h-2 bg-amber-500 rounded-full mt-2"})}),e.jsx("p",{className:"text-sm text-amber-700 dark:text-amber-300",children:"You can re-add the module to this subject later if needed"})]})]})})}),e.jsxs(Fe,{className:"gap-2 sm:gap-2",children:[e.jsx(Ae,{className:"flex-1 sm:flex-none",children:"Cancel"}),e.jsxs(De,{onClick:ls,className:"flex-1 sm:flex-none bg-amber-600 text-white hover:bg-amber-700 focus:ring-2 focus:ring-amber-500 focus:ring-offset-2 dark:bg-amber-600 dark:hover:bg-amber-700 gap-2 font-medium",children:[e.jsx(Pe,{className:"h-4 w-4"}),"Remove Module"]})]})]})})]})]})}export{ia as default};
