import{r as l,j as e,L as U}from"./app-Dg84d6fb.js";import{B as P,C as b,c as w}from"./badge-CIbo3TBm.js";import{B as c}from"./button-CCMnkL0Z.js";import{I as R}from"./input-L_WL-J02.js";import{S as q,a as G,b as H,c as J,d as f,C as S}from"./select-DiX0Frmw.js";import{C}from"./checkbox-DWuapuQ7.js";import{A as K}from"./app-layout-DbnVHMmT.js";import{D as Q}from"./delete-modal-CmQURamh.js";import{T as y}from"./trash-2-BNwSeIXS.js";import{S as W}from"./search-cfURqkyw.js";import{F as X}from"./filter-B-J3Y5RE.js";import{C as D}from"./chevron-down-DAZYoLuu.js";import{C as Y}from"./user-menu-content-CNiipdoX.js";import{M as Z}from"./mail-CpbfIAwh.js";import{P as _}from"./phone-DuMRt9z_.js";import"./index-D9Qf7InJ.js";import"./index-BAowfLDo.js";import"./index-BxU5CMXm.js";import"./check-Bo5VHAp4.js";import"./createLucideIcon-BiCGBh9O.js";import"./users-DOmuk_5F.js";import"./graduation-cap-7lI1D_yU.js";import"./alert-dialog-DTnSPhxN.js";import"./unlink-DeEZ-3Yt.js";import"./triangle-alert-Dzf1c8sf.js";import"./x-DmkD1HkF.js";import"./app-logo-icon-ByEGs7py.js";function Me({contacts:g}){const[n,j]=l.useState(""),[o,k]=l.useState("createdAt"),[i,A]=l.useState("desc"),[p,M]=l.useState(new Set),[a,d]=l.useState(new Set),[m,N]=l.useState(!1),[T,v]=l.useState(!1),[L,F]=l.useState(0),[ee,se]=l.useState(""),r=l.useMemo(()=>g.filter(t=>Object.values(t).some(h=>h!=null&&String(h).toLowerCase().includes(n.toLowerCase()))).sort((t,h)=>{const x=t[o],u=h[o];return x==null&&u==null?0:x==null?i==="asc"?1:-1:u==null||x<u?i==="asc"?-1:1:x>u?i==="asc"?1:-1:0}),[g,n,o,i]),z=s=>{const t=new Set(p);t.has(s)?t.delete(s):t.add(s),M(t)},E=s=>{const t=new Set(a);t.has(s)?t.delete(s):t.add(s),d(t)},$=()=>{a.size===r.length?d(new Set):d(new Set(r.map(s=>s.id)))},B=s=>{v(!0),F(s)},I=()=>{const s=Array.from(a);s.length!==0&&confirm(`Are you sure you want to delete ${s.length} contact(s)? This action cannot be undone.`)&&(N(!0),setTimeout(()=>{N(!1),d(new Set),alert(`${s.length} contacts deleted successfully!`)},1e3))},O=(s,t=120)=>s.length>t?`${s.substring(0,t)}...`:s,V=s=>s?new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A";return e.jsxs(K,{children:[e.jsx(U,{title:"Contact Us"}),e.jsx("div",{className:"min-h-screen p-4 md:p-6",children:e.jsxs("div",{className:"p-7 space-y-6",children:[e.jsx("div",{className:"",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold ",children:"Contact Dashboard"}),e.jsx("p",{className:"text-gray-600 mt-1 flex items-center gap-2",children:e.jsxs(P,{variant:"secondary",className:"bg-blue-100 text-blue-800",children:[r.length," of ",g.length," contacts"]})})]}),a.size>0&&e.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg ",children:[e.jsxs("span",{className:"text-sm font-medium ",children:[a.size," selected"]}),e.jsxs(c,{onClick:I,disabled:m,variant:"destructive",size:"sm",className:"bg-red-600 hover:bg-red-700",children:[e.jsx(y,{className:"w-4 h-4 mr-2"}),m?"Deleting...":"Delete Selected"]})]})]})}),e.jsxs("div",{className:"rounded-lg shadow-sm border p-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(W,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4"}),e.jsx(R,{type:"text",placeholder:"Search contacts by name, email, phone, or message...",value:n,onChange:s=>j(s.target.value),className:"pl-10"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(q,{value:o,onValueChange:s=>k(s),children:[e.jsxs(G,{className:"w-48",children:[e.jsx(X,{className:"w-4 h-4 mr-2"}),e.jsx(H,{})]}),e.jsxs(J,{children:[e.jsx(f,{value:"createdAt",children:"Sort by Date"}),e.jsx(f,{value:"firstName",children:"Sort by First Name"}),e.jsx(f,{value:"lastName",children:"Sort by Last Name"}),e.jsx(f,{value:"emailAddress",children:"Sort by Email"})]})]}),e.jsx(c,{variant:"outline",onClick:()=>A(i==="asc"?"desc":"asc"),className:"px-3",children:i==="asc"?e.jsx(S,{className:"w-4 h-4"}):e.jsx(D,{className:"w-4 h-4"})})]})]}),r.length>0&&e.jsx("div",{className:"mt-4 pt-4 border-t",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(C,{id:"select-all",checked:a.size===r.length&&r.length>0,onCheckedChange:$}),e.jsx("label",{htmlFor:"select-all",className:"text-sm font-medium text-gray-700 cursor-pointer",children:"Select all contacts"})]})})]}),r.length===0?e.jsx(b,{className:"p-12 text-center",children:e.jsxs(w,{className:"pt-6",children:[e.jsx("div",{className:"text-gray-400 text-6xl mb-4",children:"ðŸ“§"}),e.jsx("h3",{className:"text-lg font-semibold  mb-2",children:n?"No matching contacts found":"No messages yet"}),e.jsx("p",{className:"text-gray-600 mb-4",children:n?"Try adjusting your search terms or filters.":"Contact messages will appear here when customers reach out."}),n&&e.jsx(c,{onClick:()=>j(""),variant:"outline",children:"Clear Search"})]})}):e.jsx("div",{className:"grid gap-4",children:r.map(s=>e.jsx(b,{className:`transition-all duration-200 hover:shadow-md ${a.has(s.id)?"ring-2 ":"hover:shadow-lg"}`,children:e.jsx(w,{className:"p-6",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"pt-1",children:e.jsx(C,{checked:a.has(s.id),onCheckedChange:()=>E(s.id)})}),e.jsx("div",{className:"flex-shrink-0",children:e.jsxs("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white font-semibold text-lg",children:[s.firstName.charAt(0),s.lastName.charAt(0)]})}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-start lg:justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 mb-3",children:[e.jsxs("h3",{className:"text-lg font-semibold ",children:[s.firstName," ",s.lastName]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[e.jsx(Y,{className:"w-4 h-4 mr-1"}),V(s.createdAt)]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-4",children:[e.jsxs("a",{href:`mailto:${s.emailAddress}`,className:"flex items-center text-blue-600 hover:text-blue-800 transition-colors",children:[e.jsx(Z,{className:"w-4 h-4 mr-2"}),e.jsx("span",{className:"truncate",children:s.emailAddress})]}),e.jsxs("a",{href:`tel:${s.contactNumber}`,className:"flex items-center text-green-600 hover:text-green-800 transition-colors",children:[e.jsx(_,{className:"w-4 h-4 mr-2"}),s.contactNumber]})]}),e.jsxs("div",{className:"bg-accent rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-medium  mb-2",children:"Message:"}),e.jsx("p",{className:" leading-relaxed",children:p.has(s.id)?s.message:O(s.message)}),s.message.length>120&&e.jsx(c,{variant:"ghost",size:"sm",onClick:()=>z(s.id),className:"mt-2 p-0 h-auto text-blue-600 hover:text-blue-800",children:p.has(s.id)?e.jsxs(e.Fragment,{children:[e.jsx(S,{className:"w-4 h-4 mr-1"}),"Show less"]}):e.jsxs(e.Fragment,{children:[e.jsx(D,{className:"w-4 h-4 mr-1"}),"Show more"]})})]})]}),e.jsx("div",{className:"flex-shrink-0",children:e.jsxs(c,{variant:"ghost",size:"sm",onClick:()=>B(s.id),disabled:m,className:"text-red-600 hover:text-red-800 hover:bg-red-50",children:[e.jsx(y,{className:"w-4 h-4 mr-2"}),m?"Deleting...":"Delete"]})})]})})]})})},s.id))})]})}),e.jsx(Q,{open:T,onOpenChange:v,id:L,title:"Delete concern",routeLink:"admin.deleteConcern",description:"This will permanently delete the concern and remove all associated data",toastMessage:"Delete successfully",buttonTitle:"Confirm",type:"delete",additionalInfo:["Concern will get deleted"]})]})}export{Me as default};
