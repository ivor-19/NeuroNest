import{K as M,r as B,j as e,L,S as j,t as x}from"./app-BEbjV-qD.js";import{B as h}from"./button-BFIxZE2G.js";import{C as o,c as n,B as b}from"./badge-1PRfllFz.js";import{P as N}from"./progress-CUSsvvaI.js";import{H as S}from"./header-layout-C9SVBNPE.js";import{A as $,C as u}from"./circle-alert-CEAiE0WY.js";import{B as p}from"./book-open-CNJuXK_a.js";import{C as g}from"./circle-check-big-DHQfFkrl.js";import{A as v}from"./award-Di-6Qqkb.js";import{c as w}from"./graduation-cap-DBR4dBR6.js";import{D as E}from"./download-D-lUU2iY.js";import{S as T}from"./star-C9y132ik.js";import{F as _}from"./file-text-3rLYZG9c.js";import"./user-menu-content-DlH-7vNY.js";import"./x-DOD-r5bm.js";import"./index-BLOCFgQD.js";import"./index-BzPx2h8Y.js";import"./app-logo-icon-CE-0d2V8.js";import"./index-CVrP-aBt.js";import"./menu-C9nPqZmD.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],y=w("Lock",z);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],V=w("Video",P);function de({subject:d,modules:i}){const{auth:k}=M().props,[l,I]=B.useState(!0),a=i.filter(s=>s.isActive),c=a.filter(s=>s.isDone).length,m=a.length>0?c/a.length*100:0,t=i.filter(s=>!s.isActive).length,C=s=>{switch(s){case"video":return e.jsx(V,{className:"h-3 w-3"});case"reading":return e.jsx(_,{className:"h-3 w-3"});case"quiz":return e.jsx(T,{className:"h-3 w-3"});default:return e.jsx(p,{className:"h-3 w-3"})}},D=async s=>{j.post(route("student.moduleCompletion"),{student_id:k.user.id,module_id:s},{onSuccess:()=>{x.success("Module Completed")},onError:()=>{x.error("Error has occured. Try again.")}})},A=async s=>{try{window.location.href=route("student.moduleDownload",{id:s}),setTimeout(()=>{x.success("Module download started")},500)}catch(f){console.error("Download failed",f),x.error("Download failed. Please try again.")}};return e.jsxs(S,{children:[e.jsx(L,{title:d.title}),e.jsx("div",{className:"min-h-screen mt-14",children:e.jsxs("div",{className:"px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs(h,{variant:"ghost",onClick:()=>j.visit(route("student.dashboard")),className:"mb-8 hover:bg-accent",children:[e.jsx($,{className:"h-4 w-4 mr-2"}),"Back to Dashboard"]}),e.jsxs("div",{className:"mb-10",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-8 items-start",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsxs("div",{className:"relative overflow-hidden rounded-xl border border-border bg-muted",children:[e.jsx("img",{src:`/public/storage/${d.image}`,alt:`${d.title} subject title`,className:"w-full lg:w-80 h-48 object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/20 to-transparent"})]})}),e.jsxs("div",{className:"flex-1 space-y-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground mb-3",children:d.title}),e.jsx("p",{className:"text-base text-muted-foreground max-w-4xl leading-relaxed",children:d.description})]}),e.jsxs("div",{className:"flex flex-wrap gap-4 pt-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(p,{className:"h-4 w-4"}),e.jsxs("span",{children:[i.length," Modules"]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(g,{className:"h-4 w-4"}),e.jsxs("span",{children:[c," Completed"]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(v,{className:"h-4 w-4"}),e.jsx("span",{children:"Certificate Available"})]})]})]})]})}),l&&a.length>0&&e.jsx(o,{className:"border border-border bg-card shadow-sm",children:e.jsxs(n,{className:"py-4 px-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-lg font-semibold text-card-foreground",children:"Course Progress"}),e.jsxs("p",{className:"text-muted-foreground text-sm",children:[c," of ",a.length," available modules completed"]}),t>0&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(u,{className:"h-4 w-4 text-amber-500"}),e.jsxs("p",{className:"text-xs text-amber-600 dark:text-amber-400",children:[t," modules currently disabled by instructor"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-3xl font-bold text-primary mb-1",children:[Math.round(m),"%"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Complete"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{value:m,className:"h-3"}),e.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[e.jsx("span",{children:"Started"}),e.jsx("span",{children:"Completed"})]})]})]})})]}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-semibold text-foreground",children:"Course Content"}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[e.jsxs(b,{variant:"secondary",className:"font-normal",children:[a.length," Available"]}),t>0&&e.jsxs(b,{variant:"outline",className:"font-normal border-amber-200 text-amber-700 dark:border-amber-800 dark:text-amber-300",children:[t," Disabled"]})]})]}),i.length>0?e.jsx("div",{className:"space-y-4",children:i.map((s,f)=>{const r=!s.isActive;return e.jsx(o,{className:`transition-all duration-200 ${r?"border-border bg-muted/30 opacity-70":s.isDone?"border-green-200 dark:border-green-800 bg-green-50/50 dark:bg-green-950/20 hover:shadow-lg":l?"border-border bg-card hover:border-primary/20 hover:shadow-lg":"border-border bg-card"}`,children:e.jsx(n,{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-start gap-6",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center text-xs font-semibold ${r?"bg-muted text-muted-foreground":s.isDone?"bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-300":l?"bg-primary/10 text-primary":"bg-muted text-muted-foreground"}`,children:r?e.jsx(y,{className:"h-5 w-5"}):s.isDone?e.jsx(g,{className:"h-5 w-5"}):l?e.jsx("span",{children:f+1}):e.jsx(y,{className:"h-5 w-5"})})}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1 space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:`font-semibold ${r?"text-muted-foreground":"text-card-foreground"}`,children:s.title}),r&&e.jsxs(b,{variant:"outline",className:"border-amber-200 dark:border-amber-800 text-amber-700 dark:text-amber-300",children:[e.jsx(u,{className:"h-3 w-3 mr-1"}),"Disabled"]}),s.isDone&&e.jsxs(b,{variant:"outline",className:"border-green-200 dark:border-green-800 text-green-700 dark:text-green-300",children:[e.jsx(g,{className:"h-3 w-3 mr-1"}),"Completed"]})]}),e.jsx("p",{className:`text-sm leading-relaxed ${r?"text-muted-foreground/70":"text-muted-foreground"}`,children:s.description}),e.jsxs("div",{className:`flex items-center gap-6 text-sm ${r?"text-muted-foreground/70":"text-muted-foreground"}`,children:[s.type&&e.jsxs("div",{className:"flex items-center gap-2",children:[C(s.type),e.jsx("span",{className:"capitalize font-medium",children:s.type})]}),s.lessons&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(p,{className:"h-3 w-3"}),e.jsxs("span",{children:[s.lessons," lessons"]})]})]}),r&&e.jsxs("div",{className:"flex items-start gap-2 p-3 rounded-lg bg-amber-50 dark:bg-amber-950/20 border border-amber-200 dark:border-amber-800",children:[e.jsx(u,{className:"h-4 w-4 text-amber-600 dark:text-amber-400 mt-0.5 flex-shrink-0"}),e.jsx("p",{className:"text-xs text-amber-700 dark:text-amber-300",children:"This module has been temporarily disabled by your instructor and will become available when enabled."})]})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0 flex-col",children:[l&&!r&&e.jsx(h,{size:"default",variant:s.isDone?"outline":"default",className:"min-w-[100px]",onClick:()=>A(s.id),children:e.jsx(E,{className:"h-4 w-4"})}),r&&e.jsx(h,{size:"default",variant:"ghost",disabled:!0,className:"min-w-[100px]",children:"Unavailable"}),!s.isDone&&!r&&e.jsx(h,{variant:"ghost",className:"text-xs text-muted-foreground",onClick:()=>D(s.id),children:"mark as complete"})]})]})})]})})},s.id)})}):e.jsx(o,{className:"border border-border bg-card",children:e.jsxs(n,{className:"text-center py-16",children:[e.jsx(p,{className:"mx-auto h-16 w-16 text-muted-foreground/50 mb-6"}),e.jsx("h3",{className:"text-xl font-semibold mb-3 text-card-foreground",children:"No modules available"}),e.jsx("p",{className:"text-muted-foreground max-w-md mx-auto",children:"There are no modules for this subject in your course. Check back later or contact your instructor."})]})})]}),t>0&&e.jsx(o,{className:"mt-8 border-amber-200 dark:border-amber-800 bg-amber-50 dark:bg-amber-950/20",children:e.jsx(n,{className:"p-6",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx(u,{className:"h-6 w-6 text-amber-600 dark:text-amber-400 mt-1 flex-shrink-0"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-base font-semibold text-amber-800 dark:text-amber-200",children:"Some modules are currently disabled"}),e.jsxs("p",{className:"text-amber-700 dark:text-amber-300 leading-relaxed text-sm",children:["Your instructor has temporarily disabled ",t," module",t!==1?"s":""," ","for your section. These will become available when your instructor enables them. You can continue with the available modules in the meantime."]})]})]})})}),l&&a.length>0&&m<100&&e.jsx(o,{className:"mt-10 border border-border bg-gradient-to-br from-primary/5 to-primary/10 dark:from-primary/10 dark:to-primary/5",children:e.jsx(n,{className:"p-8 text-center",children:e.jsxs("div",{className:"max-w-lg mx-auto space-y-6",children:[e.jsx("div",{className:"w-16 h-16 mx-auto bg-primary/10 rounded-full flex items-center justify-center",children:e.jsx(v,{className:"h-8 w-8 text-primary"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-xl font-semibold text-card-foreground",children:"Complete your course to earn a certificate"}),e.jsx("p",{className:"text-muted-foreground",children:"You're making great progress! Complete all available modules to earn your course completion certificate."})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(N,{value:m,className:"h-2"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[c," of ",a.length," available modules completed"]})]})]})})})]})})]})}export{de as default};
