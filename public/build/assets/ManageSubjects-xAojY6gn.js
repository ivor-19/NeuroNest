import{K as Je,r as c,m as he,j as e,L as We,S as j,t as F}from"./app-BvpEPsT4.js";import{C as S,c as k,a as ue,b as je,B as D}from"./badge-us5mml-u.js";import{B as i}from"./button-BoGNpTR7.js";import{I as v}from"./input-D1u5nafe.js";import{L as r}from"./label-B_6kw6dw.js";import{T as H}from"./textarea-BZ0hNsW5.js";import{S as N,a as b,b as y,c as w,d as t}from"./select-CAfjgYpq.js";import{T as Ze,a as es,b as pe,c as ge}from"./tabs-CaMylWJV.js";import{S as fe}from"./separator-BQrko_3v.js";import{A as q,a as G,b as Q,c as K,d as ve,e as Ne,f as be,g as ye}from"./alert-dialog-ChYCrvx0.js";import{A as ss,L as V}from"./app-layout-CgbLZQOp.js";import{P as as}from"./placeholder-pattern-D7whIfWC.js";import{S as ls}from"./switch-BfhvlhNP.js";import{B as E,C as ts}from"./user-menu-content-DDh1KBRP.js";import{F as rs}from"./file-text-COPRG0og.js";import{S as cs}from"./search-BVHFt-QL.js";import{F as ds}from"./filter-CT0n08C1.js";import{P as L}from"./plus-D7wcEsbX.js";import{G as is}from"./graduation-cap-COL4Gqda.js";import{T as X}from"./trash-2-DovL0SbP.js";import{c as ke}from"./createLucideIcon-BZ3acAQT.js";import{X as we}from"./x-BKNS27J4.js";import{S as ns}from"./square-pen-CONasfRr.js";import{B as os}from"./book-D3350Ajz.js";import{T as ms}from"./triangle-alert-yxIhqK7w.js";import{U as Ce}from"./unlink-CgujCG9-.js";import"./index-CFy-E_yB.js";import"./index-sthodwvm.js";import"./index-D_luZu-D.js";import"./chevron-down-CQNGAwgK.js";import"./check-DfGTaj0p.js";import"./users-CCkkqxmu.js";import"./mail-Bevo95n5.js";import"./app-logo-icon-ivltJW1x.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xs=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],hs=ke("Loader",xs);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const us=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],Se=ke("Upload",us),js=[{title:"Manage Students",href:"admin/manage-subjects"}];function Js({subjects:C}){const{auth:A}=Je().props,[Ae,J]=c.useState("subjects"),[W,Z]=c.useState("all"),[p,ee]=c.useState(""),[I,m]=c.useState(!1),se=c.useRef(null),ae=c.useRef(null),{data:x,setData:g,post:Me,processing:le,errors:h,reset:Fe}=he({code:"",title:"",description:"",year_level:"",semester:"",isActive:"",image:null}),{data:o,setData:T,processing:te,reset:De}=he({title:"",subject_id:"",creator_id:A.user.id,status:"",description:"",order:""}),O=C.flatMap(s=>s.modules||[]),[re,B]=c.useState(null),[Y,P]=c.useState(null),[ce,U]=c.useState(null),Ee=s=>{const l=s.target.files[0];if(l){g("image",l);const d=new FileReader;d.onload=M=>B(M.target.result),d.readAsDataURL(l)}},Le=s=>{var d;const l=(d=s.target.files)==null?void 0:d[0];if(l){U(l);const M=new FileReader;M.onload=Xe=>{var xe;return P((xe=Xe.target)==null?void 0:xe.result)},M.readAsDataURL(l)}},Te=()=>{U(null),P(null),f({...a,image:""})},_e=()=>{g("image",null),B(null)},Ie=async s=>{s.preventDefault(),Me(route("admin.addSubject"),{forceFormData:!0,onSuccess:()=>{F.success(`Subject added: ${x.code}`),Fe(),m(!1),B(null),console.log("Success: ",x)},onError:l=>{console.error("Error occurred",l)}})},[de,ie]=c.useState(null),Pe=async s=>{s.preventDefault();const l=new FormData;l.append("subject_id",o.subject_id),l.append("creator_id",A.user.id.toString()),l.append("title",o.title),l.append("description",o.description),l.append("status",o.status),l.append("order",o.order),de&&l.append("pdf",de),j.post(route("admin.addModule"),l,{onSuccess:()=>{De(),m(!1),ie(null),console.log("Module added successfully!"),j.post(route("admin.addActivity"),{type:"create",user:A.user.name,action:"Created a new module",details:`${o.title}`},{})},onError:d=>{console.error("Error occurred:",d)}})},ne=(s=>{if(s==="all")return O;const l=C.find(d=>d.code===s);return l?l.modules||[]:[]})(W).filter(s=>s.title.toLowerCase().includes(p.toLowerCase())),oe=C.filter(s=>s.title.toLowerCase().includes(p.toLowerCase())||s.code.toLowerCase().includes(p.toLowerCase())),Re=O.length,$e=O.filter(s=>s.status==="published").length,Ve=C.filter(s=>s.isActive).length,[Oe,R]=c.useState(!1),[Be,$]=c.useState(!1),[u,Ye]=c.useState(null),Ue=async()=>{j.delete(route("admin.deleteSubject",u==null?void 0:u.id),{onSuccess:()=>{$(!1),F.info(`Subject: ${u==null?void 0:u.code} is deleted.`),j.post(route("admin.addActivity"),{type:"delete",user:A.user.name,action:"Delete a subject",details:`${u==null?void 0:u.title}`},{})},onError:s=>{console.error("Error occured",s),$(!1)}})},[n,ze]=c.useState(null),He=async()=>{j.delete(route("admin.deleteModule",n==null?void 0:n.id),{onSuccess:()=>{R(!1),F.info(`Removed ${n==null?void 0:n.title}`),j.post(route("admin.addActivity"),{type:"delete",user:A.user.name,action:"Delete a module",details:`${n==null?void 0:n.title}`},{})},onError:s=>{console.error("Error occured",s),R(!1)}})},[qe,_]=c.useState(!1),[a,f]=c.useState(null),[me,z]=c.useState(!1),Ge=async s=>{_(!0),f(s),P(s.image?`/storage/${s.image}`:null)},Qe=async s=>{var d;z(!0);const l=new FormData;l.append("code",(a==null?void 0:a.code)||""),l.append("title",(a==null?void 0:a.title)||""),l.append("description",(a==null?void 0:a.description)||""),l.append("year_level",((d=a==null?void 0:a.year_level)==null?void 0:d.toString())||""),l.append("semester",(a==null?void 0:a.semester)||""),ce?l.append("image",ce):(a==null?void 0:a.image)===""&&l.append("image",""),j.post(route("admin.updateSubject",s),l,{headers:{"Content-Type":"multipart/form-data"},onSuccess:()=>{F.success("Subject updated successfully"),f(null),_(!1),z(!1),P(null),U(null),j.post(route("admin.addActivity"),{type:"edit",user:A.user.name,action:"Updated subject",details:`${a==null?void 0:a.title} modified`},{})},onError:M=>{console.error(M),z(!1),F.success("There is a problem updating the subject. Try again."),_(!1)}})},Ke=s=>{J("modules"),Z(s),ee("")};return e.jsxs(ss,{breadcrumbs:js,children:[e.jsx(We,{title:"Subject Management"}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-6 rounded-xl overflow-x-auto p-8 bg-[var(--bg-main)]",children:[e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Subject Management"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your academic subjects and learning modules efficiently."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(S,{children:e.jsx(k,{className:"p-6",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(E,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium leading-none",children:"Active Subjects"}),e.jsx("p",{className:"text-2xl font-bold",children:Ve})]})]})})}),e.jsx(S,{children:e.jsx(k,{className:"p-6",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(V,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium leading-none",children:"Total Modules"}),e.jsx("p",{className:"text-2xl font-bold",children:Re})]})]})})}),e.jsx(S,{children:e.jsx(k,{className:"p-6",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(rs,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium leading-none",children:"Published"}),e.jsx("p",{className:"text-2xl font-bold",children:$e})]})]})})})]}),e.jsx(S,{children:e.jsxs(k,{className:"space-y-2",children:[e.jsxs("div",{className:"relative",children:[e.jsx(cs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(v,{placeholder:"Search subjects and modules...",className:"pl-10",value:p,onChange:s=>ee(s.target.value)})]}),e.jsxs(Ze,{value:Ae,onValueChange:J,className:"space-y-2",children:[e.jsxs(es,{className:"grid w-full grid-cols-2 ",children:[e.jsxs(pe,{value:"subjects",className:"flex items-center gap-2 cursor-pointer",onClick:()=>m(!1),children:[e.jsx(E,{className:"h-4 w-4"})," Subjects"]}),e.jsxs(pe,{value:"modules",className:"flex items-center gap-2 cursor-pointer",onClick:()=>m(!1),children:[e.jsx(V,{className:"h-4 w-4"}),"Modules"]})]}),e.jsx(ge,{value:"modules",className:"space-y-6",children:e.jsxs(S,{children:[e.jsx(ue,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(je,{className:"flex items-center gap-2",children:[e.jsx(V,{className:"h-5 w-5"})," Learning Modules"]}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Manage and organize your course modules"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(N,{value:W,onValueChange:Z,children:[e.jsxs(b,{className:"min-w-48",children:[e.jsx(ds,{className:"h-4 w-4 mr-2"}),e.jsx(y,{placeholder:"Filter by subject"})]}),e.jsxs(w,{children:[e.jsx(t,{value:"all",children:"All"}),C.map(s=>e.jsxs(t,{value:s.code,children:[s.code," - ",s.title]},s.code))]})]}),e.jsxs(i,{onClick:()=>m(!I),children:[e.jsx(L,{className:"h-4 w-4 mr-2"}),"Add Module"]})]})]})}),e.jsxs(k,{className:"space-y-6",children:[I&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-4 p-6 border rounded-lg bg-muted/50",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(L,{className:"h-4 w-4"}),e.jsx("h3",{className:"font-semibold",children:"Add New Module"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"module-title",children:"Module Title"}),e.jsx(v,{id:"module-title",value:o.title,onChange:s=>T("title",s.target.value),placeholder:"Enter module title"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"module-subject",children:"Subject"}),e.jsxs(N,{value:o.subject_id,onValueChange:s=>T("subject_id",s),children:[e.jsx(b,{children:e.jsx(y,{placeholder:"Select subject"})}),e.jsx(w,{children:C.map(s=>e.jsxs(t,{value:String(s.id),children:[s.code," - ",s.title]},s.id))})]})]}),e.jsxs("div",{className:"space-y-2 md:col-span-2",children:[e.jsx(r,{htmlFor:"module-description",children:"Description"}),e.jsx(H,{id:"module-description",value:o.description,onChange:s=>T("description",s.target.value),placeholder:"Describe the module content and objectives",rows:3})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"module-order",children:"Module Order"}),e.jsx(v,{id:"module-order",type:"number",value:o.order,onChange:s=>T("order",s.target.value),placeholder:"1, 2, 3..."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"module-status",children:"Status"}),e.jsxs(N,{value:o.status,onValueChange:s=>T("status",s),children:[e.jsx(b,{children:e.jsx(y,{placeholder:"Select status"})}),e.jsxs(w,{children:[e.jsx(t,{value:"published",children:"Published"}),e.jsx(t,{value:"draft",children:"Draft"})]})]})]}),e.jsxs("div",{className:"space-y-2 md:col-span-2",children:[e.jsx(r,{htmlFor:"module-file",children:"PDF File"}),e.jsx(v,{type:"file",accept:".pdf",onChange:s=>{var l;return ie(((l=s.target.files)==null?void 0:l[0])||null)}})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(i,{onClick:Pe,disabled:te,children:te?"Creating...":"Create Module"}),e.jsx(i,{variant:"outline",onClick:()=>m(!1),children:" Cancel"})]})]}),e.jsx(fe,{})]}),e.jsx("div",{className:"space-y-4",children:ne.length>0?ne.map(s=>{const l=C.find(d=>d.id===s.subject_id);return e.jsx("div",{className:"border rounded-lg p-4 hover:bg-muted/50 transition-colors",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"space-y-2 flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"font-semibold",children:s.title}),l&&e.jsx(D,{variant:"outline",children:l.code}),e.jsxs(D,{variant:"secondary",children:["Module ",s.order]}),e.jsx(D,{variant:s.status==="published"?"default":"secondary",children:s.status})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.description}),l&&e.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(is,{className:"h-3 w-3"})," Year ",l.year_level]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ts,{className:"h-3 w-3"})," Semester ",l.semester]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(E,{className:"h-3 w-3"})," ",l.title]})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(i,{variant:"ghost",size:"sm",onClick:()=>{R(!0),ze(s)},children:e.jsx(X,{className:"h-4 w-4"})})})]})},s.id)}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(V,{className:"h-12 w-12 mx-auto text-muted-foreground/50 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No modules found"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:p?"Try adjusting your search terms":"Create your first learning module to get started"}),!p&&e.jsxs(i,{onClick:()=>m(!0),children:[e.jsx(L,{className:"h-4 w-4 mr-2"}),"  Add Module"]})]})})]})]})}),e.jsx(ge,{value:"subjects",className:"space-y-6",children:e.jsxs(S,{children:[e.jsx(ue,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(je,{className:"flex items-center gap-2",children:[e.jsx(E,{className:"h-5 w-5"})," Academic Subjects"]}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Organize your curriculum and course structure"})]}),e.jsxs(i,{onClick:()=>m(!I),children:[e.jsx(L,{className:"h-4 w-4 mr-2"})," Add Subject"]})]})}),e.jsxs(k,{className:"space-y-6",children:[I&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-4 p-6 border rounded-lg bg-muted/50",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(L,{className:"h-4 w-4"}),e.jsx("h3",{className:"font-semibold",children:"Add New Subject"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"subject-code",children:"Subject Code"}),e.jsx(v,{id:"subject-code",value:x.code,onChange:s=>g("code",s.target.value),placeholder:"e.g. CS101, MATH201"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"subject-title",children:"Subject Title"}),e.jsx(v,{id:"subject-title",value:x.title,onChange:s=>g("title",s.target.value),placeholder:"Enter subject title"})]}),e.jsxs("div",{className:"space-y-2 md:col-span-2",children:[e.jsx(r,{htmlFor:"subject-description",children:"Description"}),e.jsx(H,{id:"subject-description",value:x.description,onChange:s=>g("description",s.target.value),placeholder:"Describe the subject objectives and content",rows:3})]}),e.jsxs("div",{className:"space-y-2 md:col-span-2",children:[e.jsx(r,{htmlFor:"subject-image",children:"Subject Image"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("input",{ref:se,type:"file",id:"subject-image",accept:"image/*",onChange:Ee,className:"hidden"}),e.jsxs(i,{type:"button",variant:"outline",onClick:()=>{var s;return(s=se.current)==null?void 0:s.click()},className:"flex items-center gap-2",children:[e.jsx(Se,{className:"h-4 w-4"}),"Choose Image"]}),re&&e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:re||"/placeholder.svg",alt:"Preview",className:"h-16 w-16 object-cover rounded-md border"}),e.jsx("button",{type:"button",onClick:_e,className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1 hover:bg-red-600",children:e.jsx(we,{className:"h-3 w-3"})})]})]}),x.image&&e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Selected: ",x.image]}),h.image&&e.jsx("p",{className:"text-sm font-medium text-destructive",children:h.image})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"subject-year",children:"Year Level"}),e.jsxs(N,{value:x.year_level,onValueChange:s=>g("year_level",s),children:[e.jsx(b,{children:e.jsx(y,{placeholder:"Select year"})}),e.jsxs(w,{children:[e.jsx(t,{value:"1",children:"1st Year"}),e.jsx(t,{value:"2",children:"2nd Year"}),e.jsx(t,{value:"3",children:"3rd Year"}),e.jsx(t,{value:"4",children:"4th Year"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"subject-semester",children:"Semester"}),e.jsxs(N,{value:x.semester,onValueChange:s=>g("semester",s),children:[e.jsx(b,{children:e.jsx(y,{placeholder:"Select semester"})}),e.jsxs(w,{children:[e.jsx(t,{value:"1st",children:"1st Semester"}),e.jsx(t,{value:"2nd",children:"2nd Semester"}),e.jsx(t,{value:"Summer",children:"Summer"})]})]})]}),e.jsxs("div",{className:"space-y-2 md:col-span-2",children:[e.jsx(r,{htmlFor:"subject-status",children:"Status"}),e.jsxs(N,{value:x.isActive,onValueChange:s=>g("isActive",s),children:[e.jsx(b,{children:e.jsx(y,{placeholder:"Select status"})}),e.jsxs(w,{children:[e.jsx(t,{value:"1",children:"Active"}),e.jsx(t,{value:"0",children:"Inactive"})]})]})]})]}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx(i,{onClick:Ie,disabled:le,children:le?"Creating...":"Create Subject"}),e.jsx(i,{variant:"outline",onClick:()=>m(!1),children:"Cancel"}),h.code&&e.jsx("p",{className:"text-sm font-medium text-destructive",children:h.code}),(h.code||h.title||h.year_level||h.semester||h.isActive)&&e.jsx("p",{className:"text-sm font-medium text-destructive",children:"Complete all fields"})]})]}),e.jsx(fe,{})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:oe.map(s=>e.jsx(S,{className:"hover:bg-muted/50 transition-colors",children:e.jsxs(k,{className:"p-2 flex flex-col gap-4",children:[e.jsxs("div",{className:"w-full h-48 relative",children:[s.image?e.jsx("img",{src:`/storage/${s.image}`,alt:`${s.title} subject title`,className:"w-full h-full object-cover"}):e.jsxs("div",{className:"relative h-full rounded-xl border border-sidebar-border/70 dark:border-sidebar-border",children:[e.jsx(as,{className:"w-full h-full stroke-neutral-900/20 dark:stroke-neutral-100/20"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-muted-foreground",children:"No image available"})]}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/20 to-transparent"})]}),e.jsxs("div",{className:"px-2",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("h3",{className:"font-semibold",children:s.title}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.code})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ls,{checked:s.isActive,onCheckedChange:l=>{j.post(route("admin.subjectAvailability",s.id),{isActive:l},{onSuccess:()=>{F.success("Subject status updated")},onError:d=>{console.error("Error updating status",d)}})},className:"data-[state=checked]:bg-emerald-600 dark:data-[state=checked]:bg-emerald-500 cursor-pointer"}),e.jsx(i,{variant:"ghost",size:"sm",onClick:()=>Ge(s),children:e.jsx(ns,{className:"h-4 w-4"})}),e.jsx(i,{variant:"ghost",size:"sm",onClick:()=>{$(!0),Ye(s)},children:e.jsx(X,{className:"h-4 w-4"})})]})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:s.description}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(D,{variant:"outline",children:["Year ",s.year_level]}),e.jsxs(D,{variant:"outline",children:["Sem ",s.semester]}),e.jsx(D,{variant:s.isActive?"default":"secondary",children:s.isActive?"Active":"Inactive"}),e.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[e.jsx(E,{className:"h-4 w-4"}),(s.modules||[]).length," modules"]})]}),e.jsx("div",{className:"flex items-center gap-1 text-xs text-muted-foreground cursor-pointer hover:text-primary transition-colors",onClick:()=>Ke(s.code),children:"View all"})]})]})]})},s.id))}),oe.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(E,{className:"h-12 w-12 mx-auto text-muted-foreground/50 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No subjects found"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:p?"Try adjusting your search terms":"Create your first subject to start building your curriculum"}),!p&&e.jsxs(i,{onClick:()=>m(!0),children:[e.jsx(L,{className:"h-4 w-4 mr-2"})," Add Subject"]})]})]})]})})]})]})}),e.jsx(q,{open:qe,onOpenChange:_,children:e.jsxs(G,{className:"sm:max-w-[500px]",children:[e.jsx(Q,{children:e.jsxs(K,{className:"flex items-center gap-2",children:[e.jsx(os,{className:"h-5 w-5"}),"Edit Subject"]})}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"edit-code",children:"Code"}),e.jsx(v,{id:"subjectCode",value:(a==null?void 0:a.code)||"",onChange:s=>f({...a,code:s.target.value}),placeholder:"Enter course code"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"edit-name",children:"Title"}),e.jsx(v,{id:"subjectTitle",value:(a==null?void 0:a.title)||"",onChange:s=>f({...a,title:s.target.value}),placeholder:"Enter course name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"edit-description",children:"Description"}),e.jsx(H,{id:"subjectDescription",value:(a==null?void 0:a.description)||"",onChange:s=>f({...a,description:s.target.value}),placeholder:"Enter course description"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Subject Image"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("input",{ref:ae,type:"file",accept:"image/*",onChange:Le,className:"hidden"}),e.jsxs(i,{type:"button",variant:"outline",onClick:()=>{var s;return(s=ae.current)==null?void 0:s.click()},className:"flex items-center gap-2",children:[e.jsx(Se,{className:"h-4 w-4"}),"Change Image"]}),Y&&e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:Y||"/placeholder.svg",alt:"Preview",className:"h-16 w-16 object-cover rounded-md border"}),e.jsx("button",{type:"button",onClick:Te,className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1 hover:bg-red-600",children:e.jsx(we,{className:"h-3 w-3"})})]})]}),!Y&&(a==null?void 0:a.image)&&e.jsx("div",{className:"relative mt-2",children:e.jsx("img",{src:`/storage/${a.image}`,alt:"Current subject image",className:"h-16 w-16 object-cover rounded-md border"})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"edit-status",children:"Year Level"}),e.jsxs(N,{value:a==null?void 0:a.year_level.toString(),onValueChange:s=>{f({...a,year_level:s})},children:[e.jsx(b,{children:e.jsx(y,{placeholder:"Select Year Level"})}),e.jsxs(w,{children:[e.jsx(t,{value:"1",children:"1"}),e.jsx(t,{value:"2",children:"2"}),e.jsx(t,{value:"3",children:"3"}),e.jsx(t,{value:"4",children:"4"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"edit-status",children:"Semester"}),e.jsxs(N,{value:a==null?void 0:a.semester,onValueChange:s=>{f({...a,semester:s})},children:[e.jsx(b,{children:e.jsx(y,{placeholder:"Select Semester"})}),e.jsxs(w,{children:[e.jsx(t,{value:"1st",children:"1st"}),e.jsx(t,{value:"2nd",children:"2nd"}),e.jsx(t,{value:"Summer",children:"Summmer"})]})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(i,{variant:"outline",onClick:()=>_(!1),children:"Cancel"}),e.jsx(i,{onClick:()=>Qe(a.id),disabled:me,children:me?e.jsxs("div",{className:"flex items-center gap-2",children:["Saving ",e.jsx(hs,{className:"animate-spin h-4 w-4"})]}):"Save Changes"})]})]})}),e.jsx(q,{open:Be,onOpenChange:$,children:e.jsxs(G,{className:"max-w-md",children:[e.jsx(Q,{className:"space-y-4",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-red-100 rounded-full dark:bg-red-900/20 flex-shrink-0",children:e.jsx(ms,{className:"w-6 h-6 text-red-600 dark:text-red-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx(K,{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Delete Subject"}),e.jsx(ve,{className:"text-sm text-gray-600 dark:text-gray-400",children:"Are you absolutely sure you want to delete this subject?"})]})]})}),e.jsx("div",{className:"my-4",children:e.jsx("div",{className:"rounded-lg border border-red-200 bg-red-50 p-4 dark:border-red-800/30 dark:bg-red-900/10",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full mt-2"})}),e.jsx("p",{className:"text-sm font-medium text-red-800 dark:text-red-200",children:"This action cannot be undone"})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full mt-2"})}),e.jsx("p",{className:"text-sm text-red-700 dark:text-red-300",children:"This will permanently remove all associated data and relationships"})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full mt-2"})}),e.jsx("p",{className:"text-sm text-red-700 dark:text-red-300",children:"All modules associated with this subject will also get deleted"})]})]})})}),e.jsxs(Ne,{className:"gap-2 sm:gap-2",children:[e.jsx(be,{className:"flex-1 sm:flex-none",children:"Cancel"}),e.jsxs(ye,{onClick:Ue,className:"flex-1 sm:flex-none bg-red-600 text-white hover:bg-red-700 focus:ring-2 focus:ring-red-500 focus:ring-offset-2 dark:bg-red-600 dark:hover:bg-red-700 gap-2 font-medium",children:[e.jsx(X,{className:"h-4 w-4"}),"Delete Subject"]})]})]})}),e.jsx(q,{open:Oe,onOpenChange:R,children:e.jsxs(G,{className:"max-w-md",children:[e.jsx(Q,{className:"space-y-4",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-amber-100 rounded-full dark:bg-amber-900/20 flex-shrink-0",children:e.jsx(Ce,{className:"w-6 h-6 text-amber-600 dark:text-amber-400"})}),e.jsxs("div",{className:" flex-1",children:[e.jsx(K,{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Remove module from a subject?"}),e.jsx(ve,{className:"text-sm text-gray-600 dark:text-gray-400",children:"This will remove the module from the subject. The module itself will not be deleted."})]})]})}),e.jsx("div",{className:"my-4",children:e.jsx("div",{className:"rounded-lg border border-amber-200 bg-amber-50 p-4 dark:border-amber-800/30 dark:bg-amber-900/10",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-2 h-2 bg-amber-500 rounded-full mt-2"})}),e.jsx("p",{className:"text-sm font-medium text-amber-800 dark:text-amber-200",children:`${n==null?void 0:n.title} will be unlinked from this subject`})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-2 h-2 bg-amber-500 rounded-full mt-2"})}),e.jsx("p",{className:"text-sm text-amber-700 dark:text-amber-300",children:"You can re-add the module to this subject later if needed"})]})]})})}),e.jsxs(Ne,{className:"gap-2 sm:gap-2",children:[e.jsx(be,{className:"flex-1 sm:flex-none",children:"Cancel"}),e.jsxs(ye,{onClick:He,className:"flex-1 sm:flex-none bg-amber-600 text-white hover:bg-amber-700 focus:ring-2 focus:ring-amber-500 focus:ring-offset-2 dark:bg-amber-600 dark:hover:bg-amber-700 gap-2 font-medium",children:[e.jsx(Ce,{className:"h-4 w-4"}),"Remove Module"]})]})]})})]})]})}export{Js as default};
