import{r as f,j as e,L as de,S as oe,t as me}from"./app-BsLY6kB6.js";import{B as o}from"./button-CcI2b2NU.js";import{C as h,a as k,b as C,d as T,c as N,B as S}from"./badge-JLKvnr5t.js";import{R as xe,a as M}from"./radio-group-68sbiHED.js";import{L as A}from"./label-CqpE7WS6.js";import{T as Te}from"./textarea-CQIKzUml.js";import{I as ue}from"./input-C4kBYXLK.js";import{S as De}from"./separator-DJEBSVfi.js";import{P as he}from"./progress-Bwoq9wxI.js";import{S as pe,a as je,b as ge,c as be,d as $}from"./select-ChaKa2n5.js";import{A as P,h as Q,a as H,b as V,c as Y,d as z,e as E,f as O,g as R}from"./alert-dialog-DkzE5YcA.js";import{H as fe}from"./header-layout-liuNmkC1.js";import{A as U,a as G}from"./alert-DM8q2p40.js";import{C as p}from"./circle-check-big-DOYatK89.js";import{A as W,C as Ne}from"./circle-alert-Bqcd4atZ.js";import{T as ve}from"./triangle-alert-DGEKKSaC.js";import{F as v}from"./file-text-D81MHZsj.js";import{U as Le}from"./user-DKZcpu8t.js";import{B as ye,C as we}from"./user-menu-content-QMLj2xa5.js";import{F as Ie}from"./filter-BHrdYRvT.js";import{S as $e}from"./search-BvaoNOR3.js";import{c as Be}from"./createLucideIcon-CmAh11V1.js";import{P as Me}from"./play-BttdBJaU.js";import{S as Pe}from"./star-Bxkg9iIH.js";import"./index-B-Uu_4Og.js";import"./index-CC9Haw-T.js";import"./index-DolsK6my.js";import"./chevron-down-BZf60-1j.js";import"./check-7YfVtOb2.js";import"./app-logo-icon-C7QEiCKm.js";import"./menu-0Hxbg_V3.js";import"./x-BYyvnJYh.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qe=[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]],He=Be("Trophy",Qe);function bs({assessments:J,studentProfile:_}){var le,ne,ie,ce;const[n,Z]=f.useState(null),[m,D]=f.useState(0),[L,K]=f.useState({}),[X,q]=f.useState(!1),[y,ee]=f.useState(""),[j,se]=f.useState("all"),[w,te]=f.useState("all"),re=s=>{if(X)return"completed";const t=new Date,l=s.opened_at?new Date(s.opened_at):null,r=s.closed_at?new Date(s.closed_at):null;return s.is_available===0?"upcoming":r&&t>r?"overdue":l&&t<l?"upcoming":"available"},ke=[...new Set(J.map(s=>{var t,l;return((t=s.assessment.subject)==null?void 0:t.code)||((l=s.assessment.subject)==null?void 0:l.title)}))],Ce=["available","completed","overdue","upcoming"],F=J.filter(s=>{var c,d,g,x,b,u;const t=y.toLowerCase(),l=y===""||((c=s.assessment.subject)==null?void 0:c.title.toLowerCase().includes(t))||((g=(d=s.assessment.subject)==null?void 0:d.code)==null?void 0:g.toLowerCase().includes(t))||""||((x=s.assessment.subject)==null?void 0:x.title.toLowerCase().includes(t)),r=j==="all"||((b=s.assessment.subject)==null?void 0:b.code)===j||((u=s.assessment.subject)==null?void 0:u.title)===j,a=re(s);return l&&r&&(w==="all"||a===w)}),I=(s,t)=>{K(l=>({...l,[s]:t}))},Se=()=>{var l,r;const s=(r=(l=n==null?void 0:n.assessment)==null?void 0:l.questions)==null?void 0:r.map(a=>{var x,b;const i=L[a.id]||null;let c=i;if(a.type==="multiple_choice"&&i!==null){const u=(x=a.options)==null?void 0:x.findIndex(B=>B===i);c=u!==-1?u:i}if(a.type==="true_false"&&i!==null){const u=(b=a.options)==null?void 0:b.findIndex(B=>B===i);c=u!==-1?u:i}const d=Ae(a,c),g=d?a.points:0;return{assessment_id:n.assessment.id,question_correct_answer:a.correct_answer,question_id:a.id,student_id:_.student_id,answer:c,is_correct:d?1:0,points_earned:g,feedback:null}}),t=(s==null?void 0:s.reduce((a,i)=>a+(i.points_earned||0),0))||0;console.log("Assessment Answer Records:",s),oe.post(route("student.submitAssessment"),{responses:s},{onSuccess:()=>{me.success("Assessment Complete."),q(!0),console.log(t),oe.post(route("student.storeGrades",{assessment_id:n==null?void 0:n.assessment.id,student_id:_.student_id,score:t}))},onError:a=>{me.error("Error submitting. Please try again."),console.error(a)}})},Ae=(s,t)=>{var l,r;return s.type==="multiple-choice"||s.type==="true-false"?t===s.correct_answer:s.type==="short-answer"?(t==null?void 0:t.toLowerCase().trim())===((l=s.correct_answer)==null?void 0:l.toLowerCase().trim()):s.type==="essay"?(t==null?void 0:t.toLowerCase().trim())===((r=s.correct_answer)==null?void 0:r.toLowerCase().trim()):!1},ae=()=>{Z(null),D(0),K({}),q(!1)},_e=s=>{switch(s){case"available":return"bg-green-100 text-green-800 border-green-200";case"completed":return"bg-blue-100 text-blue-800 border-blue-200";case"overdue":return"bg-red-100 text-red-800 border-red-200";case"upcoming":return"bg-yellow-100 text-yellow-800 border-yellow-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},Fe=s=>{const t=L[s.id]||"";let l=[];if(s.options)try{Array.isArray(s.options)?l=s.options:l=JSON.parse(s.options)}catch(r){console.error("Failed to parse question options:",r),l=[]}switch(s.type){case"multiple-choice":return e.jsx("div",{className:"space-y-3",children:e.jsx(xe,{value:t==null?void 0:t.toString(),onValueChange:r=>I(s.id,r),children:l.map((r,a)=>{const i=Number(t)===a;return e.jsxs("div",{className:`flex items-center space-x-3 rounded-xl border-2 transition-all cursor-pointer${i?"border-primary bg-accent shadow-md":"border-border hover:border-primary/50 hover:bg-primary/5"}`,children:[e.jsx(M,{value:a.toString(),id:`option-${a}`,className:"mt-0.5 ml-4 bg-muted"}),e.jsx(A,{htmlFor:`option-${a}`,className:`cursor-pointer flex-1 text-sm leading-relaxed  p-4 ${i?"font-medium text-primary":""}`,children:r})]},a)})})});case"true-false":return e.jsx("div",{className:"space-y-3",children:e.jsxs(xe,{value:t==null?void 0:t.toString(),onValueChange:r=>I(s.id,r),children:[e.jsxs("div",{className:`flex items-center space-x-3 p-4 rounded-xl border-2 transition-all cursor-pointer ${t==="true"?"border-primary bg-primary/10 shadow-md":"border-border hover:border-primary/50 hover:bg-primary/5"}`,children:[e.jsx(M,{value:"true",id:"true"}),e.jsx(A,{htmlFor:"true",className:`cursor-pointer flex-1 text-sm font-medium ${t==="true"?"text-primary":""}`,children:"True"})]}),e.jsxs("div",{className:`flex items-center space-x-3 p-4 rounded-xl border-2 transition-all cursor-pointer ${t==="false"?"border-primary bg-primary/10 shadow-md":"border-border hover:border-primary/50 hover:bg-primary/5"}`,children:[e.jsx(M,{value:"false",id:"false"}),e.jsx(A,{htmlFor:"false",className:`cursor-pointer flex-1 text-sm font-medium ${t==="false"?"text-primary":""}`,children:"False"})]})]})});case"short-answer":return e.jsxs("div",{className:"space-y-3",children:[e.jsx(ue,{value:t,onChange:r=>I(s.id,r.target.value),placeholder:"Enter your answer...",className:`w-full text-sm p-4 border-2 rounded-xl transition-all ${t?"border-primary bg-primary/5 focus:border-primary":"border-border focus:border-primary"}`}),t&&e.jsxs("div",{className:"flex items-center gap-2 text-xs text-green-600",children:[e.jsx(p,{className:"h-3 w-3"}),"Answer provided"]})]});case"essay":return e.jsxs("div",{className:"space-y-3",children:[e.jsx(Te,{value:t,onChange:r=>I(s.id,r.target.value),placeholder:"Write your essay answer here...",className:`min-h-[250px] w-full text-sm p-4 border-2 resize-none rounded-xl transition-all ${t?"border-primary bg-primary/5 focus:border-primary":"border-border focus:border-primary"}`}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"text-xs text-muted-foreground",children:[t.length," characters"]}),t&&e.jsxs("div",{className:"flex items-center gap-2 text-xs text-green-600",children:[e.jsx(p,{className:"h-3 w-3"}),"Answer provided"]})]})]});default:return e.jsx("div",{children:"Unsupported question type"})}};if(X)return e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-6",children:e.jsxs(h,{className:"max-w-2xl mx-auto text-center",children:[e.jsxs(k,{className:"pb-8 pt-12",children:[e.jsx("div",{className:"flex justify-center mb-8",children:e.jsx("div",{className:"w-24 h-24 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx(p,{className:"h-14 w-14 text-green-600"})})}),e.jsx(C,{className:"text-3xl text-green-600 mb-4",children:"Assessment Submitted Successfully!"}),e.jsx(T,{className:"text-lg",children:"Your answers have been recorded and submitted for grading."})]}),e.jsxs(N,{className:"pb-12",children:[e.jsx("div",{className:"bg-muted rounded-xl p-6 mb-8 text-left",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"Assessment:"}),e.jsx("span",{className:"text-sm",children:n==null?void 0:n.assessment.title})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"Subject:"}),e.jsxs("span",{className:"text-sm",children:[(le=n==null?void 0:n.assessment.subject)==null?void 0:le.code," - ",(ne=n==null?void 0:n.assessment.subject)==null?void 0:ne.title]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"Submitted:"}),e.jsx("span",{className:"text-sm",children:new Date().toLocaleString()})]})]})}),e.jsx(o,{onClick:ae,size:"lg",className:"px-12 py-3 rounded-xl",children:"Back to Assessments"})]})]})});if(n){const s=n.assessment.questions||[],t=s[m],l=s.filter(a=>L[a.id]).length,r=s.length>0?l/s.length*100:0;return t?e.jsxs(fe,{children:[e.jsx(de,{title:n.assessment.title}),e.jsx("div",{className:"min-h-screen mt-16",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 flex flex-col gap-10",children:[e.jsx(h,{className:"shadow-lg",children:e.jsxs(k,{className:"pb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(P,{children:[e.jsx(Q,{asChild:!0,children:e.jsxs(o,{variant:"ghost",size:"sm",className:"flex items-center gap-2  h-8 text-xs lg:text-lg",children:[e.jsx(W,{className:"h-3 w-3"}),"Back"]})}),e.jsxs(H,{children:[e.jsxs(V,{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ve,{className:"w-5 h-5 text-amber-500"}),e.jsx(Y,{children:"Are you sure you want to go back?"})]}),e.jsx(z,{className:"",children:"Your progress might get unsaved. Any changes you've made will be lost if you continue without saving."})]}),e.jsxs(E,{children:[e.jsx(O,{children:"Stay on Page"}),e.jsx(R,{className:"bg-red-600 hover:bg-red-700",onClick:ae,children:"Yes, Go Back"})]})]})]}),e.jsx(De,{orientation:"vertical",className:"h-5"}),e.jsxs("div",{children:[e.jsx(C,{className:"text-xs lg:text-xl leading-tight",children:n.assessment.title}),e.jsxs(T,{className:"text-xs mt-0.5",children:[(ie=n.assessment.subject)==null?void 0:ie.code," - ",(ce=n.assessment.subject)==null?void 0:ce.title]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-2 sm:gap-4",children:[e.jsxs("div",{className:"flex items-center gap-1 px-3 py-1.5 rounded-lg border",children:[e.jsx(v,{className:"h-3 w-3 text-muted-foreground"}),e.jsx("span",{className:"text-xs lg:text-base font-medium",children:s.length}),e.jsx("span",{className:"text-xs lg:text-base text-muted-foreground",children:"questions"})]}),e.jsxs("div",{className:"flex items-center gap-1  px-3 py-1.5 rounded-lg border",children:[e.jsx(p,{className:"h-3 w-3 text-muted-foreground"}),e.jsx("span",{className:"text-xs lg:text-base font-medium",children:n.assessment.total_points}),e.jsx("span",{className:"text-xs lg:text-base text-muted-foreground",children:"points"})]})]})]}),e.jsxs("div",{className:" rounded-lg p-4 border",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3 sm:gap-0 mb-3",children:[e.jsx("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-3",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold",children:"Progress"}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[l,"/",s.length," completed"]})]})}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-right",children:e.jsxs("div",{className:`text-2xl font-bold leading-none ${r===100?"text-green-600":"text-primary"}`,children:[Math.round(r),"%"]})}),r===100&&e.jsxs("div",{className:"flex items-center gap-1.5 bg-green-100 text-green-700 px-3 py-1.5 rounded-lg border border-green-200",children:[e.jsx(p,{className:"h-3 w-3"}),e.jsx("span",{className:"font-medium text-xs",children:"Ready"})]})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(he,{value:r,className:`h-2 ${r===100?"[&>div]:bg-green-500":""}`}),e.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[e.jsx("span",{children:"Started"}),e.jsx("span",{children:"Complete"})]})]})]})]})}),e.jsxs("div",{className:"flex flex-col lg:grid lg:grid-cols-4 gap-6",children:[e.jsxs(h,{className:"lg:col-span-1 lg:h-96 order-2 lg:order-1",children:[e.jsxs(k,{className:"pb-4",children:[e.jsxs(C,{className:"text-lg flex items-center gap-2 mb-2",children:[e.jsx(v,{className:"h-5 w-5"}),"Question Navigator"]}),e.jsx(T,{className:"text-xs",children:"Click on any question number to jump to it. Green indicates completed questions."})]}),e.jsxs(N,{className:"space-y-4 flex flex-col justify-between h-full",children:[e.jsx("div",{className:"grid grid-cols-6 sm:grid-cols-8 lg:grid-cols-5 gap-2",children:s.map((a,i)=>{const c=L[a.id],d=i===m;return e.jsxs(o,{variant:d?"default":c?"secondary":"outline",size:"sm",className:`h-10 w-10 p-0 text-xs font-medium rounded-xl transition-all duration-200 ${d?"bg-primary text-primary-foreground shadow-lg scale-105":c?"bg-green-100 text-green-800 border-green-300 hover:bg-green-200":"hover:bg-muted hover:scale-105"}`,onClick:()=>D(i),children:[c&&!d&&e.jsx(p,{className:"h-3 w-3 absolute -top-1 -right-1 text-green-600 bg-white rounded-full"}),i+1]},a.id)})}),e.jsxs(P,{children:[e.jsx(Q,{asChild:!0,children:e.jsx(o,{className:"w-full rounded-xl mt-4",size:"lg",children:"Submit Assessment"})}),e.jsxs(H,{className:"",children:[e.jsxs(V,{children:[e.jsxs(Y,{className:"flex items-center gap-2 text-xl",children:[e.jsx(v,{className:"h-5 w-5 "}),"Submit Assessment"]}),e.jsx(z,{className:"text-base",children:"Are you sure you want to submit your assessment?"})]}),e.jsxs("div",{className:"space-y-4 ",children:[e.jsxs(U,{className:"bg-yellow-50 border-yellow-300 border dark:bg-yellow-900/20 dark:border-yellow-700/80 text-yellow-700 dark:text-yellow-300",children:[e.jsx(Ne,{className:"h-4 w-4"}),e.jsx(G,{className:"text-yellow-700 dark:text-yellow-300",children:"Warning: Once submitted, you cannot make any changes to your answers."})]}),e.jsxs("div",{className:"border p-4 rounded-lg space-y-3",children:[e.jsx("h4",{className:"font-medium text-sm",children:"Assessment Progress"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Questions Completed"}),e.jsxs("span",{className:"font-medium",children:[l," of ",s.length]})]}),e.jsx(he,{value:r,className:"h-2"})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 sm:gap-4 text-sm",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(p,{className:"h-4 w-4 text-green-500"}),e.jsxs("span",{children:["Answered: ",e.jsx("strong",{children:l})]})]})})]}),l!=s.length&&e.jsxs(U,{className:"bg-yellow-50 border-yellow-300 border dark:bg-yellow-900/20 dark:border-yellow-700/80 text-yellow-700 dark:text-yellow-300",children:[e.jsx(ve,{className:"h-4 w-4 text-yellow-700 dark:text-yellow-300"}),e.jsxs(G,{className:"text-yellow-700 dark:text-yellow-300",children:["You have ",s.length-l," unanswered questions. These will be marked as incorrect if you submit now."]})]})]}),e.jsxs(E,{className:"flex gap-2",children:[e.jsx(O,{children:"Continue Answering"}),e.jsx(R,{className:"rounded-xl cursor-pointer",onClick:Se,children:"Submit Assessment"})]})]})]})]})]}),e.jsxs("div",{className:"lg:col-span-3 order-1 lg:order-2",children:[e.jsx("div",{className:"bg-blue-50 border-2 border-blue-200 rounded-xl p-4 mb-4 dark:bg-blue-900/20 dark:border-blue-800/30",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5 dark:bg-blue-900/40",children:e.jsx("span",{className:"text-blue-600 text-xs font-bold dark:text-blue-300",children:"!"})}),e.jsxs("div",{className:"",children:[e.jsx("h4",{className:"font-medium text-blue-900 mb-1 dark:text-blue-100 text-xs lg:text-base",children:"Instructions"}),e.jsx("p",{className:"text-blue-700 dark:text-blue-300/80 text-xs lg:text-base",children:"Read each question carefully and select your answer. You can navigate between questions using the buttons below or the question navigator on the left. Make sure to review all your answers before submitting."})]})]})}),e.jsxs(h,{className:"lg:col-span-3",children:[e.jsxs(k,{children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(S,{variant:"outline",children:[" ","Question ",m+1," of ",s.length]}),e.jsxs(S,{children:[t.points," points"]})]})}),e.jsx(C,{className:"text-lg leading-relaxed",children:t.question})]}),e.jsxs(N,{className:"space-y-6",children:[Fe(t),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4 sm:gap-0 pt-6 border-t",children:[e.jsxs(o,{variant:"outline",onClick:()=>D(Math.max(0,m-1)),disabled:m===0,className:"rounded-xl",children:[e.jsx(W,{className:"h-4 w-4 mr-2"})," Previous"]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[" ","Question ",m+1," of ",s.length," "]}),e.jsxs(o,{onClick:()=>D(Math.min(s.length-1,m+1)),disabled:m===s.length-1,className:"rounded-xl",children:["Next ",e.jsx(W,{className:"h-4 w-4 ml-2 rotate-180"})]})]})]})]})]})]})]})})]}):e.jsx("div",{children:"No questions available for this assessment."})}return e.jsxs(fe,{children:[e.jsx(de,{title:"Assessments"}),e.jsx("div",{className:"min-h-screen mt-16",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 flex flex-col gap-10",children:[e.jsx(h,{children:e.jsx(N,{className:"px-8 py-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-4 sm:gap-8",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-primary/20 to-primary/10 rounded-2xl flex items-center justify-center",children:e.jsx(Le,{className:"h-10 w-10 text-primary"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h1",{className:"text-2xl font-bold mb-3 bg-gradient-to-r from-primary to-primary/70 bg-clip-text text-transparent",children:"My Assessments"}),e.jsx("p",{className:"text-muted-foreground mb-4 text-sm",children:"Complete your assigned assessments and track your academic progress"}),e.jsxs("div",{className:"flex items-center gap-6 text-muted-foreground text-xs",children:[e.jsxs("span",{className:"flex items-center gap-2 bg-muted px-3 py-1 rounded-full",children:[e.jsx(ye,{className:"h-4 w-4"}),_.year_level," - Section ",_.section]}),e.jsxs("span",{className:"flex items-center gap-2 bg-muted px-3 py-1 rounded-full",children:[e.jsx(we,{className:"h-4 w-4"}),"Academic Year ",_.academic_year]})]})]}),e.jsxs("div",{className:"text-center sm:text-right bg-primary/5 p-4 sm:p-6 rounded-2xl border border-primary/20 w-full sm:w-auto",children:[e.jsx("div",{className:"text-3xl font-bold text-primary mb-1",children:F.length}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Available"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Assessments"})]})]})})}),e.jsxs(h,{className:"border-2 border-dashed border-muted-foreground/20",children:[e.jsx(k,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(C,{className:"flex items-center gap-2 text-xl",children:[e.jsx(Ie,{className:"h-5 w-5"}),"Filter & Search Assessments"]}),e.jsx(T,{className:"mt-1",children:"Find specific assessments by course, status, or search terms"})]}),e.jsxs(S,{variant:"outline",className:"text-xs",children:[F.length," results"]})]})}),e.jsx(N,{children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(A,{htmlFor:"search",className:"text-sm font-medium mb-2 block",children:"Search Assessments"}),e.jsxs("div",{className:"relative",children:[e.jsx($e,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),e.jsx(ue,{id:"search",placeholder:"Search by title, course code, or description...",value:y,onChange:s=>ee(s.target.value),className:"pl-10 rounded-xl"})]})]}),e.jsxs("div",{className:"w-full",children:[e.jsx(A,{className:"text-sm font-medium mb-2 block",children:"Subject"}),e.jsxs(pe,{value:j,onValueChange:se,children:[e.jsx(je,{className:"rounded-xl",children:e.jsx(ge,{placeholder:"All Subjects"})}),e.jsxs(be,{children:[e.jsx($,{value:"all",children:"All Subjects"}),ke.map(s=>e.jsx($,{value:s??"",children:s},s))]})]})]}),e.jsxs("div",{className:"w-full",children:[e.jsx(A,{className:"text-sm font-medium mb-2 block",children:"Status"}),e.jsxs(pe,{value:w,onValueChange:te,children:[e.jsx(je,{className:"rounded-xl",children:e.jsx(ge,{placeholder:"All Status"})}),e.jsxs(be,{children:[e.jsx($,{value:"all",children:"All Status"}),Ce.map(s=>e.jsx($,{value:s,children:s.charAt(0).toUpperCase()+s.slice(1)},s))]})]})]})]})})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("div",{className:"mb-4",children:e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Showing ",F.length," assessments"]})}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:F.map(s=>{var c,d,g,x;const{assessment:t,course:l}=s,r=re(s),a=s.closed_at?new Date(s.closed_at):null,i=a&&new Date>a;return e.jsxs(h,{className:"hover:shadow-lg transition-all duration-200",children:[e.jsxs(k,{children:[e.jsxs(C,{className:"text-lg flex items-center gap-2",children:[e.jsx(v,{className:"h-4 w-4"}),(c=t.subject)==null?void 0:c.code,e.jsxs("span",{className:"text-base",children:["- ",(d=t.subject)==null?void 0:d.title]})]}),e.jsxs(T,{className:"flex flex-col gap-2",children:[e.jsx("div",{className:"font-medium text-foreground",children:t.title}),t.status==="completed"?e.jsx(S,{variant:"outline",className:"bg-blue-100 text-blue-800 border-blue-200",children:"Completed"}):e.jsx(S,{variant:"outline",className:_e(r),children:r.charAt(0).toUpperCase()+r.slice(1)})]})]}),e.jsx(N,{children:e.jsxs("div",{className:"space-y-4",children:[t.description&&e.jsx("div",{className:"bg-muted/50 p-3 rounded-lg",children:e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:t.description})}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 sm:gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-muted-foreground flex items-center gap-1",children:[e.jsx(v,{className:"h-3 w-3"}),"Questions"]}),e.jsx("span",{className:"font-medium",children:((g=t.questions)==null?void 0:g.length)||0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-muted-foreground flex items-center gap-1",children:[e.jsx(p,{className:"h-3 w-3"}),"Points"]}),e.jsxs(S,{variant:"secondary",children:[t.total_points," pts"]})]})]}),t.status==="completed"?e.jsx("div",{className:"bg-blue-50 border border-blue-300 p-3 rounded-lg dark:bg-blue-900/20 dark:border-blue-700/80",children:e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("span",{className:"text-blue-700 font-medium flex items-center gap-1 dark:text-blue-300",children:[e.jsx(He,{className:"h-3 w-3"}),"Your Score"]}),e.jsxs("span",{className:"font-bold text-blue-700 dark:text-blue-300",children:[Math.round(t.percentage??0),"% (",Number(t.student_score??0),"/",t.total_points??0,")"]})]})}):e.jsxs("div",{className:"bg-orange-50 border border-orange-300 p-3 rounded-lg dark:bg-orange-900/20 dark:border-orange-700/80",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("span",{className:`font-medium flex items-center gap-1 ${i?"text-red-600 dark:text-red-400":"text-orange-700 dark:text-orange-300"}`,children:[e.jsx(we,{className:"h-3 w-3"}),"Due Date"]}),e.jsx("span",{className:`font-medium ${i?"text-red-600 dark:text-red-400":"text-orange-700 dark:text-orange-300"}`,children:a?e.jsxs(e.Fragment,{children:[a.toLocaleDateString()," at"," ",a.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]}):e.jsx(e.Fragment,{children:"No assigned date"})})]}),i&&e.jsx("p",{className:"text-xs text-red-600 mt-1 dark:text-red-400",children:"This assessment is overdue"}),"re"]}),e.jsx("div",{className:"flex flex-col sm:flex-row gap-2 pt-2",children:t.status==="completed"?e.jsx(e.Fragment,{}):e.jsx(e.Fragment,{children:s.is_available&&!i?e.jsxs(P,{children:[e.jsx(Q,{asChild:!0,children:e.jsxs(o,{size:"sm",className:"flex-1 rounded-xl cursor-pointer",children:[e.jsx(Me,{className:"h-3 w-3 mr-1"})," Begin Assessment"]})}),e.jsxs(H,{className:"sm:max-w-md",children:[e.jsxs(V,{children:[e.jsxs(Y,{className:"flex items-center gap-2 text-xl",children:[e.jsx(v,{className:"h-5 w-5 text-blue-600"}),"You're About to Start the Assessment"]}),e.jsx(z,{className:"text-base",children:"Please review the information below before beginning."})]}),e.jsxs("div",{className:"space-y-4 ",children:[e.jsxs(U,{className:"bg-blue-50 border-blue-300 border dark:bg-blue-900/20 dark:border-blue-700/80 text-blue-700 dark:text-blue-300",children:[e.jsx(Ne,{className:"h-4 w-4"}),e.jsx(G,{className:"text-blue-700 dark:text-blue-300",children:"Once you start, you cannot pause or restart the assessment. Leaving will cause your answers to not be saved."})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[e.jsx(Pe,{className:"h-4 w-4 0"}),e.jsxs("span",{children:[e.jsx("strong",{children:"Total Points:"})," ",t.total_points," points"]})]}),e.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[e.jsx(v,{className:"h-4 w-4 "}),e.jsxs("span",{children:[e.jsx("strong",{children:"Questions:"})," ",(x=t.questions)==null?void 0:x.length," items"]})]})]}),e.jsxs("div",{className:"bg-blue-50 border-blue-300 border dark:bg-blue-900/20 dark:border-blue-700/80 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-sm mb-2",children:"Before you begin:"}),e.jsxs("ul",{className:"text-sm text-blue-700 dark:text-blue-300 space-y-1",children:[e.jsx("li",{children:"• Ensure you have a stable internet connection"}),e.jsx("li",{children:"• Find a quiet environment free from distractions"}),e.jsx("li",{children:"• Have any permitted materials ready"}),e.jsx("li",{children:"• Close unnecessary browser tabs and applications"})]})]})]}),e.jsxs(E,{className:"flex gap-2",children:[e.jsx(O,{children:"Cancel"}),e.jsx(R,{className:"rounded-xl cursor-pointer",onClick:b=>{b.stopPropagation(),s.is_available&&Z(s)},children:"Start Assessment"})]})]})]}):e.jsx(o,{size:"sm",className:"flex-1 rounded-xl",disabled:!0,children:"Unavailable"})})})]})})]},s.id)})})]}),F.length===0&&e.jsx(h,{className:"text-center py-16",children:e.jsx(N,{children:e.jsxs("div",{className:"max-w-md mx-auto",children:[e.jsx("div",{className:"w-20 h-20 bg-muted rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(ye,{className:"h-10 w-10 text-muted-foreground"})}),e.jsx("h3",{className:"text-xl font-semibold mb-3",children:y||j!=="all"||w!=="all"?"No assessments match your criteria":"No assessments available"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:y||j!=="all"||w!=="all"?"Try adjusting your search terms or filters to find what you're looking for.":"New assessments will appear here when they become available. Check back regularly or contact your instructor for more information."}),(y||j!=="all"||w!=="all")&&e.jsx(o,{variant:"outline",onClick:()=>{ee(""),se("all"),te("all")},className:"rounded-xl",children:"Clear all filters"})]})})})]})})]})}export{bs as default};
