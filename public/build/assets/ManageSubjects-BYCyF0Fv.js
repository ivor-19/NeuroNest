import{K as cs,r as i,m as fe,j as e,L as ns,S as x,t as k}from"./app-BEbjV-qD.js";import{C as F,c as A,a as ve,b as Ne,B as L}from"./badge-1PRfllFz.js";import{B as n}from"./button-BFIxZE2G.js";import{I as h}from"./input-C0kKwBqU.js";import{L as r}from"./label-BgGmDQd2.js";import{T}from"./textarea-B0RPcVHQ.js";import{S as p,a as g,b as f,c as v,d}from"./select-CqrVq4vg.js";import{T as os,a as ms,b as be,c as ye}from"./tabs-DSQFRL30.js";import{S as we}from"./separator-Cl0lrfK1.js";import{A as H,a as q,b as G,c as Q,d as Se,e as Ce,f as ke,g as Me}from"./alert-dialog-CvPnZYMs.js";import{A as xs,L as K}from"./app-layout-B4IS1JUv.js";import{P as hs}from"./placeholder-pattern-icjUFAEn.js";import{S as us}from"./switch-CSrkeAZg.js";import{B as P}from"./book-open-CNJuXK_a.js";import{F as js}from"./file-text-3rLYZG9c.js";import{S as ps}from"./search-DF-t6CVX.js";import{F as gs}from"./filter-D7etL7wq.js";import{P as I}from"./plus-BWYoiOWd.js";import{c as Pe,G as fs}from"./graduation-cap-DBR4dBR6.js";import{C as vs}from"./user-menu-content-DlH-7vNY.js";import{S as Fe}from"./square-pen-DrI9Ci1i.js";import{T as se}from"./trash-2-jJ7R5dGE.js";import{X as Ae}from"./x-DOD-r5bm.js";import{B as De}from"./book-COyFK3vw.js";import{T as Ns}from"./triangle-alert-DQckn6J4.js";import{U as Ee}from"./unlink-BQBEO62P.js";import"./index-BzPx2h8Y.js";import"./index-BLOCFgQD.js";import"./index-CVrP-aBt.js";import"./check-vOauoEJR.js";import"./users-DpY-fapd.js";import"./mail-EzpcvDen.js";import"./app-logo-icon-CE-0d2V8.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bs=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],_e=Pe("Loader",bs);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ys=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],Le=Pe("Upload",ys),ws=[{title:"Manage Students",href:"admin/manage-subjects"}];function ta({subjects:y}){const{auth:M}=cs().props,[Ie,ae]=i.useState("subjects"),[le,te]=i.useState("all"),[w,re]=i.useState(""),[V,u]=i.useState(!1),de=i.useRef(null),ie=i.useRef(null),{data:j,setData:S,post:Re,processing:ce,errors:N,reset:Oe}=fe({code:"",title:"",description:"",year_level:"",semester:"",isActive:"",image:null}),{data:m,setData:R,processing:ne,reset:Ve}=fe({title:"",subject_id:"",creator_id:M.user.id,status:"",description:"",order:""}),X=y.flatMap(s=>s.modules||[]),[oe,J]=i.useState(null),[W,$]=i.useState(null),[me,Z]=i.useState(null),$e=s=>{const a=s.target.files[0];if(a){S("image",a);const c=new FileReader;c.onload=_=>J(_.target.result),c.readAsDataURL(a)}},Be=s=>{var c;const a=(c=s.target.files)==null?void 0:c[0];if(a){Z(a);const _=new FileReader;_.onload=is=>{var ge;return $((ge=is.target)==null?void 0:ge.result)},_.readAsDataURL(a)}},Ye=()=>{Z(null),$(null),C({...l,image:""})},Ue=()=>{S("image",null),J(null)},ze=async s=>{s.preventDefault(),Re(route("admin.addSubject"),{forceFormData:!0,onSuccess:()=>{k.success(`Subject added: ${j.code}`),Oe(),u(!1),J(null),console.log("Success: ",j)},onError:a=>{console.error("Error occurred",a)}})},[xe,he]=i.useState(null),Te=async s=>{s.preventDefault();const a=new FormData;a.append("subject_id",m.subject_id),a.append("creator_id",M.user.id.toString()),a.append("title",m.title),a.append("description",m.description),a.append("status",m.status),a.append("order",m.order),xe&&a.append("pdf",xe),x.post(route("admin.addModule"),a,{onSuccess:()=>{Ve(),u(!1),he(null),console.log("Module added successfully!"),x.post(route("admin.addActivity"),{type:"create",user:M.user.name,action:"Created a new module",details:`${m.title}`},{})},onError:c=>{console.error("Error occurred:",c)}})},ue=(s=>{if(s==="all")return X;const a=y.find(c=>c.code===s);return a?a.modules||[]:[]})(le).filter(s=>s.title.toLowerCase().includes(w.toLowerCase())),je=y.filter(s=>s.title.toLowerCase().includes(w.toLowerCase())||s.code.toLowerCase().includes(w.toLowerCase())),He=X.length,qe=X.filter(s=>s.status==="published").length,Ge=y.filter(s=>s.isActive).length,[Qe,B]=i.useState(!1),[Ke,Y]=i.useState(!1),[b,Xe]=i.useState(null),Je=async()=>{x.delete(route("admin.deleteSubject",b==null?void 0:b.id),{onSuccess:()=>{Y(!1),k.info(`Subject: ${b==null?void 0:b.code} is deleted.`),x.post(route("admin.addActivity"),{type:"delete",user:M.user.name,action:"Delete a subject",details:`${b==null?void 0:b.title}`},{})},onError:s=>{console.error("Error occured",s),Y(!1)}})},[o,We]=i.useState(null),Ze=async()=>{x.delete(route("admin.deleteModule",o==null?void 0:o.id),{onSuccess:()=>{B(!1),k.info(`Removed ${o==null?void 0:o.title}`),x.post(route("admin.addActivity"),{type:"delete",user:M.user.name,action:"Delete a module",details:`${o==null?void 0:o.title}`},{})},onError:s=>{console.error("Error occured",s),B(!1)}})},[es,O]=i.useState(!1),[l,C]=i.useState(null),[U,D]=i.useState(!1),ss=async s=>{O(!0),C(s),$(s.image?`/storage/${s.image}`:null)},as=async s=>{var c;D(!0);const a=new FormData;a.append("code",(l==null?void 0:l.code)||""),a.append("title",(l==null?void 0:l.title)||""),a.append("description",(l==null?void 0:l.description)||""),a.append("year_level",((c=l==null?void 0:l.year_level)==null?void 0:c.toString())||""),a.append("semester",(l==null?void 0:l.semester)||""),me?a.append("image",me):(l==null?void 0:l.image)===""&&a.append("image",""),x.post(route("admin.updateSubject",s),a,{headers:{"Content-Type":"multipart/form-data"},onSuccess:()=>{k.success("Subject updated successfully"),C(null),O(!1),D(!1),$(null),Z(null),x.post(route("admin.addActivity"),{type:"edit",user:M.user.name,action:"Updated subject",details:`${l==null?void 0:l.title} modified`},{})},onError:_=>{console.error(_),D(!1),k.success("There is a problem updating the subject. Try again."),O(!1)}})},ls=s=>{ae("modules"),te(s),re("")},[ts,z]=i.useState(!1),[t,E]=i.useState(),[ee,pe]=i.useState(null),rs=s=>{z(!0),E(s)},ds=async s=>{D(!0);const a=new FormData;a.append("title",(t==null?void 0:t.title)||""),a.append("subject_id",(t==null?void 0:t.subject_id.toString())||""),a.append("description",(t==null?void 0:t.description)||""),a.append("status",(t==null?void 0:t.status)||""),a.append("order",(t==null?void 0:t.order.toString())||""),ee&&a.append("pdf",ee),console.log(t),x.post(route("admin.updateModule",s),a,{onSuccess:()=>{k.success("Module updated successfully"),z(!1),D(!1),pe(null),x.post(route("admin.addActivity"),{type:"edit",user:M.user.name,action:"Updated module",details:`${t==null?void 0:t.title}`},{})},onError:c=>{console.error(c),D(!1),k.error("There was a problem updating the module")}})};return e.jsxs(xs,{breadcrumbs:ws,children:[e.jsx(ns,{title:"Subject Management"}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-6 rounded-xl overflow-x-auto p-8 bg-[var(--bg-main)]",children:[e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Subject Management"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your academic subjects and learning modules efficiently."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(F,{children:e.jsx(A,{className:"p-6",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(P,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium leading-none",children:"Active Subjects"}),e.jsx("p",{className:"text-2xl font-bold",children:Ge})]})]})})}),e.jsx(F,{children:e.jsx(A,{className:"p-6",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(K,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium leading-none",children:"Total Modules"}),e.jsx("p",{className:"text-2xl font-bold",children:He})]})]})})}),e.jsx(F,{children:e.jsx(A,{className:"p-6",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(js,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium leading-none",children:"Published"}),e.jsx("p",{className:"text-2xl font-bold",children:qe})]})]})})})]}),e.jsx(F,{children:e.jsxs(A,{className:"space-y-2",children:[e.jsxs("div",{className:"relative",children:[e.jsx(ps,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(h,{placeholder:"Search subjects and modules...",className:"pl-10",value:w,onChange:s=>re(s.target.value)})]}),e.jsxs(os,{value:Ie,onValueChange:ae,className:"space-y-2",children:[e.jsxs(ms,{className:"grid w-full grid-cols-2 ",children:[e.jsxs(be,{value:"subjects",className:"flex items-center gap-2 cursor-pointer",onClick:()=>u(!1),children:[e.jsx(P,{className:"h-4 w-4"})," Subjects"]}),e.jsxs(be,{value:"modules",className:"flex items-center gap-2 cursor-pointer",onClick:()=>u(!1),children:[e.jsx(K,{className:"h-4 w-4"}),"Modules"]})]}),e.jsx(ye,{value:"modules",className:"space-y-6",children:e.jsxs(F,{children:[e.jsx(ve,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(Ne,{className:"flex items-center gap-2",children:[e.jsx(K,{className:"h-5 w-5"})," Learning Modules"]}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Manage and organize your course modules"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(p,{value:le,onValueChange:te,children:[e.jsxs(g,{className:"min-w-48",children:[e.jsx(gs,{className:"h-4 w-4 mr-2"}),e.jsx(f,{placeholder:"Filter by subject"})]}),e.jsxs(v,{children:[e.jsx(d,{value:"all",children:"All"}),y.map(s=>e.jsxs(d,{value:s.code,children:[s.code," - ",s.title]},s.code))]})]}),e.jsxs(n,{onClick:()=>u(!V),children:[e.jsx(I,{className:"h-4 w-4 mr-2"}),"Add Module"]})]})]})}),e.jsxs(A,{className:"space-y-6",children:[V&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-4 p-6 border rounded-lg bg-muted/50",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(I,{className:"h-4 w-4"}),e.jsx("h3",{className:"font-semibold",children:"Add New Module"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"module-title",children:"Module Title"}),e.jsx(h,{id:"module-title",value:m.title,onChange:s=>R("title",s.target.value),placeholder:"Enter module title"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"module-subject",children:"Subject"}),e.jsxs(p,{value:m.subject_id,onValueChange:s=>R("subject_id",s),children:[e.jsx(g,{children:e.jsx(f,{placeholder:"Select subject"})}),e.jsx(v,{children:y.map(s=>e.jsxs(d,{value:String(s.id),children:[s.code," - ",s.title]},s.id))})]})]}),e.jsxs("div",{className:"space-y-2 md:col-span-2",children:[e.jsx(r,{htmlFor:"module-description",children:"Description"}),e.jsx(T,{id:"module-description",value:m.description,onChange:s=>R("description",s.target.value),placeholder:"Describe the module content and objectives",rows:3})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"module-order",children:"Module Order"}),e.jsx(h,{id:"module-order",type:"number",value:m.order,onChange:s=>R("order",s.target.value),placeholder:"1, 2, 3..."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"module-status",children:"Status"}),e.jsxs(p,{value:m.status,onValueChange:s=>R("status",s),children:[e.jsx(g,{children:e.jsx(f,{placeholder:"Select status"})}),e.jsxs(v,{children:[e.jsx(d,{value:"published",children:"Published"}),e.jsx(d,{value:"draft",children:"Draft"})]})]})]}),e.jsxs("div",{className:"space-y-2 md:col-span-2",children:[e.jsx(r,{htmlFor:"module-file",children:"PDF File"}),e.jsx(h,{type:"file",accept:".pdf",onChange:s=>{var a;return he(((a=s.target.files)==null?void 0:a[0])||null)}})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(n,{onClick:Te,disabled:ne,children:ne?"Creating...":"Create Module"}),e.jsx(n,{variant:"outline",onClick:()=>u(!1),children:" Cancel"})]})]}),e.jsx(we,{})]}),e.jsx("div",{className:"space-y-4",children:ue.length>0?ue.map(s=>{const a=y.find(c=>c.id===s.subject_id);return e.jsx("div",{className:"border rounded-lg p-4 hover:bg-muted/50 transition-colors",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"space-y-2 flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"font-semibold",children:s.title}),a&&e.jsx(L,{variant:"outline",children:a.code}),e.jsxs(L,{variant:"secondary",children:["Module ",s.order]}),e.jsx(L,{variant:s.status==="published"?"default":"secondary",children:s.status})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.description}),a&&e.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(fs,{className:"h-3 w-3"})," Year ",a.year_level]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(vs,{className:"h-3 w-3"})," Semester ",a.semester]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(P,{className:"h-3 w-3"})," ",a.title]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(n,{variant:"ghost",size:"sm",onClick:()=>rs(s),children:e.jsx(Fe,{className:"h-4 w-4"})}),e.jsx(n,{variant:"ghost",size:"sm",onClick:()=>{B(!0),We(s)},children:e.jsx(se,{className:"h-4 w-4"})})]})]})},s.id)}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(K,{className:"h-12 w-12 mx-auto text-muted-foreground/50 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No modules found"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:w?"Try adjusting your search terms":"Create your first learning module to get started"}),!w&&e.jsxs(n,{onClick:()=>u(!0),children:[e.jsx(I,{className:"h-4 w-4 mr-2"}),"  Add Module"]})]})})]})]})}),e.jsx(ye,{value:"subjects",className:"space-y-6",children:e.jsxs(F,{children:[e.jsx(ve,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(Ne,{className:"flex items-center gap-2",children:[e.jsx(P,{className:"h-5 w-5"})," Academic Subjects"]}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Organize your curriculum and course structure"})]}),e.jsxs(n,{onClick:()=>u(!V),children:[e.jsx(I,{className:"h-4 w-4 mr-2"})," Add Subject"]})]})}),e.jsxs(A,{className:"space-y-6",children:[V&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-4 p-6 border rounded-lg bg-muted/50",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(I,{className:"h-4 w-4"}),e.jsx("h3",{className:"font-semibold",children:"Add New Subject"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"subject-code",children:"Subject Code"}),e.jsx(h,{id:"subject-code",value:j.code,onChange:s=>S("code",s.target.value),placeholder:"e.g. CS101, MATH201"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"subject-title",children:"Subject Title"}),e.jsx(h,{id:"subject-title",value:j.title,onChange:s=>S("title",s.target.value),placeholder:"Enter subject title"})]}),e.jsxs("div",{className:"space-y-2 md:col-span-2",children:[e.jsx(r,{htmlFor:"subject-description",children:"Description"}),e.jsx(T,{id:"subject-description",value:j.description,onChange:s=>S("description",s.target.value),placeholder:"Describe the subject objectives and content",rows:3})]}),e.jsxs("div",{className:"space-y-2 md:col-span-2",children:[e.jsx(r,{htmlFor:"subject-image",children:"Subject Image"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("input",{ref:de,type:"file",id:"subject-image",accept:"image/*",onChange:$e,className:"hidden"}),e.jsxs(n,{type:"button",variant:"outline",onClick:()=>{var s;return(s=de.current)==null?void 0:s.click()},className:"flex items-center gap-2",children:[e.jsx(Le,{className:"h-4 w-4"}),"Choose Image"]}),oe&&e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:oe||"/placeholder.svg",alt:"Preview",className:"h-16 w-16 object-cover rounded-md border"}),e.jsx("button",{type:"button",onClick:Ue,className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1 hover:bg-red-600",children:e.jsx(Ae,{className:"h-3 w-3"})})]})]}),j.image&&e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Selected: ",j.image]}),N.image&&e.jsx("p",{className:"text-sm font-medium text-destructive",children:N.image})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"subject-year",children:"Year Level"}),e.jsxs(p,{value:j.year_level,onValueChange:s=>S("year_level",s),children:[e.jsx(g,{children:e.jsx(f,{placeholder:"Select year"})}),e.jsxs(v,{children:[e.jsx(d,{value:"1",children:"1st Year"}),e.jsx(d,{value:"2",children:"2nd Year"}),e.jsx(d,{value:"3",children:"3rd Year"}),e.jsx(d,{value:"4",children:"4th Year"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"subject-semester",children:"Semester"}),e.jsxs(p,{value:j.semester,onValueChange:s=>S("semester",s),children:[e.jsx(g,{children:e.jsx(f,{placeholder:"Select semester"})}),e.jsxs(v,{children:[e.jsx(d,{value:"1st",children:"1st Semester"}),e.jsx(d,{value:"2nd",children:"2nd Semester"}),e.jsx(d,{value:"Summer",children:"Summer"})]})]})]}),e.jsxs("div",{className:"space-y-2 md:col-span-2",children:[e.jsx(r,{htmlFor:"subject-status",children:"Status"}),e.jsxs(p,{value:j.isActive,onValueChange:s=>S("isActive",s),children:[e.jsx(g,{children:e.jsx(f,{placeholder:"Select status"})}),e.jsxs(v,{children:[e.jsx(d,{value:"1",children:"Active"}),e.jsx(d,{value:"0",children:"Inactive"})]})]})]})]}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx(n,{onClick:ze,disabled:ce,children:ce?"Creating...":"Create Subject"}),e.jsx(n,{variant:"outline",onClick:()=>u(!1),children:"Cancel"}),N.code&&e.jsx("p",{className:"text-sm font-medium text-destructive",children:N.code}),(N.code||N.title||N.year_level||N.semester||N.isActive)&&e.jsx("p",{className:"text-sm font-medium text-destructive",children:"Complete all fields"})]})]}),e.jsx(we,{})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:je.map(s=>e.jsx(F,{className:"hover:bg-muted/50 transition-colors",children:e.jsxs(A,{className:"p-2 flex flex-col gap-4",children:[e.jsxs("div",{className:"w-full h-48 relative",children:[s.image?e.jsx("img",{src:`/public/storage/${s.image}`,alt:`${s.title} subject title`,className:"w-full h-full object-cover"}):e.jsxs("div",{className:"relative h-full rounded-xl border border-sidebar-border/70 dark:border-sidebar-border",children:[e.jsx(hs,{className:"w-full h-full stroke-neutral-900/20 dark:stroke-neutral-100/20"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-muted-foreground",children:"No image available"})]}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/20 to-transparent"})]}),e.jsxs("div",{className:"px-2",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("h3",{className:"font-semibold",children:s.title}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.code})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(us,{checked:s.isActive,onCheckedChange:a=>{x.post(route("admin.subjectAvailability",s.id),{isActive:a},{onSuccess:()=>{k.success("Subject status updated")},onError:c=>{console.error("Error updating status",c)}})},className:"data-[state=checked]:bg-emerald-600 dark:data-[state=checked]:bg-emerald-500 cursor-pointer"}),e.jsx(n,{variant:"ghost",size:"sm",onClick:()=>ss(s),children:e.jsx(Fe,{className:"h-4 w-4"})}),e.jsx(n,{variant:"ghost",size:"sm",onClick:()=>{Y(!0),Xe(s)},children:e.jsx(se,{className:"h-4 w-4"})})]})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:s.description}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(L,{variant:"outline",children:["Year ",s.year_level]}),e.jsxs(L,{variant:"outline",children:["Sem ",s.semester]}),e.jsx(L,{variant:s.isActive?"default":"secondary",children:s.isActive?"Active":"Inactive"}),e.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[e.jsx(P,{className:"h-4 w-4"}),(s.modules||[]).length," modules"]})]}),e.jsx("div",{className:"flex items-center gap-1 text-xs text-muted-foreground cursor-pointer hover:text-primary transition-colors",onClick:()=>ls(s.code),children:"View all"})]})]})]})},s.id))}),je.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(P,{className:"h-12 w-12 mx-auto text-muted-foreground/50 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No subjects found"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:w?"Try adjusting your search terms":"Create your first subject to start building your curriculum"}),!w&&e.jsxs(n,{onClick:()=>u(!0),children:[e.jsx(I,{className:"h-4 w-4 mr-2"})," Add Subject"]})]})]})]})})]})]})}),e.jsx(H,{open:es,onOpenChange:O,children:e.jsxs(q,{className:"sm:max-w-[500px]",children:[e.jsx(G,{children:e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(De,{className:"h-5 w-5"}),"Edit Subject"]})}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"edit-code",children:"Code"}),e.jsx(h,{id:"subjectCode",value:(l==null?void 0:l.code)||"",onChange:s=>C({...l,code:s.target.value}),placeholder:"Enter course code"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"edit-name",children:"Title"}),e.jsx(h,{id:"subjectTitle",value:(l==null?void 0:l.title)||"",onChange:s=>C({...l,title:s.target.value}),placeholder:"Enter course name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"edit-description",children:"Description"}),e.jsx(T,{id:"subjectDescription",value:(l==null?void 0:l.description)||"",onChange:s=>C({...l,description:s.target.value}),placeholder:"Enter course description"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Subject Image"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("input",{ref:ie,type:"file",accept:"image/*",onChange:Be,className:"hidden"}),e.jsxs(n,{type:"button",variant:"outline",onClick:()=>{var s;return(s=ie.current)==null?void 0:s.click()},className:"flex items-center gap-2",children:[e.jsx(Le,{className:"h-4 w-4"}),"Change Image"]}),W&&e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:W||"/placeholder.svg",alt:"Preview",className:"h-16 w-16 object-cover rounded-md border"}),e.jsx("button",{type:"button",onClick:Ye,className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1 hover:bg-red-600",children:e.jsx(Ae,{className:"h-3 w-3"})})]})]}),!W&&(l==null?void 0:l.image)&&e.jsx("div",{className:"relative mt-2",children:e.jsx("img",{src:`/public/storage/${l.image}`,alt:"Current subject image",className:"h-16 w-16 object-cover rounded-md border"})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"edit-status",children:"Year Level"}),e.jsxs(p,{value:l==null?void 0:l.year_level.toString(),onValueChange:s=>{C({...l,year_level:s})},children:[e.jsx(g,{children:e.jsx(f,{placeholder:"Select Year Level"})}),e.jsxs(v,{children:[e.jsx(d,{value:"1",children:"1"}),e.jsx(d,{value:"2",children:"2"}),e.jsx(d,{value:"3",children:"3"}),e.jsx(d,{value:"4",children:"4"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"edit-status",children:"Semester"}),e.jsxs(p,{value:l==null?void 0:l.semester,onValueChange:s=>{C({...l,semester:s})},children:[e.jsx(g,{children:e.jsx(f,{placeholder:"Select Semester"})}),e.jsxs(v,{children:[e.jsx(d,{value:"1st",children:"1st"}),e.jsx(d,{value:"2nd",children:"2nd"}),e.jsx(d,{value:"Summer",children:"Summmer"})]})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(n,{variant:"outline",onClick:()=>O(!1),children:"Cancel"}),e.jsx(n,{onClick:()=>as(l.id),disabled:U,children:U?e.jsxs("div",{className:"flex items-center gap-2",children:["Saving ",e.jsx(_e,{className:"animate-spin h-4 w-4"})]}):"Save Changes"})]})]})}),e.jsx(H,{open:ts,onOpenChange:z,children:e.jsxs(q,{className:"sm:max-w-[500px]",children:[e.jsx(G,{children:e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(De,{className:"h-5 w-5"}),"Edit Module"]})}),e.jsx("div",{className:"space-y-4 p-6 border rounded-lg bg-muted/50",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"module-title",children:"Module Title"}),e.jsx(h,{id:"moduleTitle",value:(t==null?void 0:t.title)||"",onChange:s=>E({...t,title:s.target.value}),placeholder:"Enter module title"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"edit-status",children:"Subject"}),e.jsxs(p,{value:t==null?void 0:t.subject_id.toString(),onValueChange:s=>{E({...t,subject_id:Number(s)})},children:[e.jsx(g,{children:e.jsx(f,{placeholder:"Select Subject"})}),e.jsx(v,{children:y.map(s=>e.jsxs(d,{value:String(s.id),children:[s.code," - ",s.title]},s.id))})]})]}),e.jsxs("div",{className:"space-y-2 md:col-span-2",children:[e.jsx(r,{htmlFor:"module-description",children:"Description"}),e.jsx(T,{id:"moduleTitle",value:(t==null?void 0:t.description)||"",onChange:s=>E({...t,description:s.target.value}),placeholder:"Describe the module content and objectives",rows:3})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"module-order",children:"Module Order"}),e.jsx(h,{id:"moduleTitle",value:(t==null?void 0:t.order)||"",onChange:s=>E({...t,order:Number(s.target.value)}),placeholder:"1, 2, 3...",type:"number"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"module-status",children:"Status"}),e.jsxs(p,{value:t==null?void 0:t.status,onValueChange:s=>{E({...t,status:s})},children:[e.jsx(g,{children:e.jsx(f,{placeholder:"Select status"})}),e.jsxs(v,{children:[e.jsx(d,{value:"published",children:"Published"}),e.jsx(d,{value:"draft",children:"Draft"})]})]})]}),e.jsxs("div",{className:"space-y-2 md:col-span-2",children:[e.jsx(r,{htmlFor:"module-file",children:"PDF File"}),e.jsx(h,{type:"file",accept:".pdf",onChange:s=>{var a;return pe(((a=s.target.files)==null?void 0:a[0])||null)}}),(t==null?void 0:t.pdf)&&!ee&&e.jsxs("div",{className:"mt-2 text-sm text-muted-foreground",children:["Current file: ",t.pdf.split("/").pop()]})]})]})}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(n,{variant:"outline",onClick:()=>z(!1),children:"Cancel"}),e.jsx(n,{onClick:()=>ds(t.id),disabled:U,children:U?e.jsxs("div",{className:"flex items-center gap-2",children:["Saving ",e.jsx(_e,{className:"animate-spin h-4 w-4"})]}):"Save Changes"})]})]})}),e.jsx(H,{open:Ke,onOpenChange:Y,children:e.jsxs(q,{className:"max-w-md",children:[e.jsx(G,{className:"space-y-4",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-red-100 rounded-full dark:bg-red-900/20 flex-shrink-0",children:e.jsx(Ns,{className:"w-6 h-6 text-red-600 dark:text-red-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx(Q,{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Delete Subject"}),e.jsx(Se,{className:"text-sm text-gray-600 dark:text-gray-400",children:"Are you absolutely sure you want to delete this subject?"})]})]})}),e.jsx("div",{className:"my-4",children:e.jsx("div",{className:"rounded-lg border border-red-200 bg-red-50 p-4 dark:border-red-800/30 dark:bg-red-900/10",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full mt-2"})}),e.jsx("p",{className:"text-sm font-medium text-red-800 dark:text-red-200",children:"This action cannot be undone"})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full mt-2"})}),e.jsx("p",{className:"text-sm text-red-700 dark:text-red-300",children:"This will permanently remove all associated data and relationships"})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full mt-2"})}),e.jsx("p",{className:"text-sm text-red-700 dark:text-red-300",children:"All modules associated with this subject will also get deleted"})]})]})})}),e.jsxs(Ce,{className:"gap-2 sm:gap-2",children:[e.jsx(ke,{className:"flex-1 sm:flex-none",children:"Cancel"}),e.jsxs(Me,{onClick:Je,className:"flex-1 sm:flex-none bg-red-600 text-white hover:bg-red-700 focus:ring-2 focus:ring-red-500 focus:ring-offset-2 dark:bg-red-600 dark:hover:bg-red-700 gap-2 font-medium",children:[e.jsx(se,{className:"h-4 w-4"}),"Delete Subject"]})]})]})}),e.jsx(H,{open:Qe,onOpenChange:B,children:e.jsxs(q,{className:"max-w-md",children:[e.jsx(G,{className:"space-y-4",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-amber-100 rounded-full dark:bg-amber-900/20 flex-shrink-0",children:e.jsx(Ee,{className:"w-6 h-6 text-amber-600 dark:text-amber-400"})}),e.jsxs("div",{className:" flex-1",children:[e.jsx(Q,{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Remove module from a subject?"}),e.jsx(Se,{className:"text-sm text-gray-600 dark:text-gray-400",children:"This will remove the module from the subject. The module itself will not be deleted."})]})]})}),e.jsx("div",{className:"my-4",children:e.jsx("div",{className:"rounded-lg border border-amber-200 bg-amber-50 p-4 dark:border-amber-800/30 dark:bg-amber-900/10",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-2 h-2 bg-amber-500 rounded-full mt-2"})}),e.jsx("p",{className:"text-sm font-medium text-amber-800 dark:text-amber-200",children:`${o==null?void 0:o.title} will be unlinked from this subject`})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-2 h-2 bg-amber-500 rounded-full mt-2"})}),e.jsx("p",{className:"text-sm text-amber-700 dark:text-amber-300",children:"You can re-add the module to this subject later if needed"})]})]})})}),e.jsxs(Ce,{className:"gap-2 sm:gap-2",children:[e.jsx(ke,{className:"flex-1 sm:flex-none",children:"Cancel"}),e.jsxs(Me,{onClick:Ze,className:"flex-1 sm:flex-none bg-amber-600 text-white hover:bg-amber-700 focus:ring-2 focus:ring-amber-500 focus:ring-offset-2 dark:bg-amber-600 dark:hover:bg-amber-700 gap-2 font-medium",children:[e.jsx(Ee,{className:"h-4 w-4"}),"Remove Module"]})]})]})})]})]})}export{ta as default};
